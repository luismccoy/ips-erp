/** * Reads SSM environment context from a known Amplify environment variable, * fetches values from SSM and places those values in the corresponding environment variables */export const internalAmplifyFunctionResolveSsmParams = async (client) => {    const envPathObject = JSON.parse(process.env.AMPLIFY_SSM_ENV_CONFIG ?? '{}');    const paths = Object.values(envPathObject).map((paths) => paths.path);    if (paths.length === 0) {        return;    }    let actualSsmClient;    if (client) {        actualSsmClient = client;    }    else {        const ssmSdk = await import('@aws-sdk/client-ssm');        actualSsmClient = new ssmSdk.SSM();    }    const chunkArray = (array, chunkSize) => {        const chunks = [];        for (let i = 0; i < array.length; i += chunkSize) {            chunks.push(array.slice(i, i + chunkSize));        }        return chunks;    };    const resolveSecrets = async (paths) => {        const response = (await Promise.all(chunkArray(paths, 10).map(async (chunkedPaths) => await actualSsmClient.getParameters({            Names: chunkedPaths,            WithDecryption: true,        })))).reduce((accumulator, res) => {            accumulator.Parameters?.push(...(res.Parameters ?? []));            accumulator.InvalidParameters?.push(...(res.InvalidParameters ?? []));            return accumulator;        }, {            Parameters: [],            InvalidParameters: [],        });        if (response.Parameters && response.Parameters.length > 0) {            for (const parameter of response.Parameters) {                if (parameter.Name) {                    const envKey = Object.keys(envPathObject).find((key) => envPathObject[key].sharedPath === parameter.Name ||                        envPathObject[key].path === parameter.Name);                    if (envKey) {                        process.env[envKey] = parameter.Value;                    }                }            }        }        return response;    };    const response = await resolveSecrets(paths);    const sharedPaths = (response?.InvalidParameters || [])        .map((invalidParam) => Object.values(envPathObject).find((paths) => paths.path === invalidParam)?.sharedPath)        .filter((sharedParam) => !!sharedParam);     if (sharedPaths.length > 0) {        await resolveSecrets(sharedPaths);    }};await internalAmplifyFunctionResolveSsmParams();const SSM_PARAMETER_REFRESH_MS = 1000 * 60;setInterval(async () => {    try {        await internalAmplifyFunctionResolveSsmParams();    }    catch (error) {        try {                        console.debug(error);                    }        catch {                    }    }}, SSM_PARAMETER_REFRESH_MS);export {};
var a$=Object.create;var da=Object.defineProperty;var c$=Object.getOwnPropertyDescriptor;var u$=Object.getOwnPropertyNames;var l$=Object.getPrototypeOf,d$=Object.prototype.hasOwnProperty;var z=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var b=(e,t)=>()=>(e&&(t=e(e=0)),t);var x=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),rt=(e,t)=>{for(var r in t)da(e,r,{get:t[r],enumerable:!0})},yS=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of u$(t))!d$.call(e,o)&&o!==r&&da(e,o,{get:()=>t[o],enumerable:!(n=c$(t,o))||n.enumerable});return e};var A=(e,t,r)=>(r=e!=null?a$(l$(e)):{},yS(t||!e||!e.__esModule?da(r,"default",{value:e,enumerable:!0}):r,e)),W=e=>yS(da({},"__esModule",{value:!0}),e);import{createRequire as f$}from"node:module";import p$ from"node:path";import m$ from"node:url";var c=b(()=>{global.require=f$(import.meta.url);global.__filename=m$.fileURLToPath(import.meta.url);global.__dirname=p$.dirname(__filename)});var Tr=x(de=>{"use strict";c();de.HttpAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(de.HttpAuthLocation||(de.HttpAuthLocation={}));de.HttpApiKeyAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(de.HttpApiKeyAuthLocation||(de.HttpApiKeyAuthLocation={}));de.EndpointURLScheme=void 0;(function(e){e.HTTP="http",e.HTTPS="https"})(de.EndpointURLScheme||(de.EndpointURLScheme={}));de.AlgorithmId=void 0;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(de.AlgorithmId||(de.AlgorithmId={}));var h$=e=>{let t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>de.AlgorithmId.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>de.AlgorithmId.MD5,checksumConstructor:()=>e.md5}),{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},g$=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},y$=e=>h$(e),S$=e=>g$(e);de.FieldPosition=void 0;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(de.FieldPosition||(de.FieldPosition={}));var E$="__smithy_context";de.IniSectionType=void 0;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(de.IniSectionType||(de.IniSectionType={}));de.RequestHandlerProtocol=void 0;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(de.RequestHandlerProtocol||(de.RequestHandlerProtocol={}));de.SMITHY_CONTEXT_KEY=E$;de.getDefaultClientConfiguration=y$;de.resolveDefaultRuntimeConfig=S$});var oe=x(xr=>{"use strict";c();var _$=Tr(),w$=e=>({setHttpHandler(t){e.httpHandler=t},httpHandler(){return e.httpHandler},updateHttpClientConfig(t,r){e.httpHandler?.updateHttpClientConfig(t,r)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),b$=e=>({httpHandler:e.httpHandler()}),af=class{name;kind;values;constructor({name:t,kind:r=_$.FieldPosition.HEADER,values:n=[]}){this.name=t,this.kind=r,this.values=n}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter(r=>r!==t)}toString(){return this.values.map(t=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}},cf=class{entries={};encoding;constructor({fields:t=[],encoding:r="utf-8"}){t.forEach(this.setField.bind(this)),this.encoding=r}setField(t){this.entries[t.name.toLowerCase()]=t}getField(t){return this.entries[t.toLowerCase()]}removeField(t){delete this.entries[t.toLowerCase()]}getByType(t){return Object.values(this.entries).filter(r=>r.kind===t)}},uf=class e{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){let r=new e({...t,headers:{...t.headers}});return r.query&&(r.query=v$(r.query)),r}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return e.clone(this)}};function v$(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var lf=class{statusCode;reason;headers;body;constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function C$(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}xr.Field=af;xr.Fields=cf;xr.HttpRequest=uf;xr.HttpResponse=lf;xr.getHttpHandlerExtensionConfiguration=w$;xr.isValidHostname=C$;xr.resolveHttpHandlerRuntimeConfig=b$});var vS=x(bn=>{"use strict";c();var SS=oe();function A$(e){let t=e.signer,r=e.signer,n=Object.assign(e,{eventSigner:t,messageSigner:r}),o=n.eventStreamPayloadHandlerProvider(n);return Object.assign(n,{eventStreamPayloadHandler:o})}var ES=e=>(t,r)=>async n=>{let{request:o}=n;return SS.HttpRequest.isInstance(o)?e.eventStreamPayloadHandler.handle(t,n,r):t(n)},_S={tags:["EVENT_STREAM","SIGNATURE","HANDLE"],name:"eventStreamHandlingMiddleware",relation:"after",toMiddleware:"awsAuthMiddleware",override:!0},wS=e=>async t=>{let{request:r}=t;return SS.HttpRequest.isInstance(r)?(r.headers={...r.headers,"content-type":"application/vnd.amazon.eventstream","x-amz-content-sha256":"STREAMING-AWS4-HMAC-SHA256-EVENTS"},e({...t,request:r})):e(t)},bS={step:"build",tags:["EVENT_STREAM","HEADER","CONTENT_TYPE","CONTENT_SHA256"],name:"eventStreamHeaderMiddleware",override:!0},T$=e=>({applyToStack:t=>{t.addRelativeTo(ES(e),_S),t.add(wS,bS)}});bn.eventStreamHandlingMiddleware=ES;bn.eventStreamHandlingMiddlewareOptions=_S;bn.eventStreamHeaderMiddleware=wS;bn.eventStreamHeaderMiddlewareOptions=bS;bn.getEventStreamPlugin=T$;bn.resolveEventStreamConfig=A$});var lo=x(hs=>{"use strict";c();var x$=oe();function R$(e){return e}var CS=e=>t=>async r=>{if(!x$.HttpRequest.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:o=""}=e.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let s=n.hostname;n.port!=null&&(s+=`:${n.port}`),n.headers.host=s}return t(r)},AS={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},I$=e=>({applyToStack:t=>{t.add(CS(e),AS)}});hs.getHostHeaderPlugin=I$;hs.hostHeaderMiddleware=CS;hs.hostHeaderMiddlewareOptions=AS;hs.resolveHostHeaderConfig=R$});var fo=x(fa=>{"use strict";c();var TS=()=>(e,t)=>async r=>{try{let n=await e(r),{clientName:o,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:u,overrideOutputFilterSensitiveLog:l}=a,m=u??t.inputFilterSensitiveLog,p=l??t.outputFilterSensitiveLog,{$metadata:g,...h}=n.output;return i?.info?.({clientName:o,commandName:s,input:m(r.input),output:p(h),metadata:g}),n}catch(n){let{clientName:o,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:u}=a,l=u??t.inputFilterSensitiveLog;throw i?.error?.({clientName:o,commandName:s,input:l(r.input),error:n,metadata:n.$metadata}),n}},xS={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},P$=e=>({applyToStack:t=>{t.add(TS(),xS)}});fa.getLoggerPlugin=P$;fa.loggerMiddleware=TS;fa.loggerMiddlewareOptions=xS});var RS={};rt(RS,{InvokeStore:()=>mf,InvokeStoreBase:()=>ys});var gs,df,ys,ff,pf,mf,IS=b(()=>{c();gs={REQUEST_ID:Symbol.for("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol.for("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol.for("_AWS_LAMBDA_TENANT_ID")},df=["true","1"].includes(process.env?.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA??"");df||(globalThis.awslambda=globalThis.awslambda||{});ys=class{static PROTECTED_KEYS=gs;isProtectedKey(t){return Object.values(gs).includes(t)}getRequestId(){return this.get(gs.REQUEST_ID)??"-"}getXRayTraceId(){return this.get(gs.X_RAY_TRACE_ID)}getTenantId(){return this.get(gs.TENANT_ID)}},ff=class extends ys{currentContext;getContext(){return this.currentContext}hasContext(){return this.currentContext!==void 0}get(t){return this.currentContext?.[t]}set(t,r){if(this.isProtectedKey(t))throw new Error(`Cannot modify protected Lambda context field: ${String(t)}`);this.currentContext=this.currentContext||{},this.currentContext[t]=r}run(t,r){return this.currentContext=t,r()}},pf=class e extends ys{als;static async create(){let t=new e,r=await import("node:async_hooks");return t.als=new r.AsyncLocalStorage,t}getContext(){return this.als.getStore()}hasContext(){return this.als.getStore()!==void 0}get(t){return this.als.getStore()?.[t]}set(t,r){if(this.isProtectedKey(t))throw new Error(`Cannot modify protected Lambda context field: ${String(t)}`);let n=this.als.getStore();if(!n)throw new Error("No context available");n[t]=r}run(t,r){return this.als.run(t,r)}};(function(e){let t=null;async function r(){return t||(t=(async()=>{let o="AWS_LAMBDA_MAX_CONCURRENCY"in process.env?await pf.create():new ff;return!df&&globalThis.awslambda?.InvokeStore?globalThis.awslambda.InvokeStore:(!df&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=o),o)})()),t}e.getInstanceAsync=r,e._testing=process.env.AWS_LAMBDA_BENCHMARK_MODE==="1"?{reset:()=>{t=null,globalThis.awslambda?.InvokeStore&&delete globalThis.awslambda.InvokeStore,globalThis.awslambda={InvokeStore:void 0}}}:void 0})(mf||(mf={}))});var PS=x(pa=>{"use strict";c();Object.defineProperty(pa,"__esModule",{value:!0});pa.recursionDetectionMiddleware=void 0;var O$=(IS(),W(RS)),N$=oe(),hf="X-Amzn-Trace-Id",D$="AWS_LAMBDA_FUNCTION_NAME",k$="_X_AMZN_TRACE_ID",M$=()=>e=>async t=>{let{request:r}=t;if(!N$.HttpRequest.isInstance(r))return e(t);let n=Object.keys(r.headers??{}).find(m=>m.toLowerCase()===hf.toLowerCase())??hf;if(r.headers.hasOwnProperty(n))return e(t);let o=process.env[D$],s=process.env[k$],u=(await O$.InvokeStore.getInstanceAsync())?.getXRayTraceId()??s,l=m=>typeof m=="string"&&m.length>0;return l(o)&&l(u)&&(r.headers[hf]=u),e({...t,request:r})};pa.recursionDetectionMiddleware=M$});var po=x(ma=>{"use strict";c();var gf=PS(),$$={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},B$=e=>({applyToStack:t=>{t.add(gf.recursionDetectionMiddleware(),$$)}});ma.getRecursionDetectionPlugin=B$;Object.keys(gf).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ma,e)&&Object.defineProperty(ma,e,{enumerable:!0,get:function(){return gf[e]}})})});var yf,L$,OS=b(()=>{c();yf=A(Tr()),L$=e=>e[yf.SMITHY_CONTEXT_KEY]||(e[yf.SMITHY_CONTEXT_KEY]={})});var ze=x(Sf=>{"use strict";c();var NS=Tr(),U$=e=>e[NS.SMITHY_CONTEXT_KEY]||(e[NS.SMITHY_CONTEXT_KEY]={}),F$=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};Sf.getSmithyContext=U$;Sf.normalizeProvider=F$});var DS,kS=b(()=>{c();DS=(e,t)=>{if(!t||t.length===0)return e;let r=[];for(let n of t)for(let o of e)o.schemeId.split("#")[1]===n&&r.push(o);for(let n of e)r.find(({schemeId:o})=>o===n.schemeId)||r.push(n);return r}});function H$(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}var MS,Ss,ha=b(()=>{c();MS=A(ze());kS();Ss=(e,t)=>(r,n)=>async o=>{let s=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,n,o.input)),i=e.authSchemePreference?await e.authSchemePreference():[],a=DS(s,i),u=H$(e.httpAuthSchemes),l=(0,MS.getSmithyContext)(n),m=[];for(let p of a){let g=u.get(p.schemeId);if(!g){m.push(`HttpAuthScheme \`${p.schemeId}\` was not enabled for this service.`);continue}let h=g.identityProvider(await t.identityProviderConfigProvider(e));if(!h){m.push(`HttpAuthScheme \`${p.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:_={},signingProperties:T={}}=p.propertiesExtractor?.(e,n)||{};p.identityProperties=Object.assign(p.identityProperties||{},_),p.signingProperties=Object.assign(p.signingProperties||{},T),l.selectedHttpAuthScheme={httpAuthOption:p,identity:await h(p.identityProperties),signer:g.signer};break}if(!l.selectedHttpAuthScheme)throw new Error(m.join(`
`));return r(o)}});var $S,vn,BS=b(()=>{c();ha();$S={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},vn=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Ss(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),$S)}})});var _f=x(mo=>{"use strict";c();var q$=oe(),LS=(e,t)=>(r,n)=>async o=>{let{response:s}=await r(o);try{let i=await t(s,e);return{response:s,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:s,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{i.message+=`
  `+a}catch{!n.logger||n.logger?.constructor?.name==="NoOpLogger"?console.warn(a):n.logger?.warn?.(a)}typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText);try{if(q$.HttpResponse.isInstance(s)){let{headers:u={}}=s,l=Object.entries(u);i.$metadata={httpStatusCode:s.statusCode,requestId:Ef(/^x-[\w-]+-request-?id$/,l),extendedRequestId:Ef(/^x-[\w-]+-id-2$/,l),cfId:Ef(/^x-[\w-]+-cf-id$/,l)}}}catch{}}throw i}},Ef=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1],US=(e,t)=>(r,n)=>async o=>{let s=e,i=n.endpointV2?.url&&s.urlParser?async()=>s.urlParser(n.endpointV2.url):s.endpoint;if(!i)throw new Error("No valid endpoint provider available.");let a=await t(o.input,{...e,endpoint:i});return r({...o,request:a})},FS={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},HS={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function j$(e,t,r){return{applyToStack:n=>{n.add(LS(e,r),FS),n.add(US(e,t),HS)}}}mo.deserializerMiddleware=LS;mo.deserializerMiddlewareOption=FS;mo.getSerdePlugin=j$;mo.serializerMiddleware=US;mo.serializerMiddlewareOption=HS});var qS,jS,G$,GS=b(()=>{c();qS=A(_f());ha();jS={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:qS.serializerMiddlewareOption.name},G$=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Ss(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),jS)}})});var zS=b(()=>{c();ha();BS();GS()});var VS,WS,z$,V$,wf,bf=b(()=>{c();VS=A(oe()),WS=A(ze()),z$=e=>t=>{throw t},V$=(e,t)=>{},wf=e=>(t,r)=>async n=>{if(!VS.HttpRequest.isInstance(n.request))return t(n);let s=(0,WS.getSmithyContext)(r).selectedHttpAuthScheme;if(!s)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:a,signer:u}=s,l=await t({...n,request:await u.sign(n.request,a,i)}).catch((u.errorHandler||z$)(i));return(u.successHandler||V$)(l.response,i),l}});var KS,Cn,YS=b(()=>{c();bf();KS={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},Cn=e=>({applyToStack:t=>{t.addRelativeTo(wf(e),KS)}})});var XS=b(()=>{c();bf();YS()});var Rr,QS=b(()=>{c();Rr=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t}});function JS(e,t,r,n,o){return async function*(i,a,...u){let l=a,m=i.startingToken??l[r],p=!0,g;for(;p;){if(l[r]=m,o&&(l[o]=l[o]??i.pageSize),i.client instanceof e)g=await W$(t,i.client,a,i.withCommand,...u);else throw new Error(`Invalid client, expected instance of ${e.name}`);yield g;let h=m;m=K$(g,n),p=!!(m&&(!i.stopOnSameToken||m!==h))}return void 0}}var W$,K$,ZS=b(()=>{c();W$=async(e,t,r,n=s=>s,...o)=>{let s=new e(r);return s=n(s)??s,await t.send(s,...o)};K$=(e,t)=>{let r=e,n=t.split(".");for(let o of n){if(!r||typeof r!="object")return;r=r[o]}return r}});var vf=x(eE=>{"use strict";c();var Y$=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";eE.isArrayBuffer=Y$});var Ae=x(Af=>{"use strict";c();var X$=vf(),Cf=z("buffer"),Q$=(e,t=0,r=e.byteLength-t)=>{if(!X$.isArrayBuffer(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Cf.Buffer.from(e,t,r)},J$=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Cf.Buffer.from(e,t):Cf.Buffer.from(e)};Af.fromArrayBuffer=Q$;Af.fromString=J$});var tE=x(ga=>{"use strict";c();Object.defineProperty(ga,"__esModule",{value:!0});ga.fromBase64=void 0;var Z$=Ae(),eB=/^[A-Za-z0-9+/]*={0,2}$/,tB=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!eB.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,Z$.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};ga.fromBase64=tB});var me=x(ya=>{"use strict";c();var rE=Ae(),nE=e=>{let t=rE.fromString(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},rB=e=>typeof e=="string"?nE(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),nB=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return rE.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength).toString("utf8")};ya.fromUtf8=nE;ya.toUint8Array=rB;ya.toUtf8=nB});var oE=x(Sa=>{"use strict";c();Object.defineProperty(Sa,"__esModule",{value:!0});Sa.toBase64=void 0;var oB=Ae(),sB=me(),iB=e=>{let t;if(typeof e=="string"?t=(0,sB.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,oB.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};Sa.toBase64=iB});var _s=x(Es=>{"use strict";c();var sE=tE(),iE=oE();Object.keys(sE).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Es,e)&&Object.defineProperty(Es,e,{enumerable:!0,get:function(){return sE[e]}})});Object.keys(iE).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Es,e)&&Object.defineProperty(Es,e,{enumerable:!0,get:function(){return iE[e]}})})});var xf=x(Ea=>{"use strict";c();Object.defineProperty(Ea,"__esModule",{value:!0});Ea.ChecksumStream=void 0;var aB=_s(),cB=z("stream"),Tf=class extends cB.Duplex{expectedChecksum;checksumSourceLocation;checksum;source;base64Encoder;constructor({expectedChecksum:t,checksum:r,source:n,checksumSourceLocation:o,base64Encoder:s}){if(super(),typeof n.pipe=="function")this.source=n;else throw new Error(`@smithy/util-stream: unsupported source type ${n?.constructor?.name??n} in ChecksumStream.`);this.base64Encoder=s??aB.toBase64,this.expectedChecksum=t,this.checksum=r,this.checksumSourceLocation=o,this.source.pipe(this)}_read(t){}_write(t,r,n){try{this.checksum.update(t),this.push(t)}catch(o){return n(o)}return n()}async _final(t){try{let r=await this.checksum.digest(),n=this.base64Encoder(r);if(this.expectedChecksum!==n)return t(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${n}" in response header "${this.checksumSourceLocation}".`))}catch(r){return t(r)}return this.push(null),t()}};Ea.ChecksumStream=Tf});var or=x(ho=>{"use strict";c();Object.defineProperty(ho,"__esModule",{value:!0});ho.isBlob=ho.isReadableStream=void 0;var uB=e=>typeof ReadableStream=="function"&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream);ho.isReadableStream=uB;var lB=e=>typeof Blob=="function"&&(e?.constructor?.name===Blob.name||e instanceof Blob);ho.isBlob=lB});var aE=x(_a=>{"use strict";c();Object.defineProperty(_a,"__esModule",{value:!0});_a.ChecksumStream=void 0;var dB=typeof ReadableStream=="function"?ReadableStream:function(){},Rf=class extends dB{};_a.ChecksumStream=Rf});var cE=x(wa=>{"use strict";c();Object.defineProperty(wa,"__esModule",{value:!0});wa.createChecksumStream=void 0;var fB=_s(),pB=or(),mB=aE(),hB=({expectedChecksum:e,checksum:t,source:r,checksumSourceLocation:n,base64Encoder:o})=>{if(!(0,pB.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let s=o??fB.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let i=new TransformStream({start(){},async transform(u,l){t.update(u),l.enqueue(u)},async flush(u){let l=await t.digest(),m=s(l);if(e!==m){let p=new Error(`Checksum mismatch: expected "${e}" but received "${m}" in response header "${n}".`);u.error(p)}else u.terminate()}});r.pipeThrough(i);let a=i.readable;return Object.setPrototypeOf(a,mB.ChecksumStream.prototype),a};wa.createChecksumStream=hB});var uE=x(If=>{"use strict";c();Object.defineProperty(If,"__esModule",{value:!0});If.createChecksumStream=EB;var gB=or(),yB=xf(),SB=cE();function EB(e){return typeof ReadableStream=="function"&&(0,gB.isReadableStream)(e.source)?(0,SB.createChecksumStream)(e):new yB.ChecksumStream(e)}});var Of=x(ba=>{"use strict";c();Object.defineProperty(ba,"__esModule",{value:!0});ba.ByteArrayCollector=void 0;var Pf=class{allocByteArray;byteLength=0;byteArrays=[];constructor(t){this.allocByteArray=t}push(t){this.byteArrays.push(t),this.byteLength+=t.byteLength}flush(){if(this.byteArrays.length===1){let n=this.byteArrays[0];return this.reset(),n}let t=this.allocByteArray(this.byteLength),r=0;for(let n=0;n<this.byteArrays.length;++n){let o=this.byteArrays[n];t.set(o,r),r+=o.byteLength}return this.reset(),t}reset(){this.byteArrays=[],this.byteLength=0}};ba.ByteArrayCollector=Pf});var pE=x(sr=>{"use strict";c();Object.defineProperty(sr,"__esModule",{value:!0});sr.createBufferedReadable=void 0;sr.createBufferedReadableStream=lE;sr.merge=dE;sr.flush=va;sr.sizeOf=go;sr.modeOf=fE;var _B=Of();function lE(e,t,r){let n=e.getReader(),o=!1,s=0,i=["",new _B.ByteArrayCollector(l=>new Uint8Array(l))],a=-1,u=async l=>{let{value:m,done:p}=await n.read(),g=m;if(p){if(a!==-1){let h=va(i,a);go(h)>0&&l.enqueue(h)}l.close()}else{let h=fE(g,!1);if(a!==h&&(a>=0&&l.enqueue(va(i,a)),a=h),a===-1){l.enqueue(g);return}let _=go(g);s+=_;let T=go(i[a]);if(_>=t&&T===0)l.enqueue(g);else{let I=dE(i,a,g);!o&&s>t*2&&(o=!0,r?.warn(`@smithy/util-stream - stream chunk size ${_} is below threshold of ${t}, automatically buffering.`)),I>=t?l.enqueue(va(i,a)):await u(l)}}};return new ReadableStream({pull:u})}sr.createBufferedReadable=lE;function dE(e,t,r){switch(t){case 0:return e[0]+=r,go(e[0]);case 1:case 2:return e[t].push(r),go(e[t])}}function va(e,t){switch(t){case 0:let r=e[0];return e[0]="",r;case 1:case 2:return e[t].flush()}throw new Error(`@smithy/util-stream - invalid index ${t} given to flush()`)}function go(e){return e?.byteLength??e?.length??0}function fE(e,t=!0){return t&&typeof Buffer<"u"&&e instanceof Buffer?2:e instanceof Uint8Array?1:typeof e=="string"?0:-1}});var hE=x(Nf=>{"use strict";c();Object.defineProperty(Nf,"__esModule",{value:!0});Nf.createBufferedReadable=vB;var wB=z("node:stream"),mE=Of(),ir=pE(),bB=or();function vB(e,t,r){if((0,bB.isReadableStream)(e))return(0,ir.createBufferedReadableStream)(e,t,r);let n=new wB.Readable({read(){}}),o=!1,s=0,i=["",new mE.ByteArrayCollector(u=>new Uint8Array(u)),new mE.ByteArrayCollector(u=>Buffer.from(new Uint8Array(u)))],a=-1;return e.on("data",u=>{let l=(0,ir.modeOf)(u,!0);if(a!==l&&(a>=0&&n.push((0,ir.flush)(i,a)),a=l),a===-1){n.push(u);return}let m=(0,ir.sizeOf)(u);s+=m;let p=(0,ir.sizeOf)(i[a]);if(m>=t&&p===0)n.push(u);else{let g=(0,ir.merge)(i,a,u);!o&&s>t*2&&(o=!0,r?.warn(`@smithy/util-stream - stream chunk size ${m} is below threshold of ${t}, automatically buffering.`)),g>=t&&n.push((0,ir.flush)(i,a))}}),e.on("end",()=>{if(a!==-1){let u=(0,ir.flush)(i,a);(0,ir.sizeOf)(u)>0&&n.push(u)}n.push(null)}),n}});var gE=x(Ca=>{"use strict";c();Object.defineProperty(Ca,"__esModule",{value:!0});Ca.getAwsChunkedEncodingStream=void 0;var CB=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:o,checksumLocationName:s,streamHasher:i}=t,a=r!==void 0&&n!==void 0&&o!==void 0&&s!==void 0&&i!==void 0,u=a?i(o,e):void 0,l=e.getReader();return new ReadableStream({async pull(m){let{value:p,done:g}=await l.read();if(g){if(m.enqueue(`0\r
`),a){let h=r(await u);m.enqueue(`${s}:${h}\r
`),m.enqueue(`\r
`)}m.close()}else m.enqueue(`${(n(p)||0).toString(16)}\r
${p}\r
`)}})};Ca.getAwsChunkedEncodingStream=CB});var yE=x(Df=>{"use strict";c();Object.defineProperty(Df,"__esModule",{value:!0});Df.getAwsChunkedEncodingStream=RB;var AB=z("node:stream"),TB=gE(),xB=or();function RB(e,t){let r=e,n=e;if((0,xB.isReadableStream)(n))return(0,TB.getAwsChunkedEncodingStream)(n,t);let{base64Encoder:o,bodyLengthChecker:s,checksumAlgorithmFn:i,checksumLocationName:a,streamHasher:u}=t,l=o!==void 0&&i!==void 0&&a!==void 0&&u!==void 0,m=l?u(i,r):void 0,p=new AB.Readable({read:()=>{}});return r.on("data",g=>{let h=s(g)||0;h!==0&&(p.push(`${h.toString(16)}\r
`),p.push(g),p.push(`\r
`))}),r.on("end",async()=>{if(p.push(`0\r
`),l){let g=o(await m);p.push(`${a}:${g}\r
`),p.push(`\r
`)}p.push(null)}),p}});var SE=x(kf=>{"use strict";c();Object.defineProperty(kf,"__esModule",{value:!0});kf.headStream=IB;async function IB(e,t){let r=0,n=[],o=e.getReader(),s=!1;for(;!s;){let{done:u,value:l}=await o.read();if(l&&(n.push(l),r+=l?.byteLength??0),r>=t)break;s=u}o.releaseLock();let i=new Uint8Array(Math.min(t,r)),a=0;for(let u of n){if(u.byteLength>i.byteLength-a){i.set(u.subarray(0,i.byteLength-a),a);break}else i.set(u,a);a+=u.length}return i}});var EE=x(Aa=>{"use strict";c();Object.defineProperty(Aa,"__esModule",{value:!0});Aa.headStream=void 0;var PB=z("stream"),OB=SE(),NB=or(),DB=(e,t)=>(0,NB.isReadableStream)(e)?(0,OB.headStream)(e,t):new Promise((r,n)=>{let o=new Mf;o.limit=t,e.pipe(o),e.on("error",s=>{o.end(),n(s)}),o.on("error",n),o.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.buffers));r(s)})});Aa.headStream=DB;var Mf=class extends PB.Writable{buffers=[];limit=1/0;bytesBuffered=0;_write(t,r,n){if(this.buffers.push(t),this.bytesBuffered+=t.byteLength??0,this.bytesBuffered>=this.limit){let o=this.bytesBuffered-this.limit,s=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=s.subarray(0,s.byteLength-o),this.emit("finish")}n()}}});var wE=x($f=>{"use strict";c();var _E=e=>encodeURIComponent(e).replace(/[!'()*]/g,kB),kB=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,MB=e=>e.split("/").map(_E).join("/");$f.escapeUri=_E;$f.escapeUriPath=MB});var vE=x(bE=>{"use strict";c();var Bf=wE();function $B(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=Bf.escapeUri(r),Array.isArray(n))for(let o=0,s=n.length;o<s;o++)t.push(`${r}=${Bf.escapeUri(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${Bf.escapeUri(n)}`),t.push(o)}}return t.join("&")}bE.buildQueryString=$B});var Ir=x(ws=>{"use strict";c();var xE=oe(),RE=vE(),Ta=z("http"),xa=z("https"),IE=z("stream"),Lf=z("http2"),BB=["ECONNRESET","EPIPE","ETIMEDOUT"],PE=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t},Ve={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},CE=1e3,LB=(e,t,r=0)=>{if(!r)return-1;let n=o=>{let s=Ve.setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${r} ms.`),{name:"TimeoutError"}))},r-o),i=a=>{a?.connecting?a.on("connect",()=>{Ve.clearTimeout(s)}):Ve.clearTimeout(s)};e.socket?i(e.socket):e.on("socket",i)};return r<2e3?(n(0),0):Ve.setTimeout(n.bind(null,CE),CE)},UB=(e,t,r=0,n,o)=>r?Ve.setTimeout(()=>{let s=`@smithy/node-http-handler - [${n?"ERROR":"WARN"}] a request has exceeded the configured ${r} ms requestTimeout.`;if(n){let i=Object.assign(new Error(s),{name:"TimeoutError",code:"ETIMEDOUT"});e.destroy(i),t(i)}else s+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",o?.warn?.(s)},r):-1,FB=3e3,HB=(e,{keepAlive:t,keepAliveMsecs:r},n=FB)=>{if(t!==!0)return-1;let o=()=>{e.socket?e.socket.setKeepAlive(t,r||0):e.on("socket",s=>{s.setKeepAlive(t,r||0)})};return n===0?(o(),0):Ve.setTimeout(o,n)},AE=3e3,qB=(e,t,r=0)=>{let n=o=>{let s=r-o,i=()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${r} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};e.socket?(e.socket.setTimeout(s,i),e.on("close",()=>e.socket?.removeListener("timeout",i))):e.setTimeout(s,i)};return 0<r&&r<6e3?(n(0),0):Ve.setTimeout(n.bind(null,r===0?0:AE),AE)},TE=6e3;async function OE(e,t,r=TE,n=!1){let o=t.headers??{},s=o.Expect||o.expect,i=-1,a=!0;!n&&s==="100-continue"&&(a=await Promise.race([new Promise(u=>{i=Number(Ve.setTimeout(()=>u(!0),Math.max(TE,r)))}),new Promise(u=>{e.on("continue",()=>{Ve.clearTimeout(i),u(!0)}),e.on("response",()=>{Ve.clearTimeout(i),u(!1)}),e.on("error",()=>{Ve.clearTimeout(i),u(!1)})})])),a&&jB(e,t.body)}function jB(e,t){if(t instanceof IE.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}let r=t;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}var GB=0,Uf=class e{config;configProvider;socketWarningTimestamp=0;externalAgent=!1;metadata={handlerProtocol:"http/1.1"};static create(t){return typeof t?.handle=="function"?t:new e(t)}static checkSocketUsage(t,r,n=console){let{sockets:o,requests:s,maxSockets:i}=t;if(typeof i!="number"||i===1/0||Date.now()-15e3<r)return r;if(o&&s)for(let u in o){let l=o[u]?.length??0,m=s[u]?.length??0;if(l>=i&&m>=2*i)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${l} and ${m} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}constructor(t){this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(this.resolveDefaultConfig(o))}).catch(n):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:o,socketAcquisitionWarningTimeout:s,httpAgent:i,httpsAgent:a,throwOnRequestTimeout:u}=t||{},l=!0,m=50;return{connectionTimeout:n,requestTimeout:r,socketTimeout:o,socketAcquisitionWarningTimeout:s,throwOnRequestTimeout:u,httpAgent:i instanceof Ta.Agent||typeof i?.destroy=="function"?(this.externalAgent=!0,i):new Ta.Agent({keepAlive:l,maxSockets:m,...i}),httpsAgent:a instanceof xa.Agent||typeof a?.destroy=="function"?(this.externalAgent=!0,a):new xa.Agent({keepAlive:l,maxSockets:m,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){return this.config||(this.config=await this.configProvider),new Promise((o,s)=>{let i=this.config,a,u=[],l=async K=>{await a,u.forEach(Ve.clearTimeout),o(K)},m=async K=>{await a,u.forEach(Ve.clearTimeout),s(K)};if(r?.aborted){let K=new Error("Request aborted");K.name="AbortError",m(K);return}let p=t.protocol==="https:",g=t.headers??{},h=(g.Expect??g.expect)==="100-continue",_=p?i.httpsAgent:i.httpAgent;h&&!this.externalAgent&&(_=new(p?xa.Agent:Ta.Agent)({keepAlive:!1,maxSockets:1/0})),u.push(Ve.setTimeout(()=>{this.socketWarningTimestamp=e.checkSocketUsage(_,this.socketWarningTimestamp,i.logger)},i.socketAcquisitionWarningTimeout??(i.requestTimeout??2e3)+(i.connectionTimeout??1e3)));let T=RE.buildQueryString(t.query||{}),I;if(t.username!=null||t.password!=null){let K=t.username??"",Z=t.password??"";I=`${K}:${Z}`}let P=t.path;T&&(P+=`?${T}`),t.fragment&&(P+=`#${t.fragment}`);let D=t.hostname??"";D[0]==="["&&D.endsWith("]")?D=t.hostname.slice(1,-1):D=t.hostname;let M={headers:t.headers,host:D,method:t.method,path:P,port:t.port,agent:_,auth:I},j=(p?xa.request:Ta.request)(M,K=>{let Z=new xE.HttpResponse({statusCode:K.statusCode||-1,reason:K.statusMessage,headers:PE(K.headers),body:K});l({response:Z})});if(j.on("error",K=>{BB.includes(K.code)?m(Object.assign(K,{name:"TimeoutError"})):m(K)}),r){let K=()=>{j.destroy();let Z=new Error("Request aborted");Z.name="AbortError",m(Z)};if(typeof r.addEventListener=="function"){let Z=r;Z.addEventListener("abort",K,{once:!0}),j.once("close",()=>Z.removeEventListener("abort",K))}else r.onabort=K}let Q=n??i.requestTimeout;u.push(LB(j,m,i.connectionTimeout)),u.push(UB(j,m,Q,i.throwOnRequestTimeout,i.logger??console)),u.push(qB(j,m,i.socketTimeout));let Ee=M.agent;typeof Ee=="object"&&"keepAlive"in Ee&&u.push(HB(j,{keepAlive:Ee.keepAlive,keepAliveMsecs:Ee.keepAliveMsecs})),a=OE(j,t,Q,this.externalAgent).catch(K=>(u.forEach(Ve.clearTimeout),s(K)))})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}},Ff=class{sessions=[];constructor(t){this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}},Hf=class{constructor(t){if(this.config=t,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}config;sessionCache=new Map;lease(t,r){let n=this.getUrlString(t),o=this.sessionCache.get(n);if(o){let u=o.poll();if(u&&!this.config.disableConcurrency)return u}let s=Lf.connect(n);this.config.maxConcurrency&&s.settings({maxConcurrentStreams:this.config.maxConcurrency},u=>{if(u)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+t.destination.toString())}),s.unref();let i=()=>{s.destroy(),this.deleteSession(n,s)};s.on("goaway",i),s.on("error",i),s.on("frameError",i),s.on("close",()=>this.deleteSession(n,s)),r.requestTimeout&&s.setTimeout(r.requestTimeout,i);let a=this.sessionCache.get(n)||new Ff;return a.offerLast(s),this.sessionCache.set(n,a),s}deleteSession(t,r){let n=this.sessionCache.get(t);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(t,n))}release(t,r){let n=this.getUrlString(t);this.sessionCache.get(n)?.offerLast(r)}destroy(){for(let[t,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(t)}}setMaxConcurrentStreams(t){if(t&&t<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=t}setDisableConcurrentStreams(t){this.config.disableConcurrency=t}getUrlString(t){return t.destination.toString()}},qf=class e{config;configProvider;metadata={handlerProtocol:"h2"};connectionManager=new Hf({});static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(o||{})}).catch(n):r(t||{})})}destroy(){this.connectionManager.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:o,disableConcurrentStreams:s}=this.config,i=n??o;return new Promise((a,u)=>{let l=!1,m,p=async le=>{await m,a(le)},g=async le=>{await m,u(le)};if(r?.aborted){l=!0;let le=new Error("Request aborted");le.name="AbortError",g(le);return}let{hostname:h,method:_,port:T,protocol:I,query:P}=t,D="";if(t.username!=null||t.password!=null){let le=t.username??"",Ie=t.password??"";D=`${le}:${Ie}@`}let M=`${I}//${D}${h}${T?`:${T}`:""}`,L={destination:new URL(M)},j=this.connectionManager.lease(L,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:s||!1}),Q=le=>{s&&this.destroySession(j),l=!0,g(le)},Ee=RE.buildQueryString(P||{}),K=t.path;Ee&&(K+=`?${Ee}`),t.fragment&&(K+=`#${t.fragment}`);let Z=j.request({...t.headers,[Lf.constants.HTTP2_HEADER_PATH]:K,[Lf.constants.HTTP2_HEADER_METHOD]:_});if(j.ref(),Z.on("response",le=>{let Ie=new xE.HttpResponse({statusCode:le[":status"]||-1,headers:PE(le),body:Z});l=!0,p({response:Ie}),s&&(j.close(),this.connectionManager.deleteSession(M,j))}),i&&Z.setTimeout(i,()=>{Z.close();let le=new Error(`Stream timed out because of no activity for ${i} ms`);le.name="TimeoutError",Q(le)}),r){let le=()=>{Z.close();let Ie=new Error("Request aborted");Ie.name="AbortError",Q(Ie)};if(typeof r.addEventListener=="function"){let Ie=r;Ie.addEventListener("abort",le,{once:!0}),Z.once("close",()=>Ie.removeEventListener("abort",le))}else r.onabort=le}Z.on("frameError",(le,Ie,tt)=>{Q(new Error(`Frame type id ${le} in stream id ${tt} has failed with code ${Ie}.`))}),Z.on("error",Q),Z.on("aborted",()=>{Q(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${Z.rstCode}.`))}),Z.on("close",()=>{j.unref(),s&&j.destroy(),l||Q(new Error("Unexpected error: http2 request did not get a response"))}),m=OE(Z,t,i)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(t){t.destroyed||t.destroy()}},jf=class extends IE.Writable{bufferedBytes=[];_write(t,r,n){this.bufferedBytes.push(t),n()}},zB=e=>VB(e)?WB(e):new Promise((t,r)=>{let n=new jf;e.pipe(n),e.on("error",o=>{n.end(),r(o)}),n.on("error",r),n.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.bufferedBytes));t(o)})}),VB=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;async function WB(e){let t=[],r=e.getReader(),n=!1,o=0;for(;!n;){let{done:a,value:u}=await r.read();u&&(t.push(u),o+=u.length),n=a}let s=new Uint8Array(o),i=0;for(let a of t)s.set(a,i),i+=a.length;return s}ws.DEFAULT_REQUEST_TIMEOUT=GB;ws.NodeHttp2Handler=qf;ws.NodeHttpHandler=Uf;ws.streamCollector=zB});var DE=x(Gf=>{"use strict";c();var NE=e=>encodeURIComponent(e).replace(/[!'()*]/g,KB),KB=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,YB=e=>e.split("/").map(NE).join("/");Gf.escapeUri=NE;Gf.escapeUriPath=YB});var ME=x(kE=>{"use strict";c();var zf=DE();function XB(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=zf.escapeUri(r),Array.isArray(n))for(let o=0,s=n.length;o<s;o++)t.push(`${r}=${zf.escapeUri(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${zf.escapeUri(n)}`),t.push(o)}}return t.join("&")}kE.buildQueryString=XB});var $E=x(Ra=>{"use strict";c();Object.defineProperty(Ra,"__esModule",{value:!0});Ra.fromBase64=void 0;var QB=Ae(),JB=/^[A-Za-z0-9+/]*={0,2}$/,ZB=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!JB.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,QB.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};Ra.fromBase64=ZB});var BE=x(Ia=>{"use strict";c();Object.defineProperty(Ia,"__esModule",{value:!0});Ia.toBase64=void 0;var eL=Ae(),tL=me(),rL=e=>{let t;if(typeof e=="string"?t=(0,tL.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,eL.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};Ia.toBase64=rL});var FE=x(bs=>{"use strict";c();var LE=$E(),UE=BE();Object.keys(LE).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(bs,e)&&Object.defineProperty(bs,e,{enumerable:!0,get:function(){return LE[e]}})});Object.keys(UE).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(bs,e)&&Object.defineProperty(bs,e,{enumerable:!0,get:function(){return UE[e]}})})});var Wf=x(Oa=>{"use strict";c();var HE=oe(),nL=ME(),oL=FE();function qE(e,t){return new Request(e,t)}function sL(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{let n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",r(n)},e)})}var Pa={supported:void 0},Vf=class e{config;configProvider;static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),Pa.supported===void 0&&(Pa.supported=typeof Request<"u"&&"keepalive"in qE("https://[::1]"))}destroy(){}async handle(t,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);let o=n??this.config.requestTimeout,s=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let D=new Error("Request aborted");return D.name="AbortError",Promise.reject(D)}let a=t.path,u=nL.buildQueryString(t.query||{});u&&(a+=`?${u}`),t.fragment&&(a+=`#${t.fragment}`);let l="";if(t.username!=null||t.password!=null){let D=t.username??"",M=t.password??"";l=`${D}:${M}@`}let{port:m,method:p}=t,g=`${t.protocol}//${l}${t.hostname}${m?`:${m}`:""}${a}`,h=p==="GET"||p==="HEAD"?void 0:t.body,_={body:h,headers:new Headers(t.headers),method:p,credentials:i};this.config?.cache&&(_.cache=this.config.cache),h&&(_.duplex="half"),typeof AbortController<"u"&&(_.signal=r),Pa.supported&&(_.keepalive=s),typeof this.config.requestInit=="function"&&Object.assign(_,this.config.requestInit(t));let T=()=>{},I=qE(g,_),P=[fetch(I).then(D=>{let M=D.headers,L={};for(let Q of M.entries())L[Q[0]]=Q[1];return D.body!=null?{response:new HE.HttpResponse({headers:L,reason:D.statusText,statusCode:D.status,body:D.body})}:D.blob().then(Q=>({response:new HE.HttpResponse({headers:L,reason:D.statusText,statusCode:D.status,body:Q})}))}),sL(o)];return r&&P.push(new Promise((D,M)=>{let L=()=>{let j=new Error("Request aborted");j.name="AbortError",M(j)};if(typeof r.addEventListener=="function"){let j=r;j.addEventListener("abort",L,{once:!0}),T=()=>j.removeEventListener("abort",L)}else r.onabort=L})),Promise.race(P).finally(T)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}},iL=async e=>typeof Blob=="function"&&e instanceof Blob||e.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await e.arrayBuffer()):aL(e):cL(e);async function aL(e){let t=await uL(e),r=oL.fromBase64(t);return new Uint8Array(r)}async function cL(e){let t=[],r=e.getReader(),n=!1,o=0;for(;!n;){let{done:a,value:u}=await r.read();u&&(t.push(u),o+=u.length),n=a}let s=new Uint8Array(o),i=0;for(let a of t)s.set(a,i),i+=a.length;return s}function uL(e){return new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let o=n.result??"",s=o.indexOf(","),i=s>-1?s+1:o.length;t(o.substring(i))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)})}Oa.FetchHttpHandler=Vf;Oa.keepAliveSupport=Pa;Oa.streamCollector=iL});var vs=x(Yf=>{"use strict";c();var jE={},Kf={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),jE[e]=t,Kf[t]=e}function lL(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in Kf)t[r/2]=Kf[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function dL(e){let t="";for(let r=0;r<e.byteLength;r++)t+=jE[e[r]];return t}Yf.fromHex=lL;Yf.toHex=dL});var WE=x(Na=>{"use strict";c();Object.defineProperty(Na,"__esModule",{value:!0});Na.sdkStreamMixin=void 0;var fL=Wf(),pL=_s(),mL=vs(),hL=me(),GE=or(),zE="The stream has already been transformed.",gL=e=>{if(!VE(e)&&!(0,GE.isReadableStream)(e)){let o=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let t=!1,r=async()=>{if(t)throw new Error(zE);return t=!0,await(0,fL.streamCollector)(e)},n=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async o=>{let s=await r();if(o==="base64")return(0,pL.toBase64)(s);if(o==="hex")return(0,mL.toHex)(s);if(o===void 0||o==="utf8"||o==="utf-8")return(0,hL.toUtf8)(s);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(s);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(zE);if(t=!0,VE(e))return n(e);if((0,GE.isReadableStream)(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})};Na.sdkStreamMixin=gL;var VE=e=>typeof Blob=="function"&&e instanceof Blob});var YE=x(Da=>{"use strict";c();Object.defineProperty(Da,"__esModule",{value:!0});Da.sdkStreamMixin=void 0;var yL=Ir(),SL=Ae(),Xf=z("stream"),EL=WE(),KE="The stream has already been transformed.",_L=e=>{if(!(e instanceof Xf.Readable))try{return(0,EL.sdkStreamMixin)(e)}catch{let o=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${o}`)}let t=!1,r=async()=>{if(t)throw new Error(KE);return t=!0,await(0,yL.streamCollector)(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async n=>{let o=await r();return n===void 0||Buffer.isEncoding(n)?(0,SL.fromArrayBuffer)(o.buffer,o.byteOffset,o.byteLength).toString(n):new TextDecoder(n).decode(o)},transformToWebStream:()=>{if(t)throw new Error(KE);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof Xf.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return t=!0,Xf.Readable.toWeb(e)}})};Da.sdkStreamMixin=_L});var XE=x(Qf=>{"use strict";c();Object.defineProperty(Qf,"__esModule",{value:!0});Qf.splitStream=wL;async function wL(e){return typeof e.stream=="function"&&(e=e.stream()),e.tee()}});var ZE=x(Jf=>{"use strict";c();Object.defineProperty(Jf,"__esModule",{value:!0});Jf.splitStream=vL;var QE=z("stream"),bL=XE(),JE=or();async function vL(e){if((0,JE.isReadableStream)(e)||(0,JE.isBlob)(e))return(0,bL.splitStream)(e);let t=new QE.PassThrough,r=new QE.PassThrough;return e.pipe(t),e.pipe(r),[t,r]}});var ka=x(Te=>{"use strict";c();var e_=_s(),t_=me(),r_=xf(),n_=uE(),o_=hE(),s_=yE(),i_=EE(),a_=YE(),c_=ZE(),u_=or(),Zf=class e extends Uint8Array{static fromString(t,r="utf-8"){if(typeof t=="string")return r==="base64"?e.mutate(e_.fromBase64(t)):e.mutate(t_.fromUtf8(t));throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return t==="base64"?e_.toBase64(this):t_.toUtf8(this)}};Object.defineProperty(Te,"isBlob",{enumerable:!0,get:function(){return u_.isBlob}});Object.defineProperty(Te,"isReadableStream",{enumerable:!0,get:function(){return u_.isReadableStream}});Te.Uint8ArrayBlobAdapter=Zf;Object.keys(r_).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Te,e)&&Object.defineProperty(Te,e,{enumerable:!0,get:function(){return r_[e]}})});Object.keys(n_).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Te,e)&&Object.defineProperty(Te,e,{enumerable:!0,get:function(){return n_[e]}})});Object.keys(o_).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Te,e)&&Object.defineProperty(Te,e,{enumerable:!0,get:function(){return o_[e]}})});Object.keys(s_).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Te,e)&&Object.defineProperty(Te,e,{enumerable:!0,get:function(){return s_[e]}})});Object.keys(i_).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Te,e)&&Object.defineProperty(Te,e,{enumerable:!0,get:function(){return i_[e]}})});Object.keys(a_).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Te,e)&&Object.defineProperty(Te,e,{enumerable:!0,get:function(){return a_[e]}})});Object.keys(c_).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Te,e)&&Object.defineProperty(Te,e,{enumerable:!0,get:function(){return c_[e]}})})});var Ma,pt,$a=b(()=>{c();Ma=A(ka()),pt=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return Ma.Uint8ArrayBlobAdapter.mutate(e);if(!e)return Ma.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=t.streamCollector(e);return Ma.Uint8ArrayBlobAdapter.mutate(await r)}});function Bt(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var Ba=b(()=>{c()});var Ct,ep=b(()=>{c();Ct=e=>typeof e=="function"?e():e});var Cs,La=b(()=>{c();Cs=(e,t,r,n,o)=>({name:t,namespace:e,traits:r,input:n,output:o})});var l_,d_,f_,tp,p_=b(()=>{c();l_=A(oe()),d_=A(ze());La();f_=e=>(t,r)=>async n=>{let{response:o}=await t(n),{operationSchema:s}=(0,d_.getSmithyContext)(r),[,i,a,u,l,m]=s??[];try{let p=await e.protocol.deserializeResponse(Cs(i,a,u,l,m),{...e,...r},o);return{response:o,output:p}}catch(p){if(Object.defineProperty(p,"$response",{value:o,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in p)){let g="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{p.message+=`
  `+g}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(g):r.logger?.warn?.(g)}typeof p.$responseBodyText<"u"&&p.$response&&(p.$response.body=p.$responseBodyText);try{if(l_.HttpResponse.isInstance(o)){let{headers:h={}}=o,_=Object.entries(h);p.$metadata={httpStatusCode:o.statusCode,requestId:tp(/^x-[\w-]+-request-?id$/,_),extendedRequestId:tp(/^x-[\w-]+-id-2$/,_),cfId:tp(/^x-[\w-]+-cf-id$/,_)}}}catch{}}throw p}},tp=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1]});var m_,h_,g_=b(()=>{c();m_=A(ze());La();h_=e=>(t,r)=>async n=>{let{operationSchema:o}=(0,m_.getSmithyContext)(r),[,s,i,a,u,l]=o??[],m=r.endpointV2?.url&&e.urlParser?async()=>e.urlParser(r.endpointV2.url):e.endpoint,p=await e.protocol.serializeRequest(Cs(s,i,a,u,l),n.input,{...e,...r,endpoint:m});return t({...n,request:p})}});function An(e){return{applyToStack:t=>{t.add(h_(e),S_),t.add(f_(e),y_),e.protocol.setSerdeContext(e)}}}var y_,S_,E_=b(()=>{c();p_();g_();y_={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},S_={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var _e,Pr=b(()=>{c();_e=class{name;namespace;traits;static assign(t,r){return Object.assign(t,r)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var Ua,CL,__=b(()=>{c();Pr();Ua=class e extends _e{static symbol=Symbol.for("@smithy/lis");name;traits;valueSchema;symbol=e.symbol},CL=(e,t,r,n)=>_e.assign(new Ua,{name:t,namespace:e,traits:r,valueSchema:n})});var Fa,AL,w_=b(()=>{c();Pr();Fa=class e extends _e{static symbol=Symbol.for("@smithy/map");name;traits;keySchema;valueSchema;symbol=e.symbol},AL=(e,t,r,n,o)=>_e.assign(new Fa,{name:t,namespace:e,traits:r,keySchema:n,valueSchema:o})});var Ha,TL,b_=b(()=>{c();Pr();Ha=class e extends _e{static symbol=Symbol.for("@smithy/ope");name;traits;input;output;symbol=e.symbol},TL=(e,t,r,n,o)=>_e.assign(new Ha,{name:t,namespace:e,traits:r,input:n,output:o})});var yo,xL,rp=b(()=>{c();Pr();yo=class e extends _e{static symbol=Symbol.for("@smithy/str");name;traits;memberNames;memberList;symbol=e.symbol},xL=(e,t,r,n,o)=>_e.assign(new yo,{name:t,namespace:e,traits:r,memberNames:n,memberList:o})});var qa,RL,v_=b(()=>{c();Pr();rp();qa=class e extends yo{static symbol=Symbol.for("@smithy/err");ctor;symbol=e.symbol},RL=(e,t,r,n,o,s)=>_e.assign(new qa,{name:t,namespace:e,traits:r,memberNames:n,memberList:o,ctor:null})});function Lt(e){if(typeof e=="object")return e;e=e|0;let t={},r=0;for(let n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(e>>r++&1)===1&&(t[n]=1);return t}var np=b(()=>{c()});function As(e,t){if(e instanceof $)return Object.assign(e,{memberName:t,_isMemberSchema:!0});let r=$;return new r(e,t)}var $,op,C_,A_=b(()=>{c();ep();np();$=class e{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=e.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(t,r){this.ref=t,this.memberName=r;let n=[],o=t,s=t;for(this._isMemberSchema=!1;op(o);)n.push(o[1]),o=o[0],s=Ct(o),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let i=n.length-1;i>=0;--i){let a=n[i];Object.assign(this.memberTraits,Lt(a))}}else this.memberTraits=0;if(s instanceof e){let i=this.memberTraits;Object.assign(this,s),this.memberTraits=Object.assign({},i,s.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??s.memberName;return}if(this.schema=Ct(s),C_(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(s),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}static of(t){let r=Ct(t);if(r instanceof e)return r;if(op(r)){let[n,o]=r;if(n instanceof e)return Object.assign(n.getMergedTraits(),Lt(o)),n;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(t,null,2)}.`)}return new e(r)}getSchema(){let t=this.schema;return t[0]===0?t[4]:t}getName(t=!1){let{name:r}=this;return!t&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let t=this.getSchema();return typeof t=="number"?t>=64&&t<128:t[0]===1}isMapSchema(){let t=this.getSchema();return typeof t=="number"?t>=128&&t<=255:t[0]===2}isStructSchema(){let r=this.getSchema()[0];return r===3||r===-3||r===4}isUnionSchema(){return this.getSchema()[0]===4}isBlobSchema(){let t=this.getSchema();return t===21||t===42}isTimestampSchema(){let t=this.getSchema();return typeof t=="number"&&t>=4&&t<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:t}=this.getMergedTraits();return!!t||this.getSchema()===42}isIdempotencyToken(){let t=s=>(s&4)===4||!!s?.idempotencyToken,{normalizedTraits:r,traits:n,memberTraits:o}=this;return t(r)||t(n)||t(o)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return Lt(this.memberTraits)}getOwnTraits(){return Lt(this.traits)}getKeySchema(){let[t,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!t&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let n=this.getSchema(),o=t?15:n[4]??0;return As([o,0],"key")}getValueSchema(){let t=this.getSchema(),[r,n,o]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],s=typeof t=="number"?63&t:t&&typeof t=="object"&&(n||o)?t[3+t[0]]:r?15:void 0;if(s!=null)return As([s,0],n?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(t){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(t)){let n=r[4].indexOf(t),o=r[5][n];return As(op(o)?o:[o,0],t)}if(this.isDocumentSchema())return As([15,0],t);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${t}.`)}getMemberSchemas(){let t={};try{for(let[r,n]of this.structIterator())t[r]=n}catch{}return t}getEventStreamMember(){if(this.isStructSchema()){for(let[t,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return t}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let t=this.getSchema();for(let r=0;r<t[4].length;++r)yield[t[4][r],As([t[5][r],0],t[4][r])]}};op=e=>Array.isArray(e)&&e.length===2,C_=e=>Array.isArray(e)&&e.length>=5});var Ts,IL,PL,T_=b(()=>{c();Pr();Ts=class e extends _e{static symbol=Symbol.for("@smithy/sim");name;schemaRef;traits;symbol=e.symbol},IL=(e,t,r,n)=>_e.assign(new Ts,{name:t,namespace:e,traits:n,schemaRef:r}),PL=(e,t,r,n)=>_e.assign(new Ts,{name:t,namespace:e,traits:r,schemaRef:n})});var OL,x_=b(()=>{c();OL={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var F,R_=b(()=>{c();F=class e{namespace;schemas;exceptions;static registries=new Map;constructor(t,r=new Map,n=new Map){this.namespace=t,this.schemas=r,this.exceptions=n}static for(t){return e.registries.has(t)||e.registries.set(t,new e(t)),e.registries.get(t)}register(t,r){let n=this.normalizeShapeId(t);e.for(n.split("#")[0]).schemas.set(n,r)}getSchema(t){let r=this.normalizeShapeId(t);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(t,r){let n=t,o=e.for(n[1]);o.schemas.set(n[1]+"#"+n[2],n),o.exceptions.set(n,r)}getErrorCtor(t){let r=t;return e.for(r[1]).exceptions.get(r)}getBaseException(){for(let t of this.exceptions.keys())if(Array.isArray(t)){let[,r,n]=t,o=r+"#"+n;if(o.startsWith("smithy.ts.sdk.synthetic.")&&o.endsWith("ServiceException"))return t}}find(t){return[...this.schemas.values()].find(t)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(t){return t.includes("#")?t:this.namespace+"#"+t}}});var ja={};rt(ja,{ErrorSchema:()=>qa,ListSchema:()=>Ua,MapSchema:()=>Fa,NormalizedSchema:()=>$,OperationSchema:()=>Ha,SCHEMA:()=>OL,Schema:()=>_e,SimpleSchema:()=>Ts,StructureSchema:()=>yo,TypeRegistry:()=>F,deref:()=>Ct,deserializerMiddlewareOption:()=>y_,error:()=>RL,getSchemaSerdePlugin:()=>An,isStaticSchema:()=>C_,list:()=>CL,map:()=>AL,op:()=>TL,operation:()=>Cs,serializerMiddlewareOption:()=>S_,sim:()=>IL,simAdapter:()=>PL,struct:()=>xL,translateTraits:()=>Lt});var ne=b(()=>{c();ep();E_();__();w_();b_();La();v_();A_();Pr();T_();rp();x_();np();R_()});var NL,I_=b(()=>{c();NL=(e,t,r=n=>n)=>e});var DL,kL,xs,ML,Ga,Rs,$L,sp,ip,ap,cp,BL,LL,P_,UL,FL,Va,HL,up,qL,So,lp,jL,GL,zL,O_,N_,VL,WL,Tn,dp,za,Is,fp=b(()=>{c();DL=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},kL=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&Is.warn(za(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&Is.warn(za(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},xs=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Is.warn(za(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},ML=Math.ceil(34028234663852886e22),Ga=e=>{let t=xs(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>ML)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},Rs=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},$L=Rs,sp=e=>cp(e,32),ip=e=>cp(e,16),ap=e=>cp(e,8),cp=(e,t)=>{let r=Rs(e);if(r!==void 0&&BL(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},BL=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},LL=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},P_=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},UL=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return Is.warn(za(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},FL=e=>{if(e==null)return;let t=P_(e),r=Object.entries(t).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return t},Va=e=>xs(typeof e=="string"?So(e):e),HL=Va,up=e=>Ga(typeof e=="string"?So(e):e),qL=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,So=e=>{let t=e.match(qL);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},lp=e=>typeof e=="string"?O_(e):xs(e),jL=lp,GL=lp,zL=e=>typeof e=="string"?O_(e):Ga(e),O_=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},N_=e=>Rs(typeof e=="string"?So(e):e),VL=N_,WL=e=>sp(typeof e=="string"?So(e):e),Tn=e=>ip(typeof e=="string"?So(e):e),dp=e=>ap(typeof e=="string"?So(e):e),za=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),Is={warn:console.warn}});function Os(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),o=e.getUTCDate(),s=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),u=o<10?`0${o}`:`${o}`,l=s<10?`0${s}`:`${s}`,m=i<10?`0${i}`:`${i}`,p=a<10?`0${a}`:`${a}`;return`${KL[n]}, ${u} ${mp[r]} ${t} ${l}:${m}:${p} GMT`}var KL,mp,YL,XL,QL,hp,JL,ZL,eU,gp,yp,Ps,tU,rU,nU,pp,oU,sU,iU,Ut,aU,cU,Eo,D_=b(()=>{c();fp();KL=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],mp=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];YL=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),XL=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=YL.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,u,l]=t,m=Tn(Eo(n)),p=Ut(o,"month",1,12),g=Ut(s,"day",1,31);return Ps(m,p,g,{hours:i,minutes:a,seconds:u,fractionalMilliseconds:l})},QL=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),hp=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=QL.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,u,l,m]=t,p=Tn(Eo(n)),g=Ut(o,"month",1,12),h=Ut(s,"day",1,31),_=Ps(p,g,h,{hours:i,minutes:a,seconds:u,fractionalMilliseconds:l});return m.toUpperCase()!="Z"&&_.setTime(_.getTime()-cU(m)),_},JL=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),ZL=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),eU=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),gp=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=JL.exec(e);if(t){let[r,n,o,s,i,a,u,l]=t;return Ps(Tn(Eo(s)),pp(o),Ut(n,"day",1,31),{hours:i,minutes:a,seconds:u,fractionalMilliseconds:l})}if(t=ZL.exec(e),t){let[r,n,o,s,i,a,u,l]=t;return nU(Ps(tU(s),pp(o),Ut(n,"day",1,31),{hours:i,minutes:a,seconds:u,fractionalMilliseconds:l}))}if(t=eU.exec(e),t){let[r,n,o,s,i,a,u,l]=t;return Ps(Tn(Eo(l)),pp(n),Ut(o.trimLeft(),"day",1,31),{hours:s,minutes:i,seconds:a,fractionalMilliseconds:u})}throw new TypeError("Invalid RFC-7231 date-time value")},yp=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=Va(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},Ps=(e,t,r,n)=>{let o=t-1;return sU(e,o,r),new Date(Date.UTC(e,o,r,Ut(n.hours,"hour",0,23),Ut(n.minutes,"minute",0,59),Ut(n.seconds,"seconds",0,60),aU(n.fractionalMilliseconds)))},tU=e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+Tn(Eo(e));return r<t?r+100:r},rU=50*365*24*60*60*1e3,nU=e=>e.getTime()-new Date().getTime()>rU?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,pp=e=>{let t=mp.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},oU=[31,28,31,30,31,30,31,31,30,31,30,31],sU=(e,t,r)=>{let n=oU[t];if(t===1&&iU(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${mp[t]} in ${e}: ${r}`)},iU=e=>e%4===0&&(e%100!==0||e%400===0),Ut=(e,t,r,n)=>{let o=dp(Eo(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},aU=e=>e==null?0:up("0."+e)*1e3,cU=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),o=Number(e.substring(4,6));return r*(n*60+o)*60*1e3},Eo=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)}});var xn={};rt(xn,{__addDisposableResource:()=>ow,__assign:()=>Wa,__asyncDelegator:()=>X_,__asyncGenerator:()=>Y_,__asyncValues:()=>Q_,__await:()=>_o,__awaiter:()=>j_,__classPrivateFieldGet:()=>tw,__classPrivateFieldIn:()=>nw,__classPrivateFieldSet:()=>rw,__createBinding:()=>Ya,__decorate:()=>$_,__disposeResources:()=>sw,__esDecorate:()=>L_,__exportStar:()=>z_,__extends:()=>k_,__generator:()=>G_,__importDefault:()=>ew,__importStar:()=>Z_,__makeTemplateObject:()=>J_,__metadata:()=>q_,__param:()=>B_,__propKey:()=>F_,__read:()=>_p,__rest:()=>M_,__rewriteRelativeImportExtension:()=>iw,__runInitializers:()=>U_,__setFunctionName:()=>H_,__spread:()=>V_,__spreadArray:()=>K_,__spreadArrays:()=>W_,__values:()=>Ka,default:()=>dU});function k_(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Sp(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function M_(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function $_(e,t,r,n){var o=arguments.length,s=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function B_(e,t){return function(r,n){t(r,n,e)}}function L_(e,t,r,n,o,s){function i(P){if(P!==void 0&&typeof P!="function")throw new TypeError("Function expected");return P}for(var a=n.kind,u=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?n.static?e:e.prototype:null,m=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),p,g=!1,h=r.length-1;h>=0;h--){var _={};for(var T in n)_[T]=T==="access"?{}:n[T];for(var T in n.access)_.access[T]=n.access[T];_.addInitializer=function(P){if(g)throw new TypeError("Cannot add initializers after decoration has completed");s.push(i(P||null))};var I=(0,r[h])(a==="accessor"?{get:m.get,set:m.set}:m[u],_);if(a==="accessor"){if(I===void 0)continue;if(I===null||typeof I!="object")throw new TypeError("Object expected");(p=i(I.get))&&(m.get=p),(p=i(I.set))&&(m.set=p),(p=i(I.init))&&o.unshift(p)}else(p=i(I))&&(a==="field"?o.unshift(p):m[u]=p)}l&&Object.defineProperty(l,n.name,m),g=!0}function U_(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0}function F_(e){return typeof e=="symbol"?e:"".concat(e)}function H_(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function q_(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function j_(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(m){try{l(n.next(m))}catch(p){i(p)}}function u(m){try{l(n.throw(m))}catch(p){i(p)}}function l(m){m.done?s(m.value):o(m.value).then(a,u)}l((n=n.apply(e,t||[])).next())})}function G_(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(l){return function(m){return u([l,m])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(r=0)),r;)try{if(n=1,o&&(s=l[0]&2?o.return:l[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,l[1])).done)return s;switch(o=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,o=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(m){l=[6,m],o=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function z_(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Ya(t,e,r)}function Ka(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _p(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s}function V_(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(_p(arguments[t]));return e}function W_(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}function K_(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,s;n<o;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function _o(e){return this instanceof _o?(this.v=e,this):new _o(e)}function Y_(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),o[Symbol.asyncIterator]=function(){return this},o;function i(h){return function(_){return Promise.resolve(_).then(h,p)}}function a(h,_){n[h]&&(o[h]=function(T){return new Promise(function(I,P){s.push([h,T,I,P])>1||u(h,T)})},_&&(o[h]=_(o[h])))}function u(h,_){try{l(n[h](_))}catch(T){g(s[0][3],T)}}function l(h){h.value instanceof _o?Promise.resolve(h.value.v).then(m,p):g(s[0][2],h)}function m(h){u("next",h)}function p(h){u("throw",h)}function g(h,_){h(_),s.shift(),s.length&&u(s[0][0],s[0][1])}}function X_(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,s){t[o]=e[o]?function(i){return(r=!r)?{value:_o(e[o](i)),done:!1}:s?s(i):i}:s}}function Q_(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Ka=="function"?Ka(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(a,u){i=e[s](i),o(a,u,i.done,i.value)})}}function o(s,i,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},i)}}function J_(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Z_(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=Ep(e),n=0;n<r.length;n++)r[n]!=="default"&&Ya(t,e,r[n]);return uU(t,e),t}function ew(e){return e&&e.__esModule?e:{default:e}}function tw(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function rw(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r}function nw(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function ow(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(o=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}function sw(e){function t(s){e.error=e.hasError?new lU(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var r,n=0;function o(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(o);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(o,function(i){return t(i),o()})}else n|=1}catch(i){t(i)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function iw(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,o,s,i){return n?t?".jsx":".js":o&&(!s||!i)?r:o+s+"."+i.toLowerCase()+"js"}):e}var Sp,Wa,Ya,uU,Ep,lU,dU,Rn=b(()=>{c();Sp=function(e,t){return Sp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Sp(e,t)};Wa=function(){return Wa=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Wa.apply(this,arguments)};Ya=Object.create?(function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]});uU=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},Ep=function(e){return Ep=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},Ep(e)};lU=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};dU={__extends:k_,__assign:Wa,__rest:M_,__decorate:$_,__param:B_,__esDecorate:L_,__runInitializers:U_,__propKey:F_,__setFunctionName:H_,__metadata:q_,__awaiter:j_,__generator:G_,__createBinding:Ya,__exportStar:z_,__values:Ka,__read:_p,__spread:V_,__spreadArrays:W_,__spreadArray:K_,__await:_o,__asyncGenerator:Y_,__asyncDelegator:X_,__asyncValues:Q_,__makeTemplateObject:J_,__importStar:Z_,__importDefault:ew,__classPrivateFieldGet:tw,__classPrivateFieldSet:rw,__classPrivateFieldIn:nw,__addDisposableResource:ow,__disposeResources:sw,__rewriteRelativeImportExtension:iw}});var cw=x(Xa=>{"use strict";c();Object.defineProperty(Xa,"__esModule",{value:!0});Xa.randomUUID=void 0;var fU=(Rn(),W(xn)),aw=fU.__importDefault(z("crypto"));Xa.randomUUID=aw.default.randomUUID.bind(aw.default)});var wp=x(lw=>{"use strict";c();var uw=cw(),Me=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),pU=()=>{if(uw.randomUUID)return uw.randomUUID();let e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128,Me[e[0]]+Me[e[1]]+Me[e[2]]+Me[e[3]]+"-"+Me[e[4]]+Me[e[5]]+"-"+Me[e[6]]+Me[e[7]]+"-"+Me[e[8]]+Me[e[9]]+"-"+Me[e[10]]+Me[e[11]]+Me[e[12]]+Me[e[13]]+Me[e[14]]+Me[e[15]]};lw.v4=pU});var mt,dw=b(()=>{c();mt=A(wp())});var We,fw=b(()=>{c();We=function(t){return Object.assign(new String(t),{deserializeJSON(){return JSON.parse(String(t))},toString(){return String(t)},toJSON(){return String(t)}})};We.from=e=>e&&typeof e=="object"&&(e instanceof We||"deserializeJSON"in e)?e:typeof e=="string"||Object.getPrototypeOf(e)===String.prototype?We(String(e)):We(JSON.stringify(e));We.fromObject=We.from});function bp(e){return(e.includes(",")||e.includes('"'))&&(e=`"${e.replace(/"/g,'\\"')}"`),e}var pw=b(()=>{c()});function ar(e,t,r){let n=Number(e);if(n<t||n>r)throw new Error(`Value ${n} out of range [${t}, ${r}]`)}var vp,Cp,Ap,mw,hw,mU,hU,gU,yU,SU,wo,Tp,xp,gw=b(()=>{c();vp="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",Cp="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",Ap="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",mw="(\\d?\\d)",hw="(\\d{4})",mU=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),hU=new RegExp(`^${vp}, ${mw} ${Cp} ${hw} ${Ap} GMT$`),gU=new RegExp(`^${vp}, ${mw}-${Cp}-(\\d\\d) ${Ap} GMT$`),yU=new RegExp(`^${vp} ${Cp} ( [1-9]|\\d\\d) ${Ap} ${hw}$`),SU=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wo=e=>{if(e==null)return;let t=NaN;if(typeof e=="number")t=e;else if(typeof e=="string"){if(!/^-?\d*\.?\d+$/.test(e))throw new TypeError("parseEpochTimestamp - numeric string invalid.");t=Number.parseFloat(e)}else typeof e=="object"&&e.tag===1&&(t=e.value);if(isNaN(t)||Math.abs(t)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(t*1e3))},Tp=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC3339 timestamps must be strings");let t=mU.exec(e);if(!t)throw new TypeError(`Invalid RFC3339 timestamp format ${e}`);let[,r,n,o,s,i,a,,u,l]=t;ar(n,1,12),ar(o,1,31),ar(s,0,23),ar(i,0,59),ar(a,0,60);let m=new Date(Date.UTC(Number(r),Number(n)-1,Number(o),Number(s),Number(i),Number(a),Number(u)?Math.round(parseFloat(`0.${u}`)*1e3):0));if(m.setUTCFullYear(Number(r)),l.toUpperCase()!="Z"){let[,p,g,h]=/([+-])(\d\d):(\d\d)/.exec(l)||[void 0,"+",0,0],_=p==="-"?1:-1;m.setTime(m.getTime()+_*(Number(g)*60*60*1e3+Number(h)*60*1e3))}return m},xp=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC7231 timestamps must be strings.");let t,r,n,o,s,i,a,u;if((u=hU.exec(e))?[,t,r,n,o,s,i,a]=u:(u=gU.exec(e))?([,t,r,n,o,s,i,a]=u,n=(Number(n)+1900).toString()):(u=yU.exec(e))&&([,r,t,o,s,i,a,n]=u),n&&i){let l=Date.UTC(Number(n),SU.indexOf(r),Number(t),Number(o),Number(s),Number(i),a?Math.round(parseFloat(`0.${a}`)*1e3):0);ar(t,1,31),ar(o,0,23),ar(s,0,59),ar(i,0,60);let m=new Date(l);return m.setUTCFullYear(Number(n)),m}throw new TypeError(`Invalid RFC7231 date-time value ${e}.`)}});function Rp(e,t,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=e.split(t);if(r===1)return n;let o=[],s="";for(let i=0;i<n.length;i++)s===""?s=n[i]:s+=t+n[i],(i+1)%r===0&&(o.push(s),s="");return s!==""&&o.push(s),o}var yw=b(()=>{c()});var Ns,Sw=b(()=>{c();Ns=e=>{let t=e.length,r=[],n=!1,o,s=0;for(let i=0;i<t;++i){let a=e[i];switch(a){case'"':o!=="\\"&&(n=!n);break;case",":n||(r.push(e.slice(s,i)),s=i+1);break;default:}o=a}return r.push(e.slice(s)),r.map(i=>{i=i.trim();let a=i.length;return a<2?i:(i[0]==='"'&&i[a-1]==='"'&&(i=i.slice(1,a-1)),i.replace(/\\"/g,'"'))})}});function Ip(e){return new pe(String(e),"bigDecimal")}var Ew,pe,_w=b(()=>{c();Ew=/^-?\d*(\.\d+)?$/,pe=class e{string;type;constructor(t,r){if(this.string=t,this.type=r,!Ew.test(t))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](t){if(!t||typeof t!="object")return!1;let r=t;return e.prototype.isPrototypeOf(t)||r.type==="bigDecimal"&&Ew.test(r.string)}}});var ww={};rt(ww,{LazyJsonString:()=>We,NumericValue:()=>pe,_parseEpochTimestamp:()=>wo,_parseRfc3339DateTimeWithOffset:()=>Tp,_parseRfc7231DateTime:()=>xp,copyDocumentWithTransform:()=>NL,dateToUtcString:()=>Os,expectBoolean:()=>kL,expectByte:()=>ap,expectFloat32:()=>Ga,expectInt:()=>$L,expectInt32:()=>sp,expectLong:()=>Rs,expectNonNull:()=>LL,expectNumber:()=>xs,expectObject:()=>P_,expectShort:()=>ip,expectString:()=>UL,expectUnion:()=>FL,generateIdempotencyToken:()=>mt.v4,handleFloat:()=>jL,limitedParseDouble:()=>lp,limitedParseFloat:()=>GL,limitedParseFloat32:()=>zL,logger:()=>Is,nv:()=>Ip,parseBoolean:()=>DL,parseEpochTimestamp:()=>yp,parseRfc3339DateTime:()=>XL,parseRfc3339DateTimeWithOffset:()=>hp,parseRfc7231DateTime:()=>gp,quoteHeader:()=>bp,splitEvery:()=>Rp,splitHeader:()=>Ns,strictParseByte:()=>dp,strictParseDouble:()=>Va,strictParseFloat:()=>HL,strictParseFloat32:()=>up,strictParseInt:()=>VL,strictParseInt32:()=>WL,strictParseLong:()=>N_,strictParseShort:()=>Tn});var Ke=b(()=>{c();I_();D_();dw();fw();fp();pw();gw();yw();Sw();_w()});var Ye,bo=b(()=>{c();Ye=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});var Qa,Pp,bw=b(()=>{c();Qa=A(me()),Pp=class{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:t,serializer:r,deserializer:n,serdeContext:o,defaultContentType:s}){this.marshaller=t,this.serializer=r,this.deserializer=n,this.serdeContext=o,this.defaultContentType=s}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:n}){let o=this.marshaller,s=r.getEventStreamMember(),i=r.getMemberSchema(s),a=this.serializer,u=this.defaultContentType,l=Symbol("initialRequestMarker"),m={async*[Symbol.asyncIterator](){if(n){let p={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:u}};a.write(r,n);let g=a.flush();yield{[l]:!0,headers:p,body:g}}for await(let p of t)yield p}};return o.serialize(m,p=>{if(p[l])return{headers:p.headers,body:p.body};let g=Object.keys(p).find(D=>D!=="__type")??"",{additionalHeaders:h,body:_,eventType:T,explicitPayloadContentType:I}=this.writeEventBody(g,i,p);return{headers:{":event-type":{type:"string",value:T},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:I??u},...h},body:_}})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:n}){let o=this.marshaller,s=r.getEventStreamMember(),a=r.getMemberSchema(s).getMemberSchemas(),u=Symbol("initialResponseMarker"),l=o.deserialize(t.body,async g=>{let h=Object.keys(g).find(T=>T!=="__type")??"",_=g[h].body;if(h==="initial-response"){let T=await this.deserializer.read(r,_);return delete T[s],{[u]:!0,...T}}else if(h in a){let T=a[h];if(T.isStructSchema()){let I={},P=!1;for(let[D,M]of T.structIterator()){let{eventHeader:L,eventPayload:j}=M.getMergedTraits();if(P=P||!!(L||j),j)M.isBlobSchema()?I[D]=_:M.isStringSchema()?I[D]=(this.serdeContext?.utf8Encoder??Qa.toUtf8)(_):M.isStructSchema()&&(I[D]=await this.deserializer.read(M,_));else if(L){let Q=g[h].headers[D]?.value;Q!=null&&(M.isNumericSchema()?Q&&typeof Q=="object"&&"bytes"in Q?I[D]=BigInt(Q.toString()):I[D]=Number(Q):I[D]=Q)}}if(P)return{[h]:I}}return{[h]:await this.deserializer.read(T,_)}}else return{$unknown:g}}),m=l[Symbol.asyncIterator](),p=await m.next();if(p.done)return l;if(p.value?.[u]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[g,h]of Object.entries(p.value))n[g]=h}return{async*[Symbol.asyncIterator](){for(p?.value?.[u]||(yield p.value);;){let{done:g,value:h}=await m.next();if(g)break;yield h}}}}writeEventBody(t,r,n){let o=this.serializer,s=t,i=null,a,u=r.getSchema()[4].includes(t),l={};if(u){let g=r.getMemberSchema(t);if(g.isStructSchema()){for(let[h,_]of g.structIterator()){let{eventHeader:T,eventPayload:I}=_.getMergedTraits();if(I)i=h;else if(T){let P=n[t][h],D="binary";_.isNumericSchema()?(-2)**31<=P&&P<=2**31-1?D="integer":D="long":_.isTimestampSchema()?D="timestamp":_.isStringSchema()?D="string":_.isBooleanSchema()&&(D="boolean"),P!=null&&(l[h]={type:D,value:P},delete n[t][h])}}if(i!==null){let h=g.getMemberSchema(i);h.isBlobSchema()?a="application/octet-stream":h.isStringSchema()&&(a="text/plain"),o.write(h,n[t][i])}else o.write(g,n[t])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[g,h]=n[t];s=g,o.write(15,h)}let m=o.flush();return{body:typeof m=="string"?(this.serdeContext?.utf8Decoder??Qa.fromUtf8)(m):m,eventType:s,explicitPayloadContentType:a,additionalHeaders:l}}}});var vw={};rt(vw,{EventStreamSerde:()=>Pp});var Cw=b(()=>{c();bw()});var Ja,In,Za=b(()=>{c();ne();Ja=A(oe());bo();In=class extends Ye{options;constructor(t){super(),this.options=t}getRequestType(){return Ja.HttpRequest}getResponseType(){return Ja.HttpResponse}setSerdeContext(t){this.serdeContext=t,this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(t)}updateServiceEndpoint(t,r){if("url"in r){t.protocol=r.url.protocol,t.hostname=r.url.hostname,t.port=r.url.port?Number(r.url.port):void 0,t.path=r.url.pathname,t.fragment=r.url.hash||void 0,t.username=r.url.username||void 0,t.password=r.url.password||void 0,t.query||(t.query={});for(let[n,o]of r.url.searchParams.entries())t.query[n]=o;return t}else return t.protocol=r.protocol,t.hostname=r.hostname,t.port=r.port?Number(r.port):void 0,t.path=r.path,t.query={...r.query},t}setHostPrefix(t,r,n){if(this.serdeContext?.disableHostPrefix)return;let o=$.of(r.input),s=Lt(r.traits??{});if(s.endpoint){let i=s.endpoint?.[0];if(typeof i=="string"){let a=[...o.structIterator()].filter(([,u])=>u.getMergedTraits().hostLabel);for(let[u]of a){let l=n[u];if(typeof l!="string")throw new Error(`@smithy/core/schema - ${u} in input must be a string as hostLabel.`);i=i.replace(`{${u}}`,l)}t.hostname=i+t.hostname}}}deserializeMetadata(t){return{httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:n}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:t,requestSchema:r,initialRequest:n})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:n}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:n})}async loadEventStreamCapability(){let{EventStreamSerde:t}=await Promise.resolve().then(()=>(Cw(),vw));return new t({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(t,r,n,o,s){return[]}getEventStreamMarshaller(){let t=this.serdeContext;if(!t.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return t.eventStreamMarshaller}}});var Aw,Tw,Pn,xw=b(()=>{c();ne();Ke();Aw=A(oe()),Tw=A(ka());$a();Ba();Za();Pn=class extends In{async serializeRequest(t,r,n){let o={...r??{}},s=this.serializer,i={},a={},u=await n.endpoint(),l=$.of(t?.input),m=l.getSchema(),p=!1,g,h=new Aw.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:i,headers:a,body:void 0});if(u){this.updateServiceEndpoint(h,u),this.setHostPrefix(h,t,o);let _=Lt(t.traits);if(_.http){h.method=_.http[0];let[T,I]=_.http[1].split("?");h.path=="/"?h.path=T:h.path+=T;let P=new URLSearchParams(I??"");Object.assign(i,Object.fromEntries(P))}}for(let[_,T]of l.structIterator()){let I=T.getMergedTraits()??{},P=o[_];if(P==null&&!T.isIdempotencyToken()){if(I.httpLabel&&(h.path.includes(`{${_}+}`)||h.path.includes(`{${_}}`)))throw new Error(`No value provided for input HTTP label: ${_}.`);continue}if(I.httpPayload)T.isStreaming()?T.isStructSchema()?o[_]&&(g=await this.serializeEventStream({eventStream:o[_],requestSchema:l})):g=P:(s.write(T,P),g=s.flush()),delete o[_];else if(I.httpLabel){s.write(T,P);let D=s.flush();h.path.includes(`{${_}+}`)?h.path=h.path.replace(`{${_}+}`,D.split("/").map(Bt).join("/")):h.path.includes(`{${_}}`)&&(h.path=h.path.replace(`{${_}}`,Bt(D))),delete o[_]}else if(I.httpHeader)s.write(T,P),a[I.httpHeader.toLowerCase()]=String(s.flush()),delete o[_];else if(typeof I.httpPrefixHeaders=="string"){for(let[D,M]of Object.entries(P)){let L=I.httpPrefixHeaders+D;s.write([T.getValueSchema(),{httpHeader:L}],M),a[L.toLowerCase()]=s.flush()}delete o[_]}else I.httpQuery||I.httpQueryParams?(this.serializeQuery(T,P,i),delete o[_]):p=!0}return p&&o&&(s.write(m,o),g=s.flush()),h.headers=a,h.query=i,h.body=g,h}serializeQuery(t,r,n){let o=this.serializer,s=t.getMergedTraits();if(s.httpQueryParams){for(let[i,a]of Object.entries(r))if(!(i in n)){let u=t.getValueSchema();Object.assign(u.getMergedTraits(),{...s,httpQuery:i,httpQueryParams:void 0}),this.serializeQuery(u,a,n)}return}if(t.isListSchema()){let i=!!t.getMergedTraits().sparse,a=[];for(let u of r){o.write([t.getValueSchema(),s],u);let l=o.flush();(i||l!==void 0)&&a.push(l)}n[s.httpQuery]=a}else o.write([t,s],r),n[s.httpQuery]=o.flush()}async deserializeResponse(t,r,n){let o=this.deserializer,s=$.of(t.output),i={};if(n.statusCode>=300){let u=await pt(n.body,r);throw u.byteLength>0&&Object.assign(i,await o.read(15,u)),await this.handleError(t,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let u in n.headers){let l=n.headers[u];delete n.headers[u],n.headers[u.toLowerCase()]=l}let a=await this.deserializeHttpMessage(s,r,n,i);if(a.length){let u=await pt(n.body,r);if(u.byteLength>0){let l=await o.read(s,u);for(let m of a)i[m]=l[m]}}else a.discardResponseBody&&await pt(n.body,r);return i.$metadata=this.deserializeMetadata(n),i}async deserializeHttpMessage(t,r,n,o,s){let i;o instanceof Set?i=s:i=o;let a=!0,u=this.deserializer,l=$.of(t),m=[];for(let[p,g]of l.structIterator()){let h=g.getMemberTraits();if(h.httpPayload){if(a=!1,g.isStreaming())g.isStructSchema()?i[p]=await this.deserializeEventStream({response:n,responseSchema:l}):i[p]=(0,Tw.sdkStreamMixin)(n.body);else if(n.body){let T=await pt(n.body,r);T.byteLength>0&&(i[p]=await u.read(g,T))}}else if(h.httpHeader){let _=String(h.httpHeader).toLowerCase(),T=n.headers[_];if(T!=null)if(g.isListSchema()){let I=g.getValueSchema();I.getMergedTraits().httpHeader=_;let P;I.isTimestampSchema()&&I.getSchema()===4?P=Rp(T,",",2):P=Ns(T);let D=[];for(let M of P)D.push(await u.read(I,M.trim()));i[p]=D}else i[p]=await u.read(g,T)}else if(h.httpPrefixHeaders!==void 0){i[p]={};for(let[_,T]of Object.entries(n.headers))if(_.startsWith(h.httpPrefixHeaders)){let I=g.getValueSchema();I.getMergedTraits().httpHeader=_,i[p][_.slice(h.httpPrefixHeaders.length)]=await u.read(I,T)}}else h.httpResponseCode?i[p]=n.statusCode:m.push(p)}return m.discardResponseBody=a,m}}});var Rw,cr,Iw=b(()=>{c();ne();Rw=A(oe());$a();Za();cr=class extends In{async serializeRequest(t,r,n){let o=this.serializer,s={},i={},a=await n.endpoint(),u=$.of(t?.input),l=u.getSchema(),m,p=new Rw.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:s,headers:i,body:void 0});a&&(this.updateServiceEndpoint(p,a),this.setHostPrefix(p,t,r));let g={...r};if(r){let h=u.getEventStreamMember();if(h){if(g[h]){let _={};for(let[T,I]of u.structIterator())T!==h&&g[T]&&(o.write(I,g[T]),_[T]=o.flush());m=await this.serializeEventStream({eventStream:g[h],requestSchema:u,initialRequest:_})}}else o.write(l,g),m=o.flush()}return p.headers=i,p.query=s,p.body=m,p.method="POST",p}async deserializeResponse(t,r,n){let o=this.deserializer,s=$.of(t.output),i={};if(n.statusCode>=300){let u=await pt(n.body,r);throw u.byteLength>0&&Object.assign(i,await o.read(15,u)),await this.handleError(t,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let u in n.headers){let l=n.headers[u];delete n.headers[u],n.headers[u.toLowerCase()]=l}let a=s.getEventStreamMember();if(a)i[a]=await this.deserializeEventStream({response:n,responseSchema:s,initialResponseContainer:i});else{let u=await pt(n.body,r);u.byteLength>0&&Object.assign(i,await o.read(s,u))}return i.$metadata=this.deserializeMetadata(n),i}}});var Op,Np=b(()=>{c();Ba();Op=(e,t,r,n,o,s)=>{if(t!=null&&t[r]!==void 0){let i=n();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(o,s?i.split("/").map(a=>Bt(a)).join("/"):Bt(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return e}});function Dp(e,t){return new ec(e,t)}var Pw,ec,Ow=b(()=>{c();Pw=A(oe());Np();ec=class{input;context;query={};method="";headers={};path="";body=null;hostname="";resolvePathStack=[];constructor(t,r){this.input=t,this.context=r}async build(){let{hostname:t,protocol:r="https",port:n,path:o}=await this.context.endpoint();this.path=o;for(let s of this.resolvePathStack)s(this.path);return new Pw.HttpRequest({protocol:r,hostname:this.hostname||t,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,n,o){return this.resolvePathStack.push(s=>{this.path=Op(s,this.input,t,r,n,o)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}});var Nw=x(tc=>{"use strict";c();Object.defineProperty(tc,"__esModule",{value:!0});tc.fromBase64=void 0;var EU=Ae(),_U=/^[A-Za-z0-9+/]*={0,2}$/,wU=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!_U.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,EU.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};tc.fromBase64=wU});var Dw=x(rc=>{"use strict";c();Object.defineProperty(rc,"__esModule",{value:!0});rc.toBase64=void 0;var bU=Ae(),vU=me(),CU=e=>{let t;if(typeof e=="string"?t=(0,vU.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,bU.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};rc.toBase64=CU});var nc=x(Ds=>{"use strict";c();var kw=Nw(),Mw=Dw();Object.keys(kw).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ds,e)&&Object.defineProperty(Ds,e,{enumerable:!0,get:function(){return kw[e]}})});Object.keys(Mw).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ds,e)&&Object.defineProperty(Ds,e,{enumerable:!0,get:function(){return Mw[e]}})})});function ct(e,t){if(t.timestampFormat.useTrait&&e.isTimestampSchema()&&(e.getSchema()===5||e.getSchema()===6||e.getSchema()===7))return e.getSchema();let{httpLabel:r,httpPrefixHeaders:n,httpHeader:o,httpQuery:s}=e.getMergedTraits();return(t.httpBindings?typeof n=="string"||o?6:s||r?5:void 0:void 0)??t.timestampFormat.default}var oc=b(()=>{c()});var kp,$w,On,Mp=b(()=>{c();ne();Ke();kp=A(nc()),$w=A(me());bo();oc();On=class extends Ye{settings;constructor(t){super(),this.settings=t}read(t,r){let n=$.of(t);if(n.isListSchema())return Ns(r).map(o=>this.read(n.getValueSchema(),o));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??kp.fromBase64)(r);if(n.isTimestampSchema())switch(ct(n,this.settings)){case 5:return Tp(r);case 6:return xp(r);case 7:return wo(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isStringSchema()){let o=n.getMergedTraits().mediaType,s=r;if(o)return n.getMergedTraits().httpHeader&&(s=this.base64ToUtf8(s)),(o==="application/json"||o.endsWith("+json"))&&(s=We.from(s)),s}return n.isNumericSchema()?Number(r):n.isBigIntegerSchema()?BigInt(r):n.isBigDecimalSchema()?new pe(r,"bigDecimal"):n.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(t){return(this.serdeContext?.utf8Encoder??$w.toUtf8)((this.serdeContext?.base64Decoder??kp.fromBase64)(t))}}});var sc,Nn,Bw=b(()=>{c();ne();sc=A(me());bo();Mp();Nn=class extends Ye{codecDeserializer;stringDeserializer;constructor(t,r){super(),this.codecDeserializer=t,this.stringDeserializer=new On(r)}setSerdeContext(t){this.stringDeserializer.setSerdeContext(t),this.codecDeserializer.setSerdeContext(t),this.serdeContext=t}read(t,r){let n=$.of(t),o=n.getMergedTraits(),s=this.serdeContext?.utf8Encoder??sc.toUtf8;if(o.httpHeader||o.httpResponseCode)return this.stringDeserializer.read(n,s(r));if(o.httpPayload){if(n.isBlobSchema()){let i=this.serdeContext?.utf8Decoder??sc.fromUtf8;return typeof r=="string"?i(r):r}else if(n.isStringSchema())return"byteLength"in r?s(r):r}return this.codecDeserializer.read(n,r)}}});var $p,ks,Bp=b(()=>{c();ne();Ke();$p=A(nc());bo();oc();ks=class extends Ye{settings;stringBuffer="";constructor(t){super(),this.settings=t}write(t,r){let n=$.of(t);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(n.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${n.getName(!0)}`);switch(ct(n,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=Os(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(n.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??$p.toBase64)(r);return}if(n.isListSchema()&&Array.isArray(r)){let i="";for(let a of r){this.write([n.getValueSchema(),n.getMergedTraits()],a);let u=this.flush(),l=n.getValueSchema().isTimestampSchema()?u:bp(u);i!==""&&(i+=", "),i+=l}this.stringBuffer=i;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":let o=n.getMergedTraits().mediaType,s=r;if(o&&((o==="application/json"||o.endsWith("+json"))&&(s=We.from(s)),n.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??$p.toBase64)(s.toString());return}this.stringBuffer=r;break;default:n.isIdempotencyToken()?this.stringBuffer=(0,mt.v4)():this.stringBuffer=String(r)}}flush(){let t=this.stringBuffer;return this.stringBuffer="",t}}});var Dn,Lw=b(()=>{c();ne();Bp();Dn=class{codecSerializer;stringSerializer;buffer;constructor(t,r,n=new ks(r)){this.codecSerializer=t,this.stringSerializer=n}setSerdeContext(t){this.codecSerializer.setSerdeContext(t),this.stringSerializer.setSerdeContext(t)}write(t,r){let n=$.of(t),o=n.getMergedTraits();if(o.httpHeader||o.httpLabel||o.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){let t=this.buffer;return this.buffer=void 0,t}return this.codecSerializer.flush()}}});var Uw={};rt(Uw,{FromStringShapeDeserializer:()=>On,HttpBindingProtocol:()=>Pn,HttpInterceptingShapeDeserializer:()=>Nn,HttpInterceptingShapeSerializer:()=>Dn,HttpProtocol:()=>In,RequestBuilder:()=>ec,RpcProtocol:()=>cr,SerdeContext:()=>Ye,ToStringShapeSerializer:()=>ks,collectBody:()=>pt,determineTimestampFormat:()=>ct,extendedEncodeURIComponent:()=>Bt,requestBuilder:()=>Dp,resolvedPath:()=>Op});var nt=b(()=>{c();$a();Ba();xw();Za();Iw();Ow();Np();Mp();Bw();Lw();Bp();oc();bo()});var Fw=b(()=>{c();nt()});function AU(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}var Hw=b(()=>{c()});var ur,qw=b(()=>{c();ur=class{authSchemes=new Map;constructor(t){for(let[r,n]of Object.entries(t))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(t){return this.authSchemes.get(t)}}});var jw,Lp,Up,Gw=b(()=>{c();jw=A(oe()),Lp=A(Tr()),Up=class{async sign(t,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let o=jw.HttpRequest.clone(t);if(n.in===Lp.HttpApiKeyAuthLocation.QUERY)o.query[n.name]=r.apiKey;else if(n.in===Lp.HttpApiKeyAuthLocation.HEADER)o.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return o}}});var zw,Fp,Vw=b(()=>{c();zw=A(oe()),Fp=class{async sign(t,r,n){let o=zw.HttpRequest.clone(t);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return o.headers.Authorization=`Bearer ${r.token}`,o}}});var At,Ww=b(()=>{c();At=class{async sign(t,r,n){return t}}});var Kw=b(()=>{c();Gw();Vw();Ww()});var Yw,TU,Hp,ic,qp,Xw=b(()=>{c();Yw=e=>function(r){return ic(r)&&r.expiration.getTime()-Date.now()<e},TU=3e5,Hp=Yw(3e5),ic=e=>e.expiration!==void 0,qp=(e,t,r)=>{if(e===void 0)return;let n=typeof e!="function"?async()=>Promise.resolve(e):e,o,s,i,a=!1,u=async l=>{s||(s=n(l));try{o=await s,i=!0,a=!1}finally{s=void 0}return o};return t===void 0?async l=>((!i||l?.forceRefresh)&&(o=await u(l)),o):async l=>((!i||l?.forceRefresh)&&(o=await u(l)),a?o:r(o)?(t(o)&&await u(l),o):(a=!0,o))}});var Qw=b(()=>{c();qw();Kw();Xw()});var lr={};rt(lr,{DefaultIdentityProviderConfig:()=>ur,EXPIRATION_MS:()=>TU,HttpApiKeyAuthSigner:()=>Up,HttpBearerAuthSigner:()=>Fp,NoAuthSigner:()=>At,createIsIdentityExpiredFunction:()=>Yw,createPaginator:()=>JS,doesIdentityRequireRefresh:()=>ic,getHttpAuthSchemeEndpointRuleSetPlugin:()=>vn,getHttpAuthSchemePlugin:()=>G$,getHttpSigningPlugin:()=>Cn,getSmithyContext:()=>L$,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>$S,httpAuthSchemeMiddleware:()=>Ss,httpAuthSchemeMiddlewareOptions:()=>jS,httpSigningMiddleware:()=>wf,httpSigningMiddlewareOptions:()=>KS,isIdentityExpired:()=>Hp,memoizeIdentityProvider:()=>qp,normalizeProvider:()=>Rr,requestBuilder:()=>Dp,setFeature:()=>AU});var xe=b(()=>{c();OS();zS();XS();QS();ZS();Fw();Hw();Qw()});var Nr=x(kn=>{"use strict";c();var Gp=Tr(),zp=class{capacity;data=new Map;parameters=[];constructor({size:t,params:r}){this.capacity=t??50,r&&(this.parameters=r)}get(t,r){let n=this.hash(t);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let o=this.data.keys(),s=0;for(;;){let{value:i,done:a}=o.next();if(this.data.delete(i),a||++s>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(t){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let o of n){let s=String(t[o]??"");if(s.includes("|;"))return!1;r+=s+"|;"}return r}},xU=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Jw=e=>xU.test(e)||e.startsWith("[")&&e.endsWith("]"),RU=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Wp=(e,t=!1)=>{if(!t)return RU.test(e);let r=e.split(".");for(let n of r)if(!Wp(n))return!1;return!0},Vp={},Ms="endpoints";function Or(e){return typeof e!="object"||e==null?e:"ref"in e?`$${Or(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Or).join(", ")})`:JSON.stringify(e,null,2)}var $e=class extends Error{constructor(t){super(t),this.name="EndpointError"}},IU=(e,t)=>e===t,PU=e=>{let t=e.split("."),r=[];for(let n of t){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new $e(`Path: '${e}' does not end with ']'`);let s=n.slice(o+1,-1);if(Number.isNaN(parseInt(s)))throw new $e(`Invalid array index: '${s}' in path: '${e}'`);o!==0&&r.push(n.slice(0,o)),r.push(s)}else r.push(n)}return r},Zw=(e,t)=>PU(t).reduce((r,n)=>{if(typeof r!="object")throw new $e(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e),OU=e=>e!=null,NU=e=>!e,jp={[Gp.EndpointURLScheme.HTTP]:80,[Gp.EndpointURLScheme.HTTPS]:443},DU=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:g,port:h,protocol:_="",path:T="",query:I={}}=e,P=new URL(`${_}//${g}${h?`:${h}`:""}${T}`);return P.search=Object.entries(I).map(([D,M])=>`${D}=${M}`).join("&"),P}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:o,pathname:s,protocol:i,search:a}=t;if(a)return null;let u=i.slice(0,-1);if(!Object.values(Gp.EndpointURLScheme).includes(u))return null;let l=Jw(o),m=r.includes(`${n}:${jp[u]}`)||typeof e=="string"&&e.includes(`${n}:${jp[u]}`),p=`${n}${m?`:${jp[u]}`:""}`;return{scheme:u,authority:p,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:l}},kU=(e,t)=>e===t,MU=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),$U=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),BU={booleanEquals:IU,getAttr:Zw,isSet:OU,isValidHostLabel:Wp,not:NU,parseURL:DU,stringEquals:kU,substring:MU,uriEncode:$U},e0=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},o=0;for(;o<e.length;){let s=e.indexOf("{",o);if(s===-1){r.push(e.slice(o));break}r.push(e.slice(o,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(s+1,i)),o=i+2);let a=e.substring(s+1,i);if(a.includes("#")){let[u,l]=a.split("#");r.push(Zw(n[u],l))}else r.push(n[a]);o=i+1}return r.join("")},LU=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],ac=(e,t,r)=>{if(typeof e=="string")return e0(e,r);if(e.fn)return r0.callFunction(e,r);if(e.ref)return LU(e,r);throw new $e(`'${t}': ${String(e)} is not a string, function or reference.`)},t0=({fn:e,argv:t},r)=>{let n=t.map(s=>["boolean","number"].includes(typeof s)?s:r0.evaluateExpression(s,"arg",r)),o=e.split(".");return o[0]in Vp&&o[1]!=null?Vp[o[0]][o[1]](...n):BU[e](...n)},r0={evaluateExpression:ac,callFunction:t0},UU=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new $e(`'${e}' is already defined in Reference Record.`);let n=t0(t,r);return r.logger?.debug?.(`${Ms} evaluateCondition: ${Or(t)} = ${Or(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}},Kp=(e=[],t)=>{let r={};for(let n of e){let{result:o,toAssign:s}=UU(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!o)return{result:o};s&&(r[s.name]=s.value,t.logger?.debug?.(`${Ms} assign: ${s.name} := ${Or(s.value)}`))}return{result:!0,referenceRecord:r}},FU=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:o.map(s=>{let i=ac(s,"Header value entry",t);if(typeof i!="string")throw new $e(`Header '${n}' value '${i}' is not a string`);return i})}),{}),n0=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:s0.getEndpointProperty(o,t)}),{}),o0=(e,t)=>{if(Array.isArray(e))return e.map(r=>o0(r,t));switch(typeof e){case"string":return e0(e,t);case"object":if(e===null)throw new $e(`Unexpected endpoint property: ${e}`);return s0.getEndpointProperties(e,t);case"boolean":return e;default:throw new $e(`Unexpected endpoint property type: ${typeof e}`)}},s0={getEndpointProperty:o0,getEndpointProperties:n0},HU=(e,t)=>{let r=ac(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new $e(`Endpoint URL must be a string, got ${typeof r}`)},qU=(e,t)=>{let{conditions:r,endpoint:n}=e,{result:o,referenceRecord:s}=Kp(r,t);if(!o)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:u,headers:l}=n;return t.logger?.debug?.(`${Ms} Resolving endpoint from template: ${Or(n)}`),{...l!=null&&{headers:FU(l,i)},...u!=null&&{properties:n0(u,i)},url:HU(a,i)}},jU=(e,t)=>{let{conditions:r,error:n}=e,{result:o,referenceRecord:s}=Kp(r,t);if(o)throw new $e(ac(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))},i0=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=qU(r,t);if(n)return n}else if(r.type==="error")jU(r,t);else if(r.type==="tree"){let n=a0.evaluateTreeRule(r,t);if(n)return n}else throw new $e(`Unknown endpoint rule: ${r}`);throw new $e("Rules evaluation failed")},GU=(e,t)=>{let{conditions:r,rules:n}=e,{result:o,referenceRecord:s}=Kp(r,t);if(o)return a0.evaluateRules(n,{...t,referenceRecord:{...t.referenceRecord,...s}})},a0={evaluateRules:i0,evaluateTreeRule:GU},zU=(e,t)=>{let{endpointParams:r,logger:n}=t,{parameters:o,rules:s}=e;t.logger?.debug?.(`${Ms} Initial EndpointParams: ${Or(r)}`);let i=Object.entries(o).filter(([,l])=>l.default!=null).map(([l,m])=>[l,m.default]);if(i.length>0)for(let[l,m]of i)r[l]=r[l]??m;let a=Object.entries(o).filter(([,l])=>l.required).map(([l])=>l);for(let l of a)if(r[l]==null)throw new $e(`Missing required parameter: '${l}'`);let u=i0(s,{endpointParams:r,logger:n,referenceRecord:{}});return t.logger?.debug?.(`${Ms} Resolved endpoint: ${Or(u)}`),u};kn.EndpointCache=zp;kn.EndpointError=$e;kn.customEndpointFunctions=Vp;kn.isIpAddress=Jw;kn.isValidHostLabel=Wp;kn.resolveEndpoint=zU});var u0=x(c0=>{"use strict";c();function VU(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in t?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}return t}c0.parseQueryString=VU});var dr=x(d0=>{"use strict";c();var WU=u0(),l0=e=>{if(typeof e=="string")return l0(new URL(e));let{hostname:t,pathname:r,port:n,protocol:o,search:s}=e,i;return s&&(i=WU.parseQueryString(s)),{hostname:t,port:n?parseInt(n):void 0,protocol:o,path:r,query:i}};d0.parseUrl=l0});var Mn=x(Tt=>{"use strict";c();var vo=Nr(),KU=dr(),p0=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!p0(r))return!1;return!0}return!(!vo.isValidHostLabel(e)||e.length<3||e.length>63||e!==e.toLowerCase()||vo.isIpAddress(e))},f0=":",YU="/",XU=e=>{let t=e.split(f0);if(t.length<6)return null;let[r,n,o,s,i,...a]=t;if(r!=="arn"||n===""||o===""||a.join(f0)==="")return null;let u=a.map(l=>l.split(YU)).flat();return{partition:n,service:o,region:s,accountId:i,resourceId:u}},QU=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"AWS European Sovereign Cloud (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],JU="1.1",m0={partitions:QU,version:JU},h0=m0,g0="",y0=e=>{let{partitions:t}=h0;for(let n of t){let{regions:o,outputs:s}=n;for(let[i,a]of Object.entries(o))if(i===e)return{...s,...a}}for(let n of t){let{regionRegex:o,outputs:s}=n;if(new RegExp(o).test(e))return{...s}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},S0=(e,t="")=>{h0=e,g0=t},ZU=()=>{S0(m0,"")},eF=()=>g0,E0={isVirtualHostableS3Bucket:p0,parseArn:XU,partition:y0};vo.customEndpointFunctions.aws=E0;var tF=e=>{if(typeof e.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>_0(e.endpointProvider({Region:typeof e.region=="function"?await e.region():e.region,UseDualStack:typeof e.useDualstackEndpoint=="function"?await e.useDualstackEndpoint():e.useDualstackEndpoint,UseFIPS:typeof e.useFipsEndpoint=="function"?await e.useFipsEndpoint():e.useFipsEndpoint,Endpoint:void 0},{logger:e.logger}))),e},_0=e=>KU.parseUrl(e.url);Object.defineProperty(Tt,"EndpointError",{enumerable:!0,get:function(){return vo.EndpointError}});Object.defineProperty(Tt,"isIpAddress",{enumerable:!0,get:function(){return vo.isIpAddress}});Object.defineProperty(Tt,"resolveEndpoint",{enumerable:!0,get:function(){return vo.resolveEndpoint}});Tt.awsEndpointFunctions=E0;Tt.getUserAgentPrefix=eF;Tt.partition=y0;Tt.resolveDefaultAwsRegionalEndpointsConfig=tF;Tt.setPartitionInfo=S0;Tt.toEndpointV1=_0;Tt.useDefaultPartitionInfo=ZU});var cc,Dr,w0=b(()=>{c();cc={warningEmitted:!1},Dr=e=>{e&&!cc.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<20&&(cc.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js ${e} in January 2026.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/c895JFp`))}});function kr(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var b0=b(()=>{c()});function v0(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var C0=b(()=>{c()});function A0(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var T0=b(()=>{c()});var fr={};rt(fr,{emitWarningIfUnsupportedVersion:()=>Dr,setCredentialFeature:()=>kr,setFeature:()=>v0,setTokenFeature:()=>A0,state:()=>cc});var ht=b(()=>{c();w0();b0();C0();T0()});var x0,Yp,R0=b(()=>{c();x0=A(oe()),Yp=e=>x0.HttpResponse.isInstance(e)?e.headers?.date??e.headers?.Date:void 0});var Co,Xp=b(()=>{c();Co=e=>new Date(Date.now()+e)});var I0,P0=b(()=>{c();Xp();I0=(e,t)=>Math.abs(Co(t).getTime()-e)>=3e5});var Qp,O0=b(()=>{c();P0();Qp=(e,t)=>{let r=Date.parse(e);return I0(r,t)?r-Date.now():t}});var Jp=b(()=>{c();R0();Xp();O0()});var N0,$s,Ao,Be,Zp,em=b(()=>{c();N0=A(oe());Jp();$s=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},Ao=async e=>{let t=$s("context",e.context),r=$s("config",e.config),n=t.endpointV2?.properties?.authSchemes?.[0],s=await $s("signer",r.signer)(n),i=e?.signingRegion,a=e?.signingRegionSet,u=e?.signingName;return{config:r,signer:s,signingRegion:i,signingRegionSet:a,signingName:u}},Be=class{async sign(t,r,n){if(!N0.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let o=await Ao(n),{config:s,signer:i}=o,{signingRegion:a,signingName:u}=o,l=n.context;if(l?.authSchemes?.length??!1){let[p,g]=l.authSchemes;p?.name==="sigv4a"&&g?.name==="sigv4"&&(a=g?.signingRegion??a,u=g?.signingName??u)}return await i.sign(t,{signingDate:Co(s.systemClockOffset),signingRegion:a,signingService:u})}errorHandler(t){return r=>{let n=r.ServerTime??Yp(r.$response);if(n){let o=$s("config",t.config),s=o.systemClockOffset;o.systemClockOffset=Qp(n,o.systemClockOffset),o.systemClockOffset!==s&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let n=Yp(t);if(n){let o=$s("config",r.config);o.systemClockOffset=Qp(n,o.systemClockOffset)}}},Zp=Be});var D0,Bs,k0=b(()=>{c();D0=A(oe());Jp();em();Bs=class extends Be{async sign(t,r,n){if(!D0.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:o,signer:s,signingRegion:i,signingRegionSet:a,signingName:u}=await Ao(n),m=(await o.sigv4aSigningRegionSet?.()??a??[i]).join(",");return await s.sign(t,{signingDate:Co(o.systemClockOffset),signingRegion:m,signingService:u})}}});var tm,M0=b(()=>{c();tm=e=>typeof e=="string"&&e.length>0?e.split(",").map(t=>t.trim()):[]});var uc,rm=b(()=>{c();uc=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,"_").toUpperCase()}`});var $0,B0,Mr,L0=b(()=>{c();M0();rm();$0="AWS_AUTH_SCHEME_PREFERENCE",B0="auth_scheme_preference",Mr={environmentVariableSelector:(e,t)=>{if(t?.signingName&&uc(t.signingName)in e)return["httpBearerAuth"];if($0 in e)return tm(e[$0])},configFileSelector:e=>{if(B0 in e)return tm(e[B0])},default:[]}});var Le=x($n=>{"use strict";c();var To=class e extends Error{name="ProviderError";tryNextLink;constructor(t,r=!0){let n,o=!0;typeof r=="boolean"?(n=void 0,o=r):r!=null&&typeof r=="object"&&(n=r.logger,o=r.tryNextLink??!0),super(t),this.tryNextLink=o,Object.setPrototypeOf(this,e.prototype),n?.debug?.(`@smithy/property-provider ${o?"->":"(!)"} ${t}`)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}},nm=class e extends To{name="CredentialsProviderError";constructor(t,r=!0){super(t,r),Object.setPrototypeOf(this,e.prototype)}},om=class e extends To{name="TokenProviderError";constructor(t,r=!0){super(t,r),Object.setPrototypeOf(this,e.prototype)}},rF=(...e)=>async()=>{if(e.length===0)throw new To("No providers in chain");let t;for(let r of e)try{return await r()}catch(n){if(t=n,n?.tryNextLink)continue;throw n}throw t},nF=e=>()=>Promise.resolve(e),oF=(e,t,r)=>{let n,o,s,i=!1,a=async()=>{o||(o=e());try{n=await o,s=!0,i=!1}finally{o=void 0}return n};return t===void 0?async u=>((!s||u?.forceRefresh)&&(n=await a()),n):async u=>((!s||u?.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(t(n)&&await a(),n))};$n.CredentialsProviderError=nm;$n.ProviderError=To;$n.TokenProviderError=om;$n.chain=rF;$n.fromStatic=nF;$n.memoize=oF});var sm,U0,F0,H0=b(()=>{c();xe();sm=A(Le()),U0=e=>(e.sigv4aSigningRegionSet=Rr(e.sigv4aSigningRegionSet),e),F0={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(t=>t.trim());throw new sm.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??"").split(",").map(t=>t.trim());throw new sm.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var j0=x(im=>{"use strict";c();var q0=e=>encodeURIComponent(e).replace(/[!'()*]/g,sF),sF=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,iF=e=>e.split("/").map(q0).join("/");im.escapeUri=q0;im.escapeUriPath=iF});var pb=x(V=>{"use strict";c();var $r=vs(),Bn=me(),aF=vf(),W0=oe(),G0=ze(),lc=j0(),K0="X-Amz-Algorithm",Y0="X-Amz-Credential",fm="X-Amz-Date",X0="X-Amz-SignedHeaders",Q0="X-Amz-Expires",pm="X-Amz-Signature",mm="X-Amz-Security-Token",cF="X-Amz-Region-Set",hm="authorization",gm=fm.toLowerCase(),J0="date",Z0=[hm,gm,J0],eb=pm.toLowerCase(),hc="x-amz-content-sha256",tb=mm.toLowerCase(),uF="host",rb={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},nb=/^proxy-/,ob=/^sec-/,lF=[/^proxy-/i,/^sec-/i],dc="AWS4-HMAC-SHA256",dF="AWS4-ECDSA-P256-SHA256",sb="AWS4-HMAC-SHA256-PAYLOAD",ib="UNSIGNED-PAYLOAD",ab=50,ym="aws4_request",cb=3600*24*7,xo={},fc=[],pc=(e,t,r)=>`${e}/${t}/${r}/${ym}`,ub=async(e,t,r,n,o)=>{let s=await z0(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${n}:${o}:${$r.toHex(s)}:${t.sessionToken}`;if(i in xo)return xo[i];for(fc.push(i);fc.length>ab;)delete xo[fc.shift()];let a=`AWS4${t.secretAccessKey}`;for(let u of[r,n,o,ym])a=await z0(e,a,u);return xo[i]=a},fF=()=>{fc.length=0,Object.keys(xo).forEach(e=>{delete xo[e]})},z0=(e,t,r)=>{let n=new e(t);return n.update(Bn.toUint8Array(r)),n.digest()},am=({headers:e},t,r)=>{let n={};for(let o of Object.keys(e).sort()){if(e[o]==null)continue;let s=o.toLowerCase();(s in rb||t?.has(s)||nb.test(s)||ob.test(s))&&(!r||r&&!r.has(s))||(n[s]=e[o].trim().replace(/\s+/g," "))}return n},mc=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===hc)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||aF.isArrayBuffer(t)){let n=new r;return n.update(Bn.toUint8Array(t)),$r.toHex(await n.digest())}return ib},cm=class{format(t){let r=[];for(let s of Object.keys(t)){let i=Bn.fromUtf8(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let n=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),o=0;for(let s of r)n.set(s,o),o+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let a=Bn.fromUtf8(t.value),u=new DataView(new ArrayBuffer(3+a.byteLength));u.setUint8(0,7),u.setUint16(1,a.byteLength,!1);let l=new Uint8Array(u.buffer);return l.set(a,3),l;case"timestamp":let m=new Uint8Array(9);return m[0]=8,m.set(um.fromNumber(t.value.valueOf()).bytes,1),m;case"uuid":if(!pF.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let p=new Uint8Array(17);return p[0]=9,p.set($r.fromHex(t.value.replace(/\-/g,"")),1),p}}},pF=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,um=class e{bytes;constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&V0(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&V0(t),parseInt($r.toHex(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function V0(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var lb=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},db=(e,t={})=>{let{headers:r,query:n={}}=W0.HttpRequest.clone(e);for(let o of Object.keys(r)){let s=o.toLowerCase();(s.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(s)||t.hoistableHeaders?.has(s))&&(n[o]=r[o],delete r[o])}return{...e,headers:r,query:n}},lm=e=>{e=W0.HttpRequest.clone(e);for(let t of Object.keys(e.headers))Z0.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},fb=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e)){if(n.toLowerCase()===eb)continue;let o=lc.escapeUri(n);t.push(o);let s=e[n];typeof s=="string"?r[o]=`${o}=${lc.escapeUri(s)}`:Array.isArray(s)&&(r[o]=s.slice(0).reduce((i,a)=>i.concat([`${o}=${lc.escapeUri(a)}`]),[]).sort().join("&"))}return t.sort().map(n=>r[n]).filter(n=>n).join("&")},mF=e=>hF(e).toISOString().replace(/\.\d{3}Z$/,"Z"),hF=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e,gc=class{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i=!0}){this.service=o,this.sha256=s,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=G0.normalizeProvider(n),this.credentialProvider=G0.normalizeProvider(r)}createCanonicalRequest(t,r,n){let o=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${fb(t)}
${o.map(s=>`${s}:${r[s]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(t,r,n,o){let s=new this.sha256;s.update(Bn.toUint8Array(n));let i=await s.digest();return`${o}
${t}
${r}
${$r.toHex(i)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let s of t.split("/"))s?.length!==0&&s!=="."&&(s===".."?r.pop():r.push(s));let n=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return lc.escapeUri(n).replace(/%2F/g,"/")}return t}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(t){let r=mF(t).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(t){return Object.keys(t).sort().join(";")}},dm=class extends gc{headerFormatter=new cm;constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i=!0}){super({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i})}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:o=3600,unsignableHeaders:s,unhoistableHeaders:i,signableHeaders:a,hoistableHeaders:u,signingRegion:l,signingService:m}=r,p=await this.credentialProvider();this.validateResolvedCredentials(p);let g=l??await this.regionProvider(),{longDate:h,shortDate:_}=this.formatDate(n);if(o>cb)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let T=pc(_,g,m??this.service),I=db(lm(t),{unhoistableHeaders:i,hoistableHeaders:u});p.sessionToken&&(I.query[mm]=p.sessionToken),I.query[K0]=dc,I.query[Y0]=`${p.accessKeyId}/${T}`,I.query[fm]=h,I.query[Q0]=o.toString(10);let P=am(I,s,a);return I.query[X0]=this.getCanonicalHeaderList(P),I.query[pm]=await this.getSignature(h,T,this.getSigningKey(p,g,_,m),this.createCanonicalRequest(I,P,await mc(t,this.sha256))),I}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:o,signingRegion:s,signingService:i}){let a=s??await this.regionProvider(),{shortDate:u,longDate:l}=this.formatDate(n),m=pc(u,a,i??this.service),p=await mc({headers:{},body:r},this.sha256),g=new this.sha256;g.update(t);let h=$r.toHex(await g.digest()),_=[sb,l,m,o,h,p].join(`
`);return this.signString(_,{signingDate:n,signingRegion:a,signingService:i})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:o}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:o,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:o}={}){let s=await this.credentialProvider();this.validateResolvedCredentials(s);let i=n??await this.regionProvider(),{shortDate:a}=this.formatDate(r),u=new this.sha256(await this.getSigningKey(s,i,a,o));return u.update(Bn.toUint8Array(t)),$r.toHex(await u.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:o,signingRegion:s,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let u=s??await this.regionProvider(),l=lm(t),{longDate:m,shortDate:p}=this.formatDate(r),g=pc(p,u,i??this.service);l.headers[gm]=m,a.sessionToken&&(l.headers[tb]=a.sessionToken);let h=await mc(l,this.sha256);!lb(hc,l.headers)&&this.applyChecksum&&(l.headers[hc]=h);let _=am(l,o,n),T=await this.getSignature(m,g,this.getSigningKey(a,u,p,i),this.createCanonicalRequest(l,_,h));return l.headers[hm]=`${dc} Credential=${a.accessKeyId}/${g}, SignedHeaders=${this.getCanonicalHeaderList(_)}, Signature=${T}`,l}async getSignature(t,r,n,o){let s=await this.createStringToSign(t,r,o,dc),i=new this.sha256(await n);return i.update(Bn.toUint8Array(s)),$r.toHex(await i.digest())}getSigningKey(t,r,n,o){return ub(this.sha256,t,n,r,o||this.service)}},gF={SignatureV4a:null};V.ALGORITHM_IDENTIFIER=dc;V.ALGORITHM_IDENTIFIER_V4A=dF;V.ALGORITHM_QUERY_PARAM=K0;V.ALWAYS_UNSIGNABLE_HEADERS=rb;V.AMZ_DATE_HEADER=gm;V.AMZ_DATE_QUERY_PARAM=fm;V.AUTH_HEADER=hm;V.CREDENTIAL_QUERY_PARAM=Y0;V.DATE_HEADER=J0;V.EVENT_ALGORITHM_IDENTIFIER=sb;V.EXPIRES_QUERY_PARAM=Q0;V.GENERATED_HEADERS=Z0;V.HOST_HEADER=uF;V.KEY_TYPE_IDENTIFIER=ym;V.MAX_CACHE_SIZE=ab;V.MAX_PRESIGNED_TTL=cb;V.PROXY_HEADER_PATTERN=nb;V.REGION_SET_PARAM=cF;V.SEC_HEADER_PATTERN=ob;V.SHA256_HEADER=hc;V.SIGNATURE_HEADER=eb;V.SIGNATURE_QUERY_PARAM=pm;V.SIGNED_HEADERS_QUERY_PARAM=X0;V.SignatureV4=dm;V.SignatureV4Base=gc;V.TOKEN_HEADER=tb;V.TOKEN_QUERY_PARAM=mm;V.UNSIGNABLE_PATTERNS=lF;V.UNSIGNED_PAYLOAD=ib;V.clearCredentialCache=fF;V.createScope=pc;V.getCanonicalHeaders=am;V.getCanonicalQuery=fb;V.getPayloadHash=mc;V.getSigningKey=ub;V.hasHeader=lb;V.moveHeadersToQuery=db;V.prepareRequest=lm;V.signatureV4aContainer=gF});function yF(e,{credentials:t,credentialDefaultProvider:r}){let n;return t?t?.memoized?n=t:n=qp(t,Hp,ic):r?n=Rr(r(Object.assign({},e,{parentClientConfig:e}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function SF(e,t){if(t.configBound)return t;let r=async n=>t({...n,callerClientConfig:e});return r.memoized=t.memoized,r.configBound=!0,r}var Sm,pr,mb,hb=b(()=>{c();ht();xe();Sm=A(pb()),pr=e=>{let t=e.credentials,r=!!e.credentials,n;Object.defineProperty(e,"credentials",{set(l){l&&l!==t&&l!==n&&(r=!0),t=l;let m=yF(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}),p=SF(e,m);if(r&&!p.attributed){let g=typeof t=="object"&&t!==null;n=async h=>{let T=await p(h);return g&&(!T.$source||Object.keys(T.$source).length===0)?kr(T,"CREDENTIALS_CODE","e"):T},n.memoized=p.memoized,n.configBound=p.configBound,n.attributed=!0}else n=p},get(){return n},enumerable:!0,configurable:!0}),e.credentials=t;let{signingEscapePath:o=!0,systemClockOffset:s=e.systemClockOffset||0,sha256:i}=e,a;return e.signer?a=Rr(e.signer):e.regionInfoProvider?a=()=>Rr(e.region)().then(async l=>[await e.regionInfoProvider(l,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},l]).then(([l,m])=>{let{signingRegion:p,signingService:g}=l;e.signingRegion=e.signingRegion||p||m,e.signingName=e.signingName||g||e.serviceId;let h={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:o},_=e.signerConstructor||Sm.SignatureV4;return new _(h)}):a=async l=>{l=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await Rr(e.region)(),properties:{}},l);let m=l.signingRegion,p=l.signingName;e.signingRegion=e.signingRegion||m,e.signingName=e.signingName||p||e.serviceId;let g={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:o},h=e.signerConstructor||Sm.SignatureV4;return new h(g)},Object.assign(e,{systemClockOffset:s,signingEscapePath:o,signer:a})},mb=pr});var gb=b(()=>{c();em();k0();L0();H0();hb()});var yb={};rt(yb,{AWSSDKSigV4Signer:()=>Zp,AwsSdkSigV4ASigner:()=>Bs,AwsSdkSigV4Signer:()=>Be,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Mr,NODE_SIGV4A_CONFIG_OPTIONS:()=>F0,getBearerTokenEnvKey:()=>uc,resolveAWSSDKSigV4Config:()=>mb,resolveAwsSdkSigV4AConfig:()=>U0,resolveAwsSdkSigV4Config:()=>pr,validateSigningProperties:()=>Ao});var Em=b(()=>{c();gb();rm()});function Br(e){return typeof Buffer<"u"?Buffer.alloc(e):new Uint8Array(e)}function yc(e){return e[_m]=!0,e}var _m,Sc=b(()=>{c();_m=Symbol("@smithy/core/cbor::tagSymbol")});function _b(e){ue=e,hr=new DataView(ue.buffer,ue.byteOffset,ue.byteLength)}function Ft(e,t){if(e>=t)throw new Error("unexpected end of (decode) payload.");let r=(ue[e]&224)>>5,n=ue[e]&31;switch(r){case 0:case 1:case 6:let o,s;if(n<24)o=n,s=1;else switch(n){case 24:case 25:case 26:case 27:let i=bb[n],a=i+1;if(s=a,t-e<a)throw new Error(`countLength ${i} greater than remaining buf len.`);let u=e+1;i===1?o=ue[u]:i===2?o=hr.getUint16(u):i===4?o=hr.getUint32(u):o=hr.getBigUint64(u);break;default:throw new Error(`unexpected minor value ${n}.`)}if(r===0)return Y=s,wm(o);if(r===1){let i;return typeof o=="bigint"?i=BigInt(-1)-o:i=-1-o,Y=s,wm(i)}else if(n===2||n===3){let i=Hs(e+s,t),a=BigInt(0),u=e+s+Y;for(let l=u;l<u+i;++l)a=a<<BigInt(8)|BigInt(ue[l]);return Y=s+Y+i,n===3?-a-BigInt(1):a}else if(n===4){let i=Ft(e+s,t),[a,u]=i,l=u<0?-1:1,m="0".repeat(Math.abs(a)+1)+String(BigInt(l)*BigInt(u)),p,g=u<0?"-":"";return p=a===0?m:m.slice(0,m.length+a)+"."+m.slice(a),p=p.replace(/^0+/g,""),p===""&&(p="0"),p[0]==="."&&(p="0"+p),p=g+p,Y=s+Y,Ip(p)}else{let i=Ft(e+s,t);return Y=s+Y,yc({tag:wm(o),value:i})}case 3:case 5:case 4:case 2:if(n===31)switch(r){case 3:return AF(e,t);case 5:return PF(e,t);case 4:return RF(e,t);case 2:return TF(e,t)}else switch(r){case 3:return CF(e,t);case 5:return IF(e,t);case 4:return xF(e,t);case 2:return xm(e,t)}default:return OF(e,t)}}function wb(e,t,r){return wF&&e.constructor?.name==="Buffer"?e.toString("utf-8",t,r):Sb?Sb.decode(e.subarray(t,r)):(0,Eb.toUtf8)(e.subarray(t,r))}function bF(e){let t=Number(e);return(t<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<t)&&console.warn(new Error(`@smithy/core/cbor - truncating BigInt(${e}) to ${t} with loss of precision.`)),t}function vF(e,t){let r=e>>7,n=(e&124)>>2,o=(e&3)<<8|t,s=r===0?1:-1,i,a;if(n===0){if(o===0)return 0;i=Math.pow(2,-14),a=0}else{if(n===31)return o===0?s*(1/0):NaN;i=Math.pow(2,n-15),a=1}return a+=o/1024,s*(i*a)}function Hs(e,t){let r=ue[e]&31;if(r<24)return Y=1,r;if(r===24||r===25||r===26||r===27){let n=bb[r];if(Y=n+1,t-e<Y)throw new Error(`countLength ${n} greater than remaining buf len.`);let o=e+1;return n===1?ue[o]:n===2?hr.getUint16(o):n===4?hr.getUint32(o):bF(hr.getBigUint64(o))}throw new Error(`unexpected minor value ${r}.`)}function CF(e,t){let r=Hs(e,t),n=Y;if(e+=n,t-e<r)throw new Error(`string len ${r} greater than remaining buf len.`);let o=wb(ue,e,e+r);return Y=n+r,o}function AF(e,t){e+=1;let r=[];for(let n=e;e<t;){if(ue[e]===255){let u=Br(r.length);return u.set(r,0),Y=e-n+2,wb(u,0,u.length)}let o=(ue[e]&224)>>5,s=ue[e]&31;if(o!==3)throw new Error(`unexpected major type ${o} in indefinite string.`);if(s===31)throw new Error("nested indefinite string.");let i=xm(e,t);e+=Y;for(let u=0;u<i.length;++u)r.push(i[u])}throw new Error("expected break marker.")}function xm(e,t){let r=Hs(e,t),n=Y;if(e+=n,t-e<r)throw new Error(`unstructured byte string len ${r} greater than remaining buf len.`);let o=ue.subarray(e,e+r);return Y=n+r,o}function TF(e,t){e+=1;let r=[];for(let n=e;e<t;){if(ue[e]===255){let u=Br(r.length);return u.set(r,0),Y=e-n+2,u}let o=(ue[e]&224)>>5,s=ue[e]&31;if(o!==2)throw new Error(`unexpected major type ${o} in indefinite string.`);if(s===31)throw new Error("nested indefinite string.");let i=xm(e,t);e+=Y;for(let u=0;u<i.length;++u)r.push(i[u])}throw new Error("expected break marker.")}function xF(e,t){let r=Hs(e,t),n=Y;e+=n;let o=e,s=Array(r);for(let i=0;i<r;++i){let a=Ft(e,t),u=Y;s[i]=a,e+=u}return Y=n+(e-o),s}function RF(e,t){e+=1;let r=[];for(let n=e;e<t;){if(ue[e]===255)return Y=e-n+2,r;let o=Ft(e,t);e+=Y,r.push(o)}throw new Error("expected break marker.")}function IF(e,t){let r=Hs(e,t),n=Y;e+=n;let o=e,s={};for(let i=0;i<r;++i){if(e>=t)throw new Error("unexpected end of map payload.");let a=(ue[e]&224)>>5;if(a!==3)throw new Error(`unexpected major type ${a} for map key at index ${e}.`);let u=Ft(e,t);e+=Y;let l=Ft(e,t);e+=Y,s[u]=l}return Y=n+(e-o),s}function PF(e,t){e+=1;let r=e,n={};for(;e<t;){if(e>=t)throw new Error("unexpected end of map payload.");if(ue[e]===255)return Y=e-r+2,n;let o=(ue[e]&224)>>5;if(o!==3)throw new Error(`unexpected major type ${o} for map key.`);let s=Ft(e,t);e+=Y;let i=Ft(e,t);e+=Y,n[s]=i}throw new Error("expected break marker.")}function OF(e,t){let r=ue[e]&31;switch(r){case 21:case 20:return Y=1,r===21;case 22:return Y=1,null;case 23:return Y=1,null;case 25:if(t-e<3)throw new Error("incomplete float16 at end of buf.");return Y=3,vF(ue[e+1],ue[e+2]);case 26:if(t-e<5)throw new Error("incomplete float32 at end of buf.");return Y=5,hr.getFloat32(e+1);case 27:if(t-e<9)throw new Error("incomplete float64 at end of buf.");return Y=9,hr.getFloat64(e+1);default:throw new Error(`unexpected minor value ${r}.`)}}function wm(e){if(typeof e=="number")return e;let t=Number(e);return Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:e}var Eb,_F,wF,ue,hr,Sb,Y,bb,vb=b(()=>{c();Ke();Eb=A(me());Sc();_F=typeof TextDecoder<"u",wF=typeof Buffer<"u",ue=Br(0),hr=new DataView(ue.buffer,ue.byteOffset,ue.byteLength),Sb=_F?new TextDecoder:null,Y=0;bb={24:1,25:2,26:4,27:8}});function Im(e){H.byteLength-B<e&&(B<16e6?_c(Math.max(H.byteLength*4,H.byteLength+e)):_c(H.byteLength+e+16e6))}function Pm(){let e=Br(B);return e.set(H.subarray(0,B),0),B=0,e}function _c(e){let t=H;H=Br(e),t&&(t.copy?t.copy(H,0,0,t.byteLength):H.set(t,0)),Sr=new DataView(H.buffer,H.byteOffset,H.byteLength)}function yr(e,t){t<24?H[B++]=e<<5|t:t<256?(H[B++]=e<<5|24,H[B++]=t):t<65536?(H[B++]=e<<5|25,Sr.setUint16(B,t),B+=2):t<2**32?(H[B++]=e<<5|26,Sr.setUint32(B,t),B+=4):(H[B++]=e<<5|27,Sr.setBigUint64(B,typeof t=="bigint"?t:BigInt(t)),B+=8)}function Tb(e){let t=[e];for(;t.length;){let r=t.pop();if(Im(typeof r=="string"?r.length*4:64),typeof r=="string"){if(Cb)yr(3,Buffer.byteLength(r)),B+=H.write(r,B);else{let n=(0,Ab.fromUtf8)(r);yr(3,n.byteLength),H.set(n,B),B+=n.byteLength}continue}else if(typeof r=="number"){if(Number.isInteger(r)){let n=r>=0,o=n?0:1,s=n?r:-r-1;s<24?H[B++]=o<<5|s:s<256?(H[B++]=o<<5|24,H[B++]=s):s<65536?(H[B++]=o<<5|25,H[B++]=s>>8,H[B++]=s):s<4294967296?(H[B++]=o<<5|26,Sr.setUint32(B,s),B+=4):(H[B++]=o<<5|27,Sr.setBigUint64(B,BigInt(s)),B+=8);continue}H[B++]=251,Sr.setFloat64(B,r),B+=8;continue}else if(typeof r=="bigint"){let n=r>=0,o=n?0:1,s=n?r:-r-BigInt(1),i=Number(s);if(i<24)H[B++]=o<<5|i;else if(i<256)H[B++]=o<<5|24,H[B++]=i;else if(i<65536)H[B++]=o<<5|25,H[B++]=i>>8,H[B++]=i&255;else if(i<4294967296)H[B++]=o<<5|26,Sr.setUint32(B,i),B+=4;else if(s<BigInt("18446744073709551616"))H[B++]=o<<5|27,Sr.setBigUint64(B,s),B+=8;else{let a=s.toString(2),u=new Uint8Array(Math.ceil(a.length/8)),l=s,m=0;for(;u.byteLength-++m>=0;)u[u.byteLength-m]=Number(l&BigInt(255)),l>>=BigInt(8);Im(u.byteLength*2),H[B++]=n?194:195,Cb?yr(2,Buffer.byteLength(u)):yr(2,u.byteLength),H.set(u,B),B+=u.byteLength}continue}else if(r===null){H[B++]=246;continue}else if(typeof r=="boolean"){H[B++]=224|(r?21:20);continue}else{if(typeof r>"u")throw new Error("@smithy/core/cbor: client may not serialize undefined value.");if(Array.isArray(r)){for(let n=r.length-1;n>=0;--n)t.push(r[n]);yr(4,r.length);continue}else if(typeof r.byteLength=="number"){Im(r.length*2),yr(2,r.length),H.set(r,B),B+=r.byteLength;continue}else if(typeof r=="object"){if(r instanceof pe){let o=r.string.indexOf("."),s=o===-1?0:o-r.string.length+1,i=BigInt(r.string.replace(".",""));H[B++]=196,t.push(i),t.push(s),yr(4,2);continue}if(r[_m])if("tag"in r&&"value"in r){t.push(r.value),yr(6,r.tag);continue}else throw new Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(r));let n=Object.keys(r);for(let o=n.length-1;o>=0;--o){let s=n[o];t.push(r[s]),t.push(s)}yr(5,n.length);continue}}throw new Error(`data type ${r?.constructor?.name??typeof r} not compatible for encoding.`)}}var Ab,Cb,NF,H,Sr,B,xb=b(()=>{c();Ke();Ab=A(me());Sc();Cb=typeof Buffer<"u",NF=2048,H=Br(NF),Sr=new DataView(H.buffer,H.byteOffset,H.byteLength),B=0});var Om,Rb=b(()=>{c();vb();xb();Om={deserialize(e){return _b(e),Ft(0,e.length)},serialize(e){try{return Tb(e),Pm()}catch(t){throw Pm(),t}},resizeEncodingBuffer(e){_c(e)}}});var wc,bc,vc=b(()=>{c();Sc();wc=e=>yc({tag:1,value:e.getTime()/1e3}),bc=(e,t)=>{let r=o=>{let s=o;return typeof s=="number"&&(s=s.toString()),s.indexOf(",")>=0&&(s=s.split(",")[0]),s.indexOf(":")>=0&&(s=s.split(":")[0]),s.indexOf("#")>=0&&(s=s.split("#")[1]),s};if(t.__type!==void 0)return r(t.__type);let n=Object.keys(t).find(o=>o.toLowerCase()==="code");if(n&&t[n]!==void 0)return r(t[n])}});var km,Cc,Nm,Dm,Mm=b(()=>{c();nt();ne();Ke();Ke();km=A(nc());Rb();vc();Cc=class extends Ye{createSerializer(){let t=new Nm;return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new Dm;return t.setSerdeContext(this.serdeContext),t}},Nm=class extends Ye{value;write(t,r){this.value=this.serialize(t,r)}serialize(t,r){let n=$.of(t);if(r==null)return n.isIdempotencyToken()?(0,mt.v4)():r;if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??km.fromBase64)(r):r;if(n.isTimestampSchema())return typeof r=="number"||typeof r=="bigint"?wc(new Date(Number(r)/1e3|0)):wc(r);if(typeof r=="function"||typeof r=="object"){let o=r;if(n.isListSchema()&&Array.isArray(o)){let i=!!n.getMergedTraits().sparse,a=[],u=0;for(let l of o){let m=this.serialize(n.getValueSchema(),l);(m!=null||i)&&(a[u++]=m)}return a}if(o instanceof Date)return wc(o);let s={};if(n.isMapSchema()){let i=!!n.getMergedTraits().sparse;for(let a of Object.keys(o)){let u=this.serialize(n.getValueSchema(),o[a]);(u!=null||i)&&(s[a]=u)}}else if(n.isStructSchema()){for(let[a,u]of n.structIterator()){let l=this.serialize(u,o[a]);l!=null&&(s[a]=l)}if(n.isUnionSchema()&&Array.isArray(o.$unknown)){let[a,u]=o.$unknown;s[a]=u}else if(typeof o.__type=="string")for(let[a,u]of Object.entries(o))a in s||(s[a]=this.serialize(15,u))}else if(n.isDocumentSchema())for(let i of Object.keys(o))s[i]=this.serialize(n.getValueSchema(),o[i]);else if(n.isBigDecimalSchema())return o;return s}return r}flush(){let t=Om.serialize(this.value);return this.value=void 0,t}},Dm=class extends Ye{read(t,r){let n=Om.deserialize(r);return this.readValue(t,n)}readValue(t,r){let n=$.of(t);if(n.isTimestampSchema()){if(typeof r=="number")return wo(r);if(typeof r=="object"&&r.tag===1&&"value"in r)return wo(r.value)}if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??km.fromBase64)(r):r;if(typeof r>"u"||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="bigint"||typeof r=="symbol")return r;if(typeof r=="object"){if(r===null)return null;if("byteLength"in r||r instanceof Date||n.isDocumentSchema())return r;if(n.isListSchema()){let s=[],i=n.getValueSchema(),a=!!n.getMergedTraits().sparse;for(let u of r){let l=this.readValue(i,u);(l!=null||a)&&s.push(l)}return s}let o={};if(n.isMapSchema()){let s=!!n.getMergedTraits().sparse,i=n.getValueSchema();for(let a of Object.keys(r)){let u=this.readValue(i,r[a]);(u!=null||s)&&(o[a]=u)}}else if(n.isStructSchema()){let s=n.isUnionSchema(),i;s&&(i=new Set(Object.keys(r).filter(a=>a!=="__type")));for(let[a,u]of n.structIterator())s&&i.delete(a),r[a]!=null&&(o[a]=this.readValue(u,r[a]));if(s&&i?.size===1&&Object.keys(o).length===0){let a=i.values().next().value;o.$unknown=[a,r[a]]}else if(typeof r.__type=="string")for(let[a,u]of Object.entries(r))a in o||(o[a]=u)}else if(r instanceof pe)return r;return o}else return r}}});var Ib,Ac,Pb=b(()=>{c();nt();ne();Ib=A(ze());Mm();vc();Ac=class extends cr{codec=new Cc;serializer=this.codec.createSerializer();deserializer=this.codec.createDeserializer();constructor({defaultNamespace:t}){super({defaultNamespace:t})}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n);if(Object.assign(o.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),Ct(t.input)==="unit")delete o.body,delete o.headers["content-type"];else{o.body||(this.serializer.write(15,{}),o.body=this.serializer.flush());try{o.headers["content-length"]=String(o.body.byteLength)}catch{}}let{service:s,operation:i}=(0,Ib.getSmithyContext)(n),a=`/service/${s}/operation/${i}`;return o.path.endsWith("/")?o.path+=a.slice(1):o.path+=a,o}async deserializeResponse(t,r,n){return super.deserializeResponse(t,r,n)}async handleError(t,r,n,o,s){let i=bc(n,o)??"Unknown",a=this.options.defaultNamespace;i.includes("#")&&([a]=i.split("#"));let u={$metadata:s,$fault:n.statusCode<=500?"client":"server"},l=F.for(a),m;try{m=l.getSchema(i)}catch{o.Message&&(o.message=o.Message);let P=F.for("smithy.ts.sdk.synthetic."+a),D=P.getBaseException();if(D){let M=P.getErrorCtor(D);throw Object.assign(new M({name:i}),u,o)}throw Object.assign(new Error(i),u,o)}let p=$.of(m),g=l.getErrorCtor(m),h=o.message??o.Message??"Unknown",_=new g(h),T={};for(let[I,P]of p.structIterator())T[I]=this.deserializer.readValue(P,o[I]);throw Object.assign(_,u,{$fault:p.getMergedTraits().error,message:h},T)}getDefaultContentType(){return"application/cbor"}}});var Ob=b(()=>{c();vc();Pb();Mm()});var Mb=x(kb=>{"use strict";c();var Ln=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let n of t)r.push(n);return r},Hr=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,$m=()=>{let e=[],t=[],r=!1,n=new Set,o=p=>p.sort((g,h)=>Nb[h.step]-Nb[g.step]||Db[h.priority||"normal"]-Db[g.priority||"normal"]),s=p=>{let g=!1,h=_=>{let T=Ln(_.name,_.aliases);if(T.includes(p)){g=!0;for(let I of T)n.delete(I);return!1}return!0};return e=e.filter(h),t=t.filter(h),g},i=p=>{let g=!1,h=_=>{if(_.middleware===p){g=!0;for(let T of Ln(_.name,_.aliases))n.delete(T);return!1}return!0};return e=e.filter(h),t=t.filter(h),g},a=p=>(e.forEach(g=>{p.add(g.middleware,{...g})}),t.forEach(g=>{p.addRelativeTo(g.middleware,{...g})}),p.identifyOnResolve?.(m.identifyOnResolve()),p),u=p=>{let g=[];return p.before.forEach(h=>{h.before.length===0&&h.after.length===0?g.push(h):g.push(...u(h))}),g.push(p),p.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?g.push(h):g.push(...u(h))}),g},l=(p=!1)=>{let g=[],h=[],_={};return e.forEach(I=>{let P={...I,before:[],after:[]};for(let D of Ln(P.name,P.aliases))_[D]=P;g.push(P)}),t.forEach(I=>{let P={...I,before:[],after:[]};for(let D of Ln(P.name,P.aliases))_[D]=P;h.push(P)}),h.forEach(I=>{if(I.toMiddleware){let P=_[I.toMiddleware];if(P===void 0){if(p)return;throw new Error(`${I.toMiddleware} is not found when adding ${Hr(I.name,I.aliases)} middleware ${I.relation} ${I.toMiddleware}`)}I.relation==="after"&&P.after.push(I),I.relation==="before"&&P.before.push(I)}}),o(g).map(u).reduce((I,P)=>(I.push(...P),I),[])},m={add:(p,g={})=>{let{name:h,override:_,aliases:T}=g,I={step:"initialize",priority:"normal",middleware:p,...g},P=Ln(h,T);if(P.length>0){if(P.some(D=>n.has(D))){if(!_)throw new Error(`Duplicate middleware name '${Hr(h,T)}'`);for(let D of P){let M=e.findIndex(j=>j.name===D||j.aliases?.some(Q=>Q===D));if(M===-1)continue;let L=e[M];if(L.step!==I.step||I.priority!==L.priority)throw new Error(`"${Hr(L.name,L.aliases)}" middleware with ${L.priority} priority in ${L.step} step cannot be overridden by "${Hr(h,T)}" middleware with ${I.priority} priority in ${I.step} step.`);e.splice(M,1)}}for(let D of P)n.add(D)}e.push(I)},addRelativeTo:(p,g)=>{let{name:h,override:_,aliases:T}=g,I={middleware:p,...g},P=Ln(h,T);if(P.length>0){if(P.some(D=>n.has(D))){if(!_)throw new Error(`Duplicate middleware name '${Hr(h,T)}'`);for(let D of P){let M=t.findIndex(j=>j.name===D||j.aliases?.some(Q=>Q===D));if(M===-1)continue;let L=t[M];if(L.toMiddleware!==I.toMiddleware||L.relation!==I.relation)throw new Error(`"${Hr(L.name,L.aliases)}" middleware ${L.relation} "${L.toMiddleware}" middleware cannot be overridden by "${Hr(h,T)}" middleware ${I.relation} "${I.toMiddleware}" middleware.`);t.splice(M,1)}}for(let D of P)n.add(D)}t.push(I)},clone:()=>a($m()),use:p=>{p.applyToStack(m)},remove:p=>typeof p=="string"?s(p):i(p),removeByTag:p=>{let g=!1,h=_=>{let{tags:T,name:I,aliases:P}=_;if(T&&T.includes(p)){let D=Ln(I,P);for(let M of D)n.delete(M);return g=!0,!1}return!0};return e=e.filter(h),t=t.filter(h),g},concat:p=>{let g=a($m());return g.use(p),g.identifyOnResolve(r||g.identifyOnResolve()||(p.identifyOnResolve?.()??!1)),g},applyToStack:a,identify:()=>l(!0).map(p=>{let g=p.step??p.relation+" "+p.toMiddleware;return Hr(p.name,p.aliases)+" - "+g}),identifyOnResolve(p){return typeof p=="boolean"&&(r=p),r},resolve:(p,g)=>{for(let h of l().map(_=>_.middleware).reverse())p=h(p,g);return r&&console.log(m.identify()),p}};return m},Nb={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Db={high:3,normal:2,low:1};kb.constructStack=$m});var X=x(ce=>{"use strict";c();var Lb=Mb(),zm=(nt(),W(Uw)),Lm=Tr(),DF=(ne(),W(ja)),$b=(Ke(),W(ww)),Um=class{config;middlewareStack=Lb.constructStack();initConfig;handlers;constructor(t){this.config=t;let{protocol:r,protocolSettings:n}=t;n&&typeof r=="function"&&(t.protocol=new r(n))}send(t,r,n){let o=typeof r!="function"?r:void 0,s=typeof r=="function"?r:n,i=o===void 0&&this.config.cacheMiddleware===!0,a;if(i){this.handlers||(this.handlers=new WeakMap);let u=this.handlers;u.has(t.constructor)?a=u.get(t.constructor):(a=t.resolveMiddleware(this.middlewareStack,this.config,o),u.set(t.constructor,a))}else delete this.handlers,a=t.resolveMiddleware(this.middlewareStack,this.config,o);if(s)a(t).then(u=>s(null,u.output),u=>s(u)).catch(()=>{});else return a(t).then(u=>u.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},Bm="***SensitiveInformation***";function Fm(e,t){if(t==null)return t;let r=DF.NormalizedSchema.of(e);if(r.getMergedTraits().sensitive)return Bm;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return Bm}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return Bm}else if(r.isStructSchema()&&typeof t=="object"){let n=t,o={};for(let[s,i]of r.structIterator())n[s]!=null&&(o[s]=Fm(i,n[s]));return o}return t}var Tc=class{middlewareStack=Lb.constructStack();schema;static classBuilder(){return new Hm}resolveMiddlewareWithContext(t,r,n,{middlewareFn:o,clientName:s,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:u,smithyContext:l,additionalContext:m,CommandCtor:p}){for(let I of o.bind(this)(p,t,r,n))this.middlewareStack.use(I);let g=t.concat(this.middlewareStack),{logger:h}=r,_={logger:h,clientName:s,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:u,[Lm.SMITHY_CONTEXT_KEY]:{commandInstance:this,...l},...m},{requestHandler:T}=r;return g.resolve(I=>T.handle(I.request,n||{}),_)}},Hm=class{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,n={}){return this._smithyContext={service:t,operation:r,...n},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=n=>n,r=n=>n){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}sc(t){return this._operationSchema=t,this._smithyContext.operationSchema=t,this}build(){let t=this,r;return r=class extends Tc{input;static getEndpointParameterInstructions(){return t._ep}constructor(...[n]){super(),this.input=n??{},t._init(this),this.schema=t._operationSchema}resolveMiddleware(n,o,s){let i=t._operationSchema,a=i?.[4]??i?.input,u=i?.[5]??i?.output;return this.resolveMiddlewareWithContext(n,o,s,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog??(i?Fm.bind(null,a):l=>l),outputFilterSensitiveLog:t._outputFilterSensitiveLog??(i?Fm.bind(null,u):l=>l),smithyContext:t._smithyContext,additionalContext:t._additionalContext})}serialize=t._serializer;deserialize=t._deserializer}}},kF="***SensitiveInformation***",MF=(e,t)=>{for(let r of Object.keys(e)){let n=e[r],o=async function(i,a,u){let l=new n(i);if(typeof a=="function")this.send(l,a);else if(typeof u=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(l,a||{},u)}else return this.send(l,a)},s=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[s]=o}},qm=class e extends Error{$fault;$response;$retryable;$metadata;constructor(t){super(t.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}static isInstance(t){if(!t)return!1;let r=t;return e.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](t){if(!t)return!1;let r=t;return this===e?e.isInstance(t):e.isInstance(t)?r.name&&this.name?this.prototype.isPrototypeOf(t)||r.name===this.name:this.prototype.isPrototypeOf(t):!1}},Ub=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},Fb=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let o=BF(e),s=o.httpStatusCode?o.httpStatusCode+"":void 0,i=new r({name:t?.code||t?.Code||n||s||"UnknownError",$fault:"client",$metadata:o});throw Ub(i,t)},$F=e=>({output:t,parsedBody:r,errorCode:n})=>{Fb({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},BF=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),LF=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},Bb=!1,UF=e=>{e&&!Bb&&parseInt(e.substring(1,e.indexOf(".")))<16&&(Bb=!0)},FF=e=>{let t=[];for(let r in Lm.AlgorithmId){let n=Lm.AlgorithmId[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},HF=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},qF=e=>({setRetryStrategy(t){e.retryStrategy=t},retryStrategy(){return e.retryStrategy}}),jF=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t},Hb=e=>Object.assign(FF(e),qF(e)),GF=Hb,zF=e=>Object.assign(HF(e),jF(e)),VF=e=>Array.isArray(e)?e:[e],qb=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=qb(e[r]));return e},WF=e=>e!=null,jm=class{trace(){}debug(){}info(){}warn(){}error(){}};function jb(e,t,r){let n,o,s;if(typeof t>"u"&&typeof r>"u")n={},s=e;else{if(n=e,typeof t=="function")return o=t,s=r,XF(n,o,s);s=t}for(let i of Object.keys(s)){if(!Array.isArray(s[i])){n[i]=s[i];continue}Gb(n,null,s,i)}return n}var KF=e=>{let t={};for(let[r,n]of Object.entries(e||{}))t[r]=[,n];return t},YF=(e,t)=>{let r={};for(let n in t)Gb(r,e,t,n);return r},XF=(e,t,r)=>jb(e,Object.entries(r).reduce((n,[o,s])=>(Array.isArray(s)?n[o]=s:typeof s=="function"?n[o]=[t,s()]:n[o]=[t,s],n),{})),Gb=(e,t,r,n)=>{if(t!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=QF,u=JF,l=n]=i;(typeof a=="function"&&a(t[l])||typeof a!="function"&&a)&&(e[n]=u(t[l]));return}let[o,s]=r[n];if(typeof s=="function"){let i,a=o===void 0&&(i=s())!=null,u=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;a?e[n]=i:u&&(e[n]=s())}else{let i=o===void 0&&s!=null,a=typeof o=="function"&&!!o(s)||typeof o!="function"&&!!o;(i||a)&&(e[n]=s)}},QF=e=>e!=null,JF=e=>e,ZF=e=>{if(e!==e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}},e2=e=>e.toISOString().replace(".000Z","Z"),Gm=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(Gm);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=Gm(e[r]));return t}return e};Object.defineProperty(ce,"collectBody",{enumerable:!0,get:function(){return zm.collectBody}});Object.defineProperty(ce,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return zm.extendedEncodeURIComponent}});Object.defineProperty(ce,"resolvedPath",{enumerable:!0,get:function(){return zm.resolvedPath}});ce.Client=Um;ce.Command=Tc;ce.NoOpLogger=jm;ce.SENSITIVE_STRING=kF;ce.ServiceException=qm;ce._json=Gm;ce.convertMap=KF;ce.createAggregatedClient=MF;ce.decorateServiceException=Ub;ce.emitWarningIfUnsupportedVersion=UF;ce.getArrayIfSingleItem=VF;ce.getDefaultClientConfiguration=GF;ce.getDefaultExtensionConfiguration=Hb;ce.getValueFromTextNode=qb;ce.isSerializableHeaderValue=WF;ce.loadConfigsForDefaultMode=LF;ce.map=jb;ce.resolveDefaultRuntimeConfig=zF;ce.serializeDateTime=e2;ce.serializeFloat=ZF;ce.take=YF;ce.throwDefaultError=Fb;ce.withBaseException=$F;Object.keys($b).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ce,e)&&Object.defineProperty(ce,e,{enumerable:!0,get:function(){return $b[e]}})})});var Vm,gt,Io=b(()=>{c();ne();Vm=A(X()),gt=class{queryCompat;constructor(t=!1){this.queryCompat=t}resolveRestContentType(t,r){let n=r.getMemberSchemas(),o=Object.values(n).find(s=>!!s.getMergedTraits().httpPayload);if(o){let s=o.getMergedTraits().mediaType;return s||(o.isStringSchema()?"text/plain":o.isBlobSchema()?"application/octet-stream":t)}else if(!r.isUnitSchema()&&Object.values(n).find(i=>{let{httpQuery:a,httpQueryParams:u,httpHeader:l,httpLabel:m,httpPrefixHeaders:p}=i.getMergedTraits();return!a&&!u&&!l&&!m&&p===void 0}))return t}async getErrorSchemaOrThrowBaseException(t,r,n,o,s,i){let a=r,u=t;t.includes("#")&&([a,u]=t.split("#"));let l={$metadata:s,$fault:n.statusCode<500?"client":"server"},m=F.for(a);try{return{errorSchema:i?.(m,u)??m.getSchema(t),errorMetadata:l}}catch{o.message=o.message??o.Message??"UnknownError";let g=F.for("smithy.ts.sdk.synthetic."+a),h=g.getBaseException();if(h){let _=g.getErrorCtor(h)??Error;throw this.decorateServiceException(Object.assign(new _({name:u}),l),o)}throw this.decorateServiceException(Object.assign(new Error(u),l),o)}}decorateServiceException(t,r={}){if(this.queryCompat){let n=t.Message??r.Message,o=(0,Vm.decorateServiceException)(t,r);n&&(o.message=n),o.Error={...o.Error,Type:o.Error.Type,Code:o.Error.Code,Message:o.Error.message??o.Error.Message??n};let s=o.$metadata.requestId;return s&&(o.RequestId=s),o}return(0,Vm.decorateServiceException)(t,r)}setQueryCompatError(t,r){let n=r.headers?.["x-amzn-query-error"];if(t!==void 0&&n!=null){let[o,s]=n.split(";"),i=Object.entries(t),a={Code:o,Type:s};Object.assign(t,a);for(let[u,l]of i)a[u==="message"?"Message":u]=l;delete a.__type,t.Error=a}}queryCompatOutput(t,r){t.Error&&(r.Error=t.Error),t.Type&&(r.Type=t.Type),t.Code&&(r.Code=t.Code)}findQueryCompatibleError(t,r){try{return t.getSchema(r)}catch{return t.find(o=>$.of(o).getMergedTraits().awsQueryError?.[0]===r)}}}});var xc,zb=b(()=>{c();Ob();ne();Io();xc=class extends Ac{awsQueryCompatible;mixin;constructor({defaultNamespace:t,awsQueryCompatible:r}){super({defaultNamespace:t}),this.awsQueryCompatible=!!r,this.mixin=new gt(this.awsQueryCompatible)}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n);return this.awsQueryCompatible&&(o.headers["x-amzn-query-mode"]="true"),o}async handleError(t,r,n,o,s){this.awsQueryCompatible&&this.mixin.setQueryCompatError(o,n);let i=(()=>{let _=n.headers["x-amzn-query-error"];return _&&this.awsQueryCompatible?_.split(";")[0]:bc(n,o)??"Unknown"})(),{errorSchema:a,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,o,s,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),l=$.of(a),m=o.message??o.Message??"Unknown",p=F.for(a[1]).getErrorCtor(a)??Error,g=new p(m),h={};for(let[_,T]of l.structIterator())o[_]!=null&&(h[_]=this.deserializer.readValue(T,o[_]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(o,h),this.mixin.decorateServiceException(Object.assign(g,u,{$fault:l.getMergedTraits().error,message:m},h),o)}}});var Vb,Wb,Kb,Yb=b(()=>{c();Vb=e=>{if(e==null)return e;if(typeof e=="number"||typeof e=="bigint"){let t=new Error(`Received number ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}if(typeof e=="boolean"){let t=new Error(`Received boolean ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}return e},Wb=e=>{if(e==null)return e;if(typeof e=="string"){let t=e.toLowerCase();if(e!==""&&t!=="false"&&t!=="true"){let r=new Error(`Received string "${e}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return e!==""&&t!=="false"}return e},Kb=e=>{if(e==null)return e;if(typeof e=="string"){let t=Number(e);if(t.toString()!==e){let r=new Error(`Received string "${e}" where a number was expected.`);return r.name="Warning",console.warn(r),e}return t}return e}});var Ue,qr=b(()=>{c();Ue=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});var Xb=x(Rc=>{"use strict";c();Object.defineProperty(Rc,"__esModule",{value:!0});Rc.fromBase64=void 0;var t2=Ae(),r2=/^[A-Za-z0-9+/]*={0,2}$/,n2=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!r2.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,t2.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};Rc.fromBase64=n2});var Qb=x(Ic=>{"use strict";c();Object.defineProperty(Ic,"__esModule",{value:!0});Ic.toBase64=void 0;var o2=Ae(),s2=me(),i2=e=>{let t;if(typeof e=="string"?t=(0,s2.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,o2.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};Ic.toBase64=i2});var js=x(qs=>{"use strict";c();var Jb=Xb(),Zb=Qb();Object.keys(Jb).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(qs,e)&&Object.defineProperty(qs,e,{enumerable:!0,get:function(){return Jb[e]}})});Object.keys(Zb).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(qs,e)&&Object.defineProperty(qs,e,{enumerable:!0,get:function(){return Zb[e]}})})});function*Po(e,t){if(e.isUnitSchema())return;let r=e.getSchema();for(let n=0;n<r[4].length;++n){let o=r[4][n],s=r[5][n],i=new $([s,0],o);!(o in t)&&!i.isIdempotencyToken()||(yield[o,i])}}function*ev(e,t,r){if(e.isUnitSchema())return;let n=e.getSchema(),o=Object.keys(t).filter(s=>s!=="__type").length;for(let s=0;s<n[4].length&&o!==0;++s){let i=n[4][s],a=n[5][s],u=new $([a,0],i),l=i;r&&(l=u.getMergedTraits()[r]??i),l in t&&(yield[i,u],o-=1)}}var Gs=b(()=>{c();ne()});var Oo,Wm=b(()=>{c();Oo=class{from;to;keys;constructor(t,r){this.from=t,this.to=r,this.keys=new Set(Object.keys(this.from).filter(n=>n!=="__type"))}mark(t){this.keys.delete(t)}hasUnknown(){return this.keys.size===1&&Object.keys(this.to).length===0}writeUnknown(){if(this.hasUnknown()){let t=this.keys.values().next().value,r=this.from[t];this.to.$unknown=[t,r]}}}});function tv(e,t,r){if(r?.source){let n=r.source;if(typeof t=="number"&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||n!==String(t)))return n.includes(".")?new pe(n,"bigDecimal"):BigInt(n)}return t}var rv=b(()=>{c();Ke()});var nv,ov,Pc,Km=b(()=>{c();nv=A(X()),ov=A(me()),Pc=(e,t)=>(0,nv.collectBody)(e,t).then(r=>(t?.utf8Encoder??ov.toUtf8)(r))});var zs,sv,No,Vs=b(()=>{c();Km();zs=(e,t)=>Pc(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),sv=async(e,t)=>{let r=await zs(e,t);return r.message=r.message??r.Message,r},No=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t&&typeof t=="object"){let s=r(t,"code");if(s&&t[s]!==void 0)return n(t[s]);if(t.__type!==void 0)return n(t.__type)}}});var iv,Do,Ym=b(()=>{c();nt();ne();Ke();iv=A(js());qr();Gs();Wm();rv();Vs();Do=class extends Ue{settings;constructor(t){super(),this.settings=t}async read(t,r){return this._read(t,typeof r=="string"?JSON.parse(r,tv):await zs(r,this.serdeContext))}readObject(t,r){return this._read(t,r)}_read(t,r){let n=r!==null&&typeof r=="object",o=$.of(t);if(n){if(o.isStructSchema()){let i=r,a=o.isUnionSchema(),u={},l,{jsonName:m}=this.settings;m&&(l={});let p;a&&(p=new Oo(i,u));for(let[g,h]of ev(o,i,m?"jsonName":!1)){let _=g;m&&(_=h.getMergedTraits().jsonName??_,l[_]=g),a&&p.mark(_),i[_]!=null&&(u[g]=this._read(h,i[_]))}if(a)p.writeUnknown();else if(typeof i.__type=="string")for(let[g,h]of Object.entries(i)){let _=m?l[g]??g:g;_ in u||(u[_]=h)}return u}if(Array.isArray(r)&&o.isListSchema()){let i=o.getValueSchema(),a=[],u=!!o.getMergedTraits().sparse;for(let l of r)(u||l!=null)&&a.push(this._read(i,l));return a}if(o.isMapSchema()){let i=o.getValueSchema(),a={},u=!!o.getMergedTraits().sparse;for(let[l,m]of Object.entries(r))(u||m!=null)&&(a[l]=this._read(i,m));return a}}if(o.isBlobSchema()&&typeof r=="string")return(0,iv.fromBase64)(r);let s=o.getMergedTraits().mediaType;if(o.isStringSchema()&&typeof r=="string"&&s)return s==="application/json"||s.endsWith("+json")?We.from(r):r;if(o.isTimestampSchema()&&r!=null)switch(ct(o,this.settings)){case 5:return hp(r);case 6:return gp(r);case 7:return yp(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(o.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(o.isBigDecimalSchema()&&r!=null){if(r instanceof pe)return r;let i=r;return i.type==="bigDecimal"&&"string"in i?new pe(i.string,i.type):new pe(String(r),"bigDecimal")}if(o.isNumericSchema()&&typeof r=="string"){switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}return r}if(o.isDocumentSchema())if(n){let i=Array.isArray(r)?[]:{};for(let[a,u]of Object.entries(r))u instanceof pe?i[a]=u:i[a]=this._read(o,u);return i}else return structuredClone(r);return r}}});var av,Oc,cv=b(()=>{c();Ke();av="\u039D",Oc=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof pe){let n=`${av+"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){let n=r.toString(),o=`${av+"b"+this.counter++}_`+n;return this.values.set(`"${o}"`,n),o}return r}}replaceInJson(t){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(let[r,n]of this.values)t=t.replace(r,n);return t}}});var Xm,ko,Qm=b(()=>{c();nt();ne();Ke();Xm=A(js());qr();Gs();cv();ko=class extends Ue{settings;buffer;useReplacer=!1;rootSchema;constructor(t){super(),this.settings=t}write(t,r){this.rootSchema=$.of(t),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(t,r){this.write(t,r),typeof this.buffer=="object"&&(this.buffer.__type=$.of(t).getName(!0))}flush(){let{rootSchema:t,useReplacer:r}=this;if(this.rootSchema=void 0,this.useReplacer=!1,t?.isStructSchema()||t?.isDocumentSchema()){if(!r)return JSON.stringify(this.buffer);let n=new Oc;return n.replaceInJson(JSON.stringify(this.buffer,n.createReplacer(),0))}return this.buffer}_write(t,r,n){let o=r!==null&&typeof r=="object",s=$.of(t);if(o){if(s.isStructSchema()){let i=r,a={},{jsonName:u}=this.settings,l;u&&(l={});for(let[m,p]of Po(s,i)){let g=this._write(p,i[m],s);if(g!==void 0){let h=m;u&&(h=p.getMergedTraits().jsonName??m,l[m]=h),a[h]=g}}if(s.isUnionSchema()&&Object.keys(a).length===0){let{$unknown:m}=i;if(Array.isArray(m)){let[p,g]=m;a[p]=this._write(15,g)}}else if(typeof i.__type=="string")for(let[m,p]of Object.entries(i)){let g=u?l[m]??m:m;g in a||(a[g]=this._write(15,p))}return a}if(Array.isArray(r)&&s.isListSchema()){let i=s.getValueSchema(),a=[],u=!!s.getMergedTraits().sparse;for(let l of r)(u||l!=null)&&a.push(this._write(i,l));return a}if(s.isMapSchema()){let i=s.getValueSchema(),a={},u=!!s.getMergedTraits().sparse;for(let[l,m]of Object.entries(r))(u||m!=null)&&(a[l]=this._write(i,m));return a}if(r instanceof Uint8Array&&(s.isBlobSchema()||s.isDocumentSchema()))return s===this.rootSchema?r:(this.serdeContext?.base64Encoder??Xm.toBase64)(r);if(r instanceof Date&&(s.isTimestampSchema()||s.isDocumentSchema()))switch(ct(s,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return Os(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}r instanceof pe&&(this.useReplacer=!0)}if(!(r===null&&n?.isStructSchema())){if(s.isStringSchema()){if(typeof r>"u"&&s.isIdempotencyToken())return(0,mt.v4)();let i=s.getMergedTraits().mediaType;return r!=null&&i&&(i==="application/json"||i.endsWith("+json"))?We.from(r):r}if(typeof r=="number"&&s.isNumericSchema())return Math.abs(r)===1/0||isNaN(r)?String(r):r;if(typeof r=="string"&&s.isBlobSchema())return s===this.rootSchema?r:(this.serdeContext?.base64Encoder??Xm.toBase64)(r);if(typeof r=="bigint"&&(this.useReplacer=!0),s.isDocumentSchema())if(o){let i=Array.isArray(r)?[]:{};for(let[a,u]of Object.entries(r))u instanceof pe?(this.useReplacer=!0,i[a]=u):i[a]=this._write(s,u);return i}else return structuredClone(r);return r}}}});var jr,Nc=b(()=>{c();qr();Ym();Qm();jr=class extends Ue{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new ko(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new Do(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var Gr,Dc=b(()=>{c();nt();ne();Io();Nc();Vs();Gr=class extends cr{serializer;deserializer;serviceTarget;codec;mixin;awsQueryCompatible;constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n,jsonCodec:o}){super({defaultNamespace:t}),this.serviceTarget=r,this.codec=o??new jr({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!n,this.mixin=new gt(this.awsQueryCompatible)}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n);return o.path.endsWith("/")||(o.path+="/"),Object.assign(o.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${t.name}`}),this.awsQueryCompatible&&(o.headers["x-amzn-query-mode"]="true"),(Ct(t.input)==="unit"||!o.body)&&(o.body="{}"),o}getPayloadCodec(){return this.codec}async handleError(t,r,n,o,s){this.awsQueryCompatible&&this.mixin.setQueryCompatError(o,n);let i=No(n,o)??"Unknown",{errorSchema:a,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,o,s,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),l=$.of(a),m=o.message??o.Message??"Unknown",p=F.for(a[1]).getErrorCtor(a)??Error,g=new p(m),h={};for(let[_,T]of l.structIterator())o[_]!=null&&(h[_]=this.codec.createDeserializer().readObject(T,o[_]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(o,h),this.mixin.decorateServiceException(Object.assign(g,u,{$fault:l.getMergedTraits().error,message:m},h),o)}}});var kc,uv=b(()=>{c();Dc();kc=class extends Gr{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n,jsonCodec:o}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n,jsonCodec:o})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var Mc,lv=b(()=>{c();Dc();Mc=class extends Gr{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n,jsonCodec:o}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n,jsonCodec:o})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var zr,dv=b(()=>{c();nt();ne();Io();Nc();Vs();zr=class extends Pn{serializer;deserializer;codec;mixin=new gt;constructor({defaultNamespace:t}){super({defaultNamespace:t});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new jr(r),this.serializer=new Dn(this.codec.createSerializer(),r),this.deserializer=new Nn(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(t){this.codec.setSerdeContext(t),super.setSerdeContext(t)}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n),s=$.of(t.input);if(!o.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),s);i&&(o.headers["content-type"]=i)}return o.body==null&&o.headers["content-type"]===this.getDefaultContentType()&&(o.body="{}"),o}async deserializeResponse(t,r,n){let o=await super.deserializeResponse(t,r,n),s=$.of(t.output);for(let[i,a]of s.structIterator())a.getMemberTraits().httpPayload&&!(i in o)&&(o[i]=null);return o}async handleError(t,r,n,o,s){let i=No(n,o)??"Unknown",{errorSchema:a,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,o,s),l=$.of(a),m=o.message??o.Message??"Unknown",p=F.for(a[1]).getErrorCtor(a)??Error,g=new p(m);await this.deserializeHttpMessage(a,r,n,o);let h={};for(let[_,T]of l.structIterator()){let I=T.getMergedTraits().jsonName??_;h[_]=this.codec.createDeserializer().readObject(T,o[I])}throw this.mixin.decorateServiceException(Object.assign(g,u,{$fault:l.getMergedTraits().error,message:m},h),o)}getDefaultContentType(){return"application/json"}}});var fv,pv,mv=b(()=>{c();fv=A(X()),pv=e=>{if(e!=null)return typeof e=="object"&&"__type"in e&&delete e.__type,(0,fv.expectUnion)(e)}});var gv=x((yae,hv)=>{c();(()=>{"use strict";var e={d:(d,f)=>{for(var E in f)e.o(f,E)&&!e.o(d,E)&&Object.defineProperty(d,E,{enumerable:!0,get:f[E]})},o:(d,f)=>Object.prototype.hasOwnProperty.call(d,f),r:d=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{XMLBuilder:()=>Cr,XMLParser:()=>JM,XMLValidator:()=>i$});let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function o(d,f){let E=[],C=f.exec(d);for(;C;){let w=[];w.startIndex=f.lastIndex-C[0].length;let v=C.length;for(let O=0;O<v;O++)w.push(C[O]);E.push(w),C=f.exec(d)}return E}let s=function(d){return n.exec(d)!=null},i={allowBooleanAttributes:!1,unpairedTags:[]};function a(d,f){f=Object.assign({},i,f);let E=[],C=!1,w=!1;d[0]==="\uFEFF"&&(d=d.substr(1));for(let v=0;v<d.length;v++)if(d[v]==="<"&&d[v+1]==="?"){if(v+=2,v=l(d,v),v.err)return v}else{if(d[v]!=="<"){if(u(d[v]))continue;return P("InvalidChar","char '"+d[v]+"' is not expected.",M(d,v))}{let O=v;if(v++,d[v]==="!"){v=m(d,v);continue}{let R=!1;d[v]==="/"&&(R=!0,v++);let N="";for(;v<d.length&&d[v]!==">"&&d[v]!==" "&&d[v]!=="	"&&d[v]!==`
`&&d[v]!=="\r";v++)N+=d[v];if(N=N.trim(),N[N.length-1]==="/"&&(N=N.substring(0,N.length-1),v--),!s(N)){let U;return U=N.trim().length===0?"Invalid space after '<'.":"Tag '"+N+"' is an invalid name.",P("InvalidTag",U,M(d,v))}let k=h(d,v);if(k===!1)return P("InvalidAttr","Attributes for '"+N+"' have open quote.",M(d,v));let q=k.value;if(v=k.index,q[q.length-1]==="/"){let U=v-q.length;q=q.substring(0,q.length-1);let ee=T(q,f);if(ee!==!0)return P(ee.err.code,ee.err.msg,M(d,U+ee.err.line));C=!0}else if(R){if(!k.tagClosed)return P("InvalidTag","Closing tag '"+N+"' doesn't have proper closing.",M(d,v));if(q.trim().length>0)return P("InvalidTag","Closing tag '"+N+"' can't have attributes or invalid starting.",M(d,O));if(E.length===0)return P("InvalidTag","Closing tag '"+N+"' has not been opened.",M(d,O));{let U=E.pop();if(N!==U.tagName){let ee=M(d,U.tagStartPos);return P("InvalidTag","Expected closing tag '"+U.tagName+"' (opened in line "+ee.line+", col "+ee.col+") instead of closing tag '"+N+"'.",M(d,O))}E.length==0&&(w=!0)}}else{let U=T(q,f);if(U!==!0)return P(U.err.code,U.err.msg,M(d,v-q.length+U.err.line));if(w===!0)return P("InvalidXml","Multiple possible root nodes found.",M(d,v));f.unpairedTags.indexOf(N)!==-1||E.push({tagName:N,tagStartPos:O}),C=!0}for(v++;v<d.length;v++)if(d[v]==="<"){if(d[v+1]==="!"){v++,v=m(d,v);continue}if(d[v+1]!=="?")break;if(v=l(d,++v),v.err)return v}else if(d[v]==="&"){let U=I(d,v);if(U==-1)return P("InvalidChar","char '&' is not expected.",M(d,v));v=U}else if(w===!0&&!u(d[v]))return P("InvalidXml","Extra text at the end",M(d,v));d[v]==="<"&&v--}}}return C?E.length==1?P("InvalidTag","Unclosed tag '"+E[0].tagName+"'.",M(d,E[0].tagStartPos)):!(E.length>0)||P("InvalidXml","Invalid '"+JSON.stringify(E.map((v=>v.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):P("InvalidXml","Start tag expected.",1)}function u(d){return d===" "||d==="	"||d===`
`||d==="\r"}function l(d,f){let E=f;for(;f<d.length;f++)if(!(d[f]!="?"&&d[f]!=" ")){let C=d.substr(E,f-E);if(f>5&&C==="xml")return P("InvalidXml","XML declaration allowed only at the start of the document.",M(d,f));if(d[f]=="?"&&d[f+1]==">"){f++;break}}return f}function m(d,f){if(d.length>f+5&&d[f+1]==="-"&&d[f+2]==="-"){for(f+=3;f<d.length;f++)if(d[f]==="-"&&d[f+1]==="-"&&d[f+2]===">"){f+=2;break}}else if(d.length>f+8&&d[f+1]==="D"&&d[f+2]==="O"&&d[f+3]==="C"&&d[f+4]==="T"&&d[f+5]==="Y"&&d[f+6]==="P"&&d[f+7]==="E"){let E=1;for(f+=8;f<d.length;f++)if(d[f]==="<")E++;else if(d[f]===">"&&(E--,E===0))break}else if(d.length>f+9&&d[f+1]==="["&&d[f+2]==="C"&&d[f+3]==="D"&&d[f+4]==="A"&&d[f+5]==="T"&&d[f+6]==="A"&&d[f+7]==="["){for(f+=8;f<d.length;f++)if(d[f]==="]"&&d[f+1]==="]"&&d[f+2]===">"){f+=2;break}}return f}let p='"',g="'";function h(d,f){let E="",C="",w=!1;for(;f<d.length;f++){if(d[f]===p||d[f]===g)C===""?C=d[f]:C!==d[f]||(C="");else if(d[f]===">"&&C===""){w=!0;break}E+=d[f]}return C===""&&{value:E,index:f,tagClosed:w}}let _=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function T(d,f){let E=o(d,_),C={};for(let w=0;w<E.length;w++){if(E[w][1].length===0)return P("InvalidAttr","Attribute '"+E[w][2]+"' has no space in starting.",L(E[w]));if(E[w][3]!==void 0&&E[w][4]===void 0)return P("InvalidAttr","Attribute '"+E[w][2]+"' is without value.",L(E[w]));if(E[w][3]===void 0&&!f.allowBooleanAttributes)return P("InvalidAttr","boolean attribute '"+E[w][2]+"' is not allowed.",L(E[w]));let v=E[w][2];if(!D(v))return P("InvalidAttr","Attribute '"+v+"' is an invalid name.",L(E[w]));if(C.hasOwnProperty(v))return P("InvalidAttr","Attribute '"+v+"' is repeated.",L(E[w]));C[v]=1}return!0}function I(d,f){if(d[++f]===";")return-1;if(d[f]==="#")return(function(C,w){let v=/\d/;for(C[w]==="x"&&(w++,v=/[\da-fA-F]/);w<C.length;w++){if(C[w]===";")return w;if(!C[w].match(v))break}return-1})(d,++f);let E=0;for(;f<d.length;f++,E++)if(!(d[f].match(/\w/)&&E<20)){if(d[f]===";")break;return-1}return f}function P(d,f,E){return{err:{code:d,msg:f,line:E.line||E,col:E.col}}}function D(d){return s(d)}function M(d,f){let E=d.substring(0,f).split(/\r?\n/);return{line:E.length,col:E[E.length-1].length+1}}function L(d){return d.startIndex+d[1].length}let j={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(d,f){return f},attributeValueProcessor:function(d,f){return f},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(d,f,E){return d},captureMetaData:!1},Q;Q=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class Ee{constructor(f){this.tagname=f,this.child=[],this[":@"]={}}add(f,E){f==="__proto__"&&(f="#__proto__"),this.child.push({[f]:E})}addChild(f,E){f.tagname==="__proto__"&&(f.tagname="#__proto__"),f[":@"]&&Object.keys(f[":@"]).length>0?this.child.push({[f.tagname]:f.child,":@":f[":@"]}):this.child.push({[f.tagname]:f.child}),E!==void 0&&(this.child[this.child.length-1][Q]={startIndex:E})}static getMetaDataSymbol(){return Q}}function K(d,f){let E={};if(d[f+3]!=="O"||d[f+4]!=="C"||d[f+5]!=="T"||d[f+6]!=="Y"||d[f+7]!=="P"||d[f+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{f+=9;let C=1,w=!1,v=!1,O="";for(;f<d.length;f++)if(d[f]!=="<"||v)if(d[f]===">"){if(v?d[f-1]==="-"&&d[f-2]==="-"&&(v=!1,C--):C--,C===0)break}else d[f]==="["?w=!0:O+=d[f];else{if(w&&_n(d,"!ENTITY",f)){let R,N;f+=7,[R,N,f]=le(d,f+1),N.indexOf("&")===-1&&(E[R]={regx:RegExp(`&${R};`,"g"),val:N})}else if(w&&_n(d,"!ELEMENT",f)){f+=8;let{index:R}=OM(d,f+1);f=R}else if(w&&_n(d,"!ATTLIST",f))f+=8;else if(w&&_n(d,"!NOTATION",f)){f+=9;let{index:R}=Ie(d,f+1);f=R}else{if(!_n(d,"!--",f))throw new Error("Invalid DOCTYPE");v=!0}C++,O=""}if(C!==0)throw new Error("Unclosed DOCTYPE")}return{entities:E,i:f}}let Z=(d,f)=>{for(;f<d.length&&/\s/.test(d[f]);)f++;return f};function le(d,f){f=Z(d,f);let E="";for(;f<d.length&&!/\s/.test(d[f])&&d[f]!=='"'&&d[f]!=="'";)E+=d[f],f++;if(nf(E),f=Z(d,f),d.substring(f,f+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(d[f]==="%")throw new Error("Parameter entities are not supported");let C="";return[f,C]=tt(d,f,"entity"),[E,C,--f]}function Ie(d,f){f=Z(d,f);let E="";for(;f<d.length&&!/\s/.test(d[f]);)E+=d[f],f++;nf(E),f=Z(d,f);let C=d.substring(f,f+6).toUpperCase();if(C!=="SYSTEM"&&C!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${C}"`);f+=C.length,f=Z(d,f);let w=null,v=null;if(C==="PUBLIC")[f,w]=tt(d,f,"publicIdentifier"),d[f=Z(d,f)]!=='"'&&d[f]!=="'"||([f,v]=tt(d,f,"systemIdentifier"));else if(C==="SYSTEM"&&([f,v]=tt(d,f,"systemIdentifier"),!v))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:E,publicIdentifier:w,systemIdentifier:v,index:--f}}function tt(d,f,E){let C="",w=d[f];if(w!=='"'&&w!=="'")throw new Error(`Expected quoted string, found "${w}"`);for(f++;f<d.length&&d[f]!==w;)C+=d[f],f++;if(d[f]!==w)throw new Error(`Unterminated ${E} value`);return[++f,C]}function OM(d,f){f=Z(d,f);let E="";for(;f<d.length&&!/\s/.test(d[f]);)E+=d[f],f++;if(!nf(E))throw new Error(`Invalid element name: "${E}"`);let C="";if(d[f=Z(d,f)]==="E"&&_n(d,"MPTY",f))f+=4;else if(d[f]==="A"&&_n(d,"NY",f))f+=2;else{if(d[f]!=="(")throw new Error(`Invalid Element Expression, found "${d[f]}"`);for(f++;f<d.length&&d[f]!==")";)C+=d[f],f++;if(d[f]!==")")throw new Error("Unterminated content model")}return{elementName:E,contentModel:C.trim(),index:f}}function _n(d,f,E){for(let C=0;C<f.length;C++)if(f[C]!==d[E+C+1])return!1;return!0}function nf(d){if(s(d))return d;throw new Error(`Invalid entity name ${d}`)}let NM=/^[-+]?0x[a-fA-F0-9]+$/,DM=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,kM={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},MM=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function dS(d){return typeof d=="function"?d:Array.isArray(d)?f=>{for(let E of d)if(typeof E=="string"&&f===E||E instanceof RegExp&&E.test(f))return!0}:()=>!1}class $M{constructor(f){this.options=f,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(E,C)=>String.fromCodePoint(Number.parseInt(C,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(E,C)=>String.fromCodePoint(Number.parseInt(C,16))}},this.addExternalEntities=BM,this.parseXml=qM,this.parseTextData=LM,this.resolveNameSpace=UM,this.buildAttributesMap=HM,this.isItStopNode=VM,this.replaceEntitiesValue=GM,this.readStopNodeData=WM,this.saveTextToParentTag=zM,this.addChild=jM,this.ignoreAttributesFn=dS(this.options.ignoreAttributes)}}function BM(d){let f=Object.keys(d);for(let E=0;E<f.length;E++){let C=f[E];this.lastEntities[C]={regex:new RegExp("&"+C+";","g"),val:d[C]}}}function LM(d,f,E,C,w,v,O){if(d!==void 0&&(this.options.trimValues&&!C&&(d=d.trim()),d.length>0)){O||(d=this.replaceEntitiesValue(d));let R=this.options.tagValueProcessor(f,d,E,w,v);return R==null?d:typeof R!=typeof d||R!==d?R:this.options.trimValues||d.trim()===d?fS(d,this.options.parseTagValue,this.options.numberParseOptions):d}}function UM(d){if(this.options.removeNSPrefix){let f=d.split(":"),E=d.charAt(0)==="/"?"/":"";if(f[0]==="xmlns")return"";f.length===2&&(d=E+f[1])}return d}let FM=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function HM(d,f,E){if(this.options.ignoreAttributes!==!0&&typeof d=="string"){let C=o(d,FM),w=C.length,v={};for(let O=0;O<w;O++){let R=this.resolveNameSpace(C[O][1]);if(this.ignoreAttributesFn(R,f))continue;let N=C[O][4],k=this.options.attributeNamePrefix+R;if(R.length)if(this.options.transformAttributeName&&(k=this.options.transformAttributeName(k)),k==="__proto__"&&(k="#__proto__"),N!==void 0){this.options.trimValues&&(N=N.trim()),N=this.replaceEntitiesValue(N);let q=this.options.attributeValueProcessor(R,N,f);v[k]=q==null?N:typeof q!=typeof N||q!==N?q:fS(N,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(v[k]=!0)}if(!Object.keys(v).length)return;if(this.options.attributesGroupName){let O={};return O[this.options.attributesGroupName]=v,O}return v}}let qM=function(d){d=d.replace(/\r\n?/g,`
`);let f=new Ee("!xml"),E=f,C="",w="";for(let v=0;v<d.length;v++)if(d[v]==="<")if(d[v+1]==="/"){let O=wn(d,">",v,"Closing Tag is not closed."),R=d.substring(v+2,O).trim();if(this.options.removeNSPrefix){let q=R.indexOf(":");q!==-1&&(R=R.substr(q+1))}this.options.transformTagName&&(R=this.options.transformTagName(R)),E&&(C=this.saveTextToParentTag(C,E,w));let N=w.substring(w.lastIndexOf(".")+1);if(R&&this.options.unpairedTags.indexOf(R)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${R}>`);let k=0;N&&this.options.unpairedTags.indexOf(N)!==-1?(k=w.lastIndexOf(".",w.lastIndexOf(".")-1),this.tagsNodeStack.pop()):k=w.lastIndexOf("."),w=w.substring(0,k),E=this.tagsNodeStack.pop(),C="",v=O}else if(d[v+1]==="?"){let O=of(d,v,!1,"?>");if(!O)throw new Error("Pi Tag is not closed.");if(C=this.saveTextToParentTag(C,E,w),!(this.options.ignoreDeclaration&&O.tagName==="?xml"||this.options.ignorePiTags)){let R=new Ee(O.tagName);R.add(this.options.textNodeName,""),O.tagName!==O.tagExp&&O.attrExpPresent&&(R[":@"]=this.buildAttributesMap(O.tagExp,w,O.tagName)),this.addChild(E,R,w,v)}v=O.closeIndex+1}else if(d.substr(v+1,3)==="!--"){let O=wn(d,"-->",v+4,"Comment is not closed.");if(this.options.commentPropName){let R=d.substring(v+4,O-2);C=this.saveTextToParentTag(C,E,w),E.add(this.options.commentPropName,[{[this.options.textNodeName]:R}])}v=O}else if(d.substr(v+1,2)==="!D"){let O=K(d,v);this.docTypeEntities=O.entities,v=O.i}else if(d.substr(v+1,2)==="!["){let O=wn(d,"]]>",v,"CDATA is not closed.")-2,R=d.substring(v+9,O);C=this.saveTextToParentTag(C,E,w);let N=this.parseTextData(R,E.tagname,w,!0,!1,!0,!0);N==null&&(N=""),this.options.cdataPropName?E.add(this.options.cdataPropName,[{[this.options.textNodeName]:R}]):E.add(this.options.textNodeName,N),v=O+2}else{let O=of(d,v,this.options.removeNSPrefix),R=O.tagName,N=O.rawTagName,k=O.tagExp,q=O.attrExpPresent,U=O.closeIndex;this.options.transformTagName&&(R=this.options.transformTagName(R)),E&&C&&E.tagname!=="!xml"&&(C=this.saveTextToParentTag(C,E,w,!1));let ee=E;ee&&this.options.unpairedTags.indexOf(ee.tagname)!==-1&&(E=this.tagsNodeStack.pop(),w=w.substring(0,w.lastIndexOf("."))),R!==f.tagname&&(w+=w?"."+R:R);let ae=v;if(this.isItStopNode(this.options.stopNodes,w,R)){let te="";if(k.length>0&&k.lastIndexOf("/")===k.length-1)R[R.length-1]==="/"?(R=R.substr(0,R.length-1),w=w.substr(0,w.length-1),k=R):k=k.substr(0,k.length-1),v=O.closeIndex;else if(this.options.unpairedTags.indexOf(R)!==-1)v=O.closeIndex;else{let $t=this.readStopNodeData(d,N,U+1);if(!$t)throw new Error(`Unexpected end of ${N}`);v=$t.i,te=$t.tagContent}let we=new Ee(R);R!==k&&q&&(we[":@"]=this.buildAttributesMap(k,w,R)),te&&(te=this.parseTextData(te,R,w,!0,q,!0,!0)),w=w.substr(0,w.lastIndexOf(".")),we.add(this.options.textNodeName,te),this.addChild(E,we,w,ae)}else{if(k.length>0&&k.lastIndexOf("/")===k.length-1){R[R.length-1]==="/"?(R=R.substr(0,R.length-1),w=w.substr(0,w.length-1),k=R):k=k.substr(0,k.length-1),this.options.transformTagName&&(R=this.options.transformTagName(R));let te=new Ee(R);R!==k&&q&&(te[":@"]=this.buildAttributesMap(k,w,R)),this.addChild(E,te,w,ae),w=w.substr(0,w.lastIndexOf("."))}else{let te=new Ee(R);this.tagsNodeStack.push(E),R!==k&&q&&(te[":@"]=this.buildAttributesMap(k,w,R)),this.addChild(E,te,w,ae),E=te}C="",v=U}}else C+=d[v];return f.child};function jM(d,f,E,C){this.options.captureMetaData||(C=void 0);let w=this.options.updateTag(f.tagname,E,f[":@"]);w===!1||(typeof w=="string"&&(f.tagname=w),d.addChild(f,C))}let GM=function(d){if(this.options.processEntities){for(let f in this.docTypeEntities){let E=this.docTypeEntities[f];d=d.replace(E.regx,E.val)}for(let f in this.lastEntities){let E=this.lastEntities[f];d=d.replace(E.regex,E.val)}if(this.options.htmlEntities)for(let f in this.htmlEntities){let E=this.htmlEntities[f];d=d.replace(E.regex,E.val)}d=d.replace(this.ampEntity.regex,this.ampEntity.val)}return d};function zM(d,f,E,C){return d&&(C===void 0&&(C=f.child.length===0),(d=this.parseTextData(d,f.tagname,E,!1,!!f[":@"]&&Object.keys(f[":@"]).length!==0,C))!==void 0&&d!==""&&f.add(this.options.textNodeName,d),d=""),d}function VM(d,f,E){let C="*."+E;for(let w in d){let v=d[w];if(C===v||f===v)return!0}return!1}function wn(d,f,E,C){let w=d.indexOf(f,E);if(w===-1)throw new Error(C);return w+f.length-1}function of(d,f,E,C=">"){let w=(function(U,ee,ae=">"){let te,we="";for(let $t=ee;$t<U.length;$t++){let Ar=U[$t];if(te)Ar===te&&(te="");else if(Ar==='"'||Ar==="'")te=Ar;else if(Ar===ae[0]){if(!ae[1])return{data:we,index:$t};if(U[$t+1]===ae[1])return{data:we,index:$t}}else Ar==="	"&&(Ar=" ");we+=Ar}})(d,f+1,C);if(!w)return;let v=w.data,O=w.index,R=v.search(/\s/),N=v,k=!0;R!==-1&&(N=v.substring(0,R),v=v.substring(R+1).trimStart());let q=N;if(E){let U=N.indexOf(":");U!==-1&&(N=N.substr(U+1),k=N!==w.data.substr(U+1))}return{tagName:N,tagExp:v,closeIndex:O,attrExpPresent:k,rawTagName:q}}function WM(d,f,E){let C=E,w=1;for(;E<d.length;E++)if(d[E]==="<")if(d[E+1]==="/"){let v=wn(d,">",E,`${f} is not closed`);if(d.substring(E+2,v).trim()===f&&(w--,w===0))return{tagContent:d.substring(C,E),i:v};E=v}else if(d[E+1]==="?")E=wn(d,"?>",E+1,"StopNode is not closed.");else if(d.substr(E+1,3)==="!--")E=wn(d,"-->",E+3,"StopNode is not closed.");else if(d.substr(E+1,2)==="![")E=wn(d,"]]>",E,"StopNode is not closed.")-2;else{let v=of(d,E,">");v&&((v&&v.tagName)===f&&v.tagExp[v.tagExp.length-1]!=="/"&&w++,E=v.closeIndex)}}function fS(d,f,E){if(f&&typeof d=="string"){let C=d.trim();return C==="true"||C!=="false"&&(function(w,v={}){if(v=Object.assign({},kM,v),!w||typeof w!="string")return w;let O=w.trim();if(v.skipLike!==void 0&&v.skipLike.test(O))return w;if(w==="0")return 0;if(v.hex&&NM.test(O))return(function(N){if(parseInt)return parseInt(N,16);if(Number.parseInt)return Number.parseInt(N,16);if(window&&window.parseInt)return window.parseInt(N,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")})(O);if(O.search(/.+[eE].+/)!==-1)return(function(N,k,q){if(!q.eNotation)return N;let U=k.match(MM);if(U){let ee=U[1]||"",ae=U[3].indexOf("e")===-1?"E":"e",te=U[2],we=ee?N[te.length+1]===ae:N[te.length]===ae;return te.length>1&&we?N:te.length!==1||!U[3].startsWith(`.${ae}`)&&U[3][0]!==ae?q.leadingZeros&&!we?(k=(U[1]||"")+U[3],Number(k)):N:Number(k)}return N})(w,O,v);{let N=DM.exec(O);if(N){let k=N[1]||"",q=N[2],U=((R=N[3])&&R.indexOf(".")!==-1&&((R=R.replace(/0+$/,""))==="."?R="0":R[0]==="."?R="0"+R:R[R.length-1]==="."&&(R=R.substring(0,R.length-1))),R),ee=k?w[q.length+1]===".":w[q.length]===".";if(!v.leadingZeros&&(q.length>1||q.length===1&&!ee))return w;{let ae=Number(O),te=String(ae);if(ae===0||ae===-0)return ae;if(te.search(/[eE]/)!==-1)return v.eNotation?ae:w;if(O.indexOf(".")!==-1)return te==="0"||te===U||te===`${k}${U}`?ae:w;let we=q?U:O;return q?we===te||k+we===te?ae:w:we===te||we===k+te?ae:w}}return w}var R})(d,E)}return d!==void 0?d:""}let sf=Ee.getMetaDataSymbol();function KM(d,f){return pS(d,f)}function pS(d,f,E){let C,w={};for(let v=0;v<d.length;v++){let O=d[v],R=YM(O),N="";if(N=E===void 0?R:E+"."+R,R===f.textNodeName)C===void 0?C=O[R]:C+=""+O[R];else{if(R===void 0)continue;if(O[R]){let k=pS(O[R],f,N),q=QM(k,f);O[sf]!==void 0&&(k[sf]=O[sf]),O[":@"]?XM(k,O[":@"],N,f):Object.keys(k).length!==1||k[f.textNodeName]===void 0||f.alwaysCreateTextNode?Object.keys(k).length===0&&(f.alwaysCreateTextNode?k[f.textNodeName]="":k=""):k=k[f.textNodeName],w[R]!==void 0&&w.hasOwnProperty(R)?(Array.isArray(w[R])||(w[R]=[w[R]]),w[R].push(k)):f.isArray(R,N,q)?w[R]=[k]:w[R]=k}}}return typeof C=="string"?C.length>0&&(w[f.textNodeName]=C):C!==void 0&&(w[f.textNodeName]=C),w}function YM(d){let f=Object.keys(d);for(let E=0;E<f.length;E++){let C=f[E];if(C!==":@")return C}}function XM(d,f,E,C){if(f){let w=Object.keys(f),v=w.length;for(let O=0;O<v;O++){let R=w[O];C.isArray(R,E+"."+R,!0,!0)?d[R]=[f[R]]:d[R]=f[R]}}}function QM(d,f){let{textNodeName:E}=f,C=Object.keys(d).length;return C===0||!(C!==1||!d[E]&&typeof d[E]!="boolean"&&d[E]!==0)}class JM{constructor(f){this.externalEntities={},this.options=(function(E){return Object.assign({},j,E)})(f)}parse(f,E){if(typeof f!="string"){if(!f.toString)throw new Error("XML data is accepted in String or Bytes[] form.");f=f.toString()}if(E){E===!0&&(E={});let v=a(f,E);if(v!==!0)throw Error(`${v.err.msg}:${v.err.line}:${v.err.col}`)}let C=new $M(this.options);C.addExternalEntities(this.externalEntities);let w=C.parseXml(f);return this.options.preserveOrder||w===void 0?w:KM(w,this.options)}addEntity(f,E){if(E.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(f.indexOf("&")!==-1||f.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(E==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[f]=E}static getMetaDataSymbol(){return Ee.getMetaDataSymbol()}}function ZM(d,f){let E="";return f.format&&f.indentBy.length>0&&(E=`
`),mS(d,f,"",E)}function mS(d,f,E,C){let w="",v=!1;for(let O=0;O<d.length;O++){let R=d[O],N=e$(R);if(N===void 0)continue;let k="";if(k=E.length===0?N:`${E}.${N}`,N===f.textNodeName){let ae=R[N];t$(k,f)||(ae=f.tagValueProcessor(N,ae),ae=gS(ae,f)),v&&(w+=C),w+=ae,v=!1;continue}if(N===f.cdataPropName){v&&(w+=C),w+=`<![CDATA[${R[N][0][f.textNodeName]}]]>`,v=!1;continue}if(N===f.commentPropName){w+=C+`<!--${R[N][0][f.textNodeName]}-->`,v=!0;continue}if(N[0]==="?"){let ae=hS(R[":@"],f),te=N==="?xml"?"":C,we=R[N][0][f.textNodeName];we=we.length!==0?" "+we:"",w+=te+`<${N}${we}${ae}?>`,v=!0;continue}let q=C;q!==""&&(q+=f.indentBy);let U=C+`<${N}${hS(R[":@"],f)}`,ee=mS(R[N],f,k,q);f.unpairedTags.indexOf(N)!==-1?f.suppressUnpairedNode?w+=U+">":w+=U+"/>":ee&&ee.length!==0||!f.suppressEmptyNode?ee&&ee.endsWith(">")?w+=U+`>${ee}${C}</${N}>`:(w+=U+">",ee&&C!==""&&(ee.includes("/>")||ee.includes("</"))?w+=C+f.indentBy+ee+C:w+=ee,w+=`</${N}>`):w+=U+"/>",v=!0}return w}function e$(d){let f=Object.keys(d);for(let E=0;E<f.length;E++){let C=f[E];if(d.hasOwnProperty(C)&&C!==":@")return C}}function hS(d,f){let E="";if(d&&!f.ignoreAttributes)for(let C in d){if(!d.hasOwnProperty(C))continue;let w=f.attributeValueProcessor(C,d[C]);w=gS(w,f),w===!0&&f.suppressBooleanAttributes?E+=` ${C.substr(f.attributeNamePrefix.length)}`:E+=` ${C.substr(f.attributeNamePrefix.length)}="${w}"`}return E}function t$(d,f){let E=(d=d.substr(0,d.length-f.textNodeName.length-1)).substr(d.lastIndexOf(".")+1);for(let C in f.stopNodes)if(f.stopNodes[C]===d||f.stopNodes[C]==="*."+E)return!0;return!1}function gS(d,f){if(d&&d.length>0&&f.processEntities)for(let E=0;E<f.entities.length;E++){let C=f.entities[E];d=d.replace(C.regex,C.val)}return d}let r$={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(d,f){return f},attributeValueProcessor:function(d,f){return f},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Cr(d){this.options=Object.assign({},r$,d),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=dS(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=s$),this.processTextOrObjNode=n$,this.options.format?(this.indentate=o$,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function n$(d,f,E,C){let w=this.j2x(d,E+1,C.concat(f));return d[this.options.textNodeName]!==void 0&&Object.keys(d).length===1?this.buildTextValNode(d[this.options.textNodeName],f,w.attrStr,E):this.buildObjectNode(w.val,f,w.attrStr,E)}function o$(d){return this.options.indentBy.repeat(d)}function s$(d){return!(!d.startsWith(this.options.attributeNamePrefix)||d===this.options.textNodeName)&&d.substr(this.attrPrefixLen)}Cr.prototype.build=function(d){return this.options.preserveOrder?ZM(d,this.options):(Array.isArray(d)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(d={[this.options.arrayNodeName]:d}),this.j2x(d,0,[]).val)},Cr.prototype.j2x=function(d,f,E){let C="",w="",v=E.join(".");for(let O in d)if(Object.prototype.hasOwnProperty.call(d,O))if(d[O]===void 0)this.isAttribute(O)&&(w+="");else if(d[O]===null)this.isAttribute(O)||O===this.options.cdataPropName?w+="":O[0]==="?"?w+=this.indentate(f)+"<"+O+"?"+this.tagEndChar:w+=this.indentate(f)+"<"+O+"/"+this.tagEndChar;else if(d[O]instanceof Date)w+=this.buildTextValNode(d[O],O,"",f);else if(typeof d[O]!="object"){let R=this.isAttribute(O);if(R&&!this.ignoreAttributesFn(R,v))C+=this.buildAttrPairStr(R,""+d[O]);else if(!R)if(O===this.options.textNodeName){let N=this.options.tagValueProcessor(O,""+d[O]);w+=this.replaceEntitiesValue(N)}else w+=this.buildTextValNode(d[O],O,"",f)}else if(Array.isArray(d[O])){let R=d[O].length,N="",k="";for(let q=0;q<R;q++){let U=d[O][q];if(U!==void 0)if(U===null)O[0]==="?"?w+=this.indentate(f)+"<"+O+"?"+this.tagEndChar:w+=this.indentate(f)+"<"+O+"/"+this.tagEndChar;else if(typeof U=="object")if(this.options.oneListGroup){let ee=this.j2x(U,f+1,E.concat(O));N+=ee.val,this.options.attributesGroupName&&U.hasOwnProperty(this.options.attributesGroupName)&&(k+=ee.attrStr)}else N+=this.processTextOrObjNode(U,O,f,E);else if(this.options.oneListGroup){let ee=this.options.tagValueProcessor(O,U);ee=this.replaceEntitiesValue(ee),N+=ee}else N+=this.buildTextValNode(U,O,"",f)}this.options.oneListGroup&&(N=this.buildObjectNode(N,O,k,f)),w+=N}else if(this.options.attributesGroupName&&O===this.options.attributesGroupName){let R=Object.keys(d[O]),N=R.length;for(let k=0;k<N;k++)C+=this.buildAttrPairStr(R[k],""+d[O][R[k]])}else w+=this.processTextOrObjNode(d[O],O,f,E);return{attrStr:C,val:w}},Cr.prototype.buildAttrPairStr=function(d,f){return f=this.options.attributeValueProcessor(d,""+f),f=this.replaceEntitiesValue(f),this.options.suppressBooleanAttributes&&f==="true"?" "+d:" "+d+'="'+f+'"'},Cr.prototype.buildObjectNode=function(d,f,E,C){if(d==="")return f[0]==="?"?this.indentate(C)+"<"+f+E+"?"+this.tagEndChar:this.indentate(C)+"<"+f+E+this.closeTag(f)+this.tagEndChar;{let w="</"+f+this.tagEndChar,v="";return f[0]==="?"&&(v="?",w=""),!E&&E!==""||d.indexOf("<")!==-1?this.options.commentPropName!==!1&&f===this.options.commentPropName&&v.length===0?this.indentate(C)+`<!--${d}-->`+this.newLine:this.indentate(C)+"<"+f+E+v+this.tagEndChar+d+this.indentate(C)+w:this.indentate(C)+"<"+f+E+v+">"+d+w}},Cr.prototype.closeTag=function(d){let f="";return this.options.unpairedTags.indexOf(d)!==-1?this.options.suppressUnpairedNode||(f="/"):f=this.options.suppressEmptyNode?"/":`></${d}`,f},Cr.prototype.buildTextValNode=function(d,f,E,C){if(this.options.cdataPropName!==!1&&f===this.options.cdataPropName)return this.indentate(C)+`<![CDATA[${d}]]>`+this.newLine;if(this.options.commentPropName!==!1&&f===this.options.commentPropName)return this.indentate(C)+`<!--${d}-->`+this.newLine;if(f[0]==="?")return this.indentate(C)+"<"+f+E+"?"+this.tagEndChar;{let w=this.options.tagValueProcessor(f,d);return w=this.replaceEntitiesValue(w),w===""?this.indentate(C)+"<"+f+E+this.closeTag(f)+this.tagEndChar:this.indentate(C)+"<"+f+E+">"+w+"</"+f+this.tagEndChar}},Cr.prototype.replaceEntitiesValue=function(d){if(d&&d.length>0&&this.options.processEntities)for(let f=0;f<this.options.entities.length;f++){let E=this.options.entities[f];d=d.replace(E.regex,E.val)}return d};let i$={validate:a};hv.exports=t})()});var yv=x(Zm=>{"use strict";c();Object.defineProperty(Zm,"__esModule",{value:!0});Zm.parseXML=c2;var a2=gv(),Jm=new a2.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>t.trim()===""&&t.includes(`
`)?"":void 0});Jm.addEntity("#xD","\r");Jm.addEntity("#10",`
`);function c2(e){return Jm.parse(e,!0)}});var Lc=x(Bc=>{"use strict";c();var u2=yv();function l2(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function d2(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}var $c=class{value;constructor(t){this.value=t}toString(){return d2(""+this.value)}},eh=class e{name;children;attributes={};static of(t,r,n){let o=new e(t);return r!==void 0&&o.addChildNode(new $c(r)),n!==void 0&&o.withName(n),o}constructor(t,r=[]){this.name=t,this.children=r}withName(t){return this.name=t,this}addAttribute(t,r){return this.attributes[t]=r,this}addChildNode(t){return this.children.push(t),this}removeAttribute(t){return delete this.attributes[t],this}n(t){return this.name=t,this}c(t){return this.children.push(t),this}a(t,r){return r!=null&&(this.attributes[t]=r),this}cc(t,r,n=r){if(t[r]!=null){let o=e.of(r,t[r]).withName(n);this.c(o)}}l(t,r,n,o){t[r]!=null&&o().map(i=>{i.withName(n),this.c(i)})}lc(t,r,n,o){if(t[r]!=null){let s=o(),i=new e(n);s.map(a=>{i.c(a)}),this.c(i)}}toString(){let t=!!this.children.length,r=`<${this.name}`,n=this.attributes;for(let o of Object.keys(n)){let s=n[o];s!=null&&(r+=` ${o}="${l2(""+s)}"`)}return r+=t?`>${this.children.map(o=>o.toString()).join("")}</${this.name}>`:"/>"}};Object.defineProperty(Bc,"parseXML",{enumerable:!0,get:function(){return u2.parseXML}});Bc.XmlNode=eh;Bc.XmlText=$c});var Sv,Ev,_v,Vr,Uc=b(()=>{c();Sv=A(Lc());nt();ne();Ev=A(X()),_v=A(me());qr();Wm();Vr=class extends Ue{settings;stringDeserializer;constructor(t){super(),this.settings=t,this.stringDeserializer=new On(t)}setSerdeContext(t){this.serdeContext=t,this.stringDeserializer.setSerdeContext(t)}read(t,r,n){let o=$.of(t),s=o.getMemberSchemas();if(o.isStructSchema()&&o.isMemberSchema()&&!!Object.values(s).find(l=>!!l.getMemberTraits().eventPayload)){let l={},m=Object.keys(s)[0];return s[m].isBlobSchema()?l[m]=r:l[m]=this.read(s[m],r),l}let a=(this.serdeContext?.utf8Encoder??_v.toUtf8)(r),u=this.parseXml(a);return this.readSchema(t,n?u[n]:u)}readSchema(t,r){let n=$.of(t);if(n.isUnitSchema())return;let o=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(r))return this.readSchema(n,[r]);if(r==null)return r;if(typeof r=="object"){let s=!!o.sparse,i=!!o.xmlFlattened;if(n.isListSchema()){let u=n.getValueSchema(),l=[],m=u.getMergedTraits().xmlName??"member",p=i?r:(r[0]??r)[m],g=Array.isArray(p)?p:[p];for(let h of g)(h!=null||s)&&l.push(this.readSchema(u,h));return l}let a={};if(n.isMapSchema()){let u=n.getKeySchema(),l=n.getValueSchema(),m;i?m=Array.isArray(r)?r:[r]:m=Array.isArray(r.entry)?r.entry:[r.entry];let p=u.getMergedTraits().xmlName??"key",g=l.getMergedTraits().xmlName??"value";for(let h of m){let _=h[p],T=h[g];(T!=null||s)&&(a[_]=this.readSchema(l,T))}return a}if(n.isStructSchema()){let u=n.isUnionSchema(),l;u&&(l=new Oo(r,a));for(let[m,p]of n.structIterator()){let g=p.getMergedTraits(),h=g.httpPayload?g.xmlName??p.getName():p.getMemberTraits().xmlName??m;u&&l.mark(h),r[h]!=null&&(a[m]=this.readSchema(p,r[h]))}return u&&l.writeUnknown(),a}if(n.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,r)}parseXml(t){if(t.length){let r;try{r=(0,Sv.parseXML)(t)}catch(i){throw i&&typeof i=="object"&&Object.defineProperty(i,"$responseBodyText",{value:t}),i}let n="#text",o=Object.keys(r)[0],s=r[o];return s[n]&&(s[o]=s[n],delete s[n]),(0,Ev.getValueFromTextNode)(s)}return{}}}});var wv,bv,Fc,vv=b(()=>{c();nt();ne();Ke();wv=A(X()),bv=A(js());qr();Gs();Fc=class extends Ue{settings;buffer;constructor(t){super(),this.settings=t}write(t,r,n=""){this.buffer===void 0&&(this.buffer="");let o=$.of(t);if(n&&!n.endsWith(".")&&(n+="."),o.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(n),this.writeValue((this.serdeContext?.base64Encoder??bv.toBase64)(r)));else if(o.isBooleanSchema()||o.isNumericSchema()||o.isStringSchema())r!=null?(this.writeKey(n),this.writeValue(String(r))):o.isIdempotencyToken()&&(this.writeKey(n),this.writeValue((0,mt.v4)()));else if(o.isBigIntegerSchema())r!=null&&(this.writeKey(n),this.writeValue(String(r)));else if(o.isBigDecimalSchema())r!=null&&(this.writeKey(n),this.writeValue(r instanceof pe?r.string:String(r)));else if(o.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(n),ct(o,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,wv.dateToUtcString)(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else if(o.isDocumentSchema())Array.isArray(r)?this.write(79,r,n):r instanceof Date?this.write(4,r,n):r instanceof Uint8Array?this.write(21,r,n):r&&typeof r=="object"?this.write(143,r,n):(this.writeKey(n),this.writeValue(String(r)));else if(o.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(n),this.writeValue(""));else{let s=o.getValueSchema(),i=this.settings.flattenLists||o.getMergedTraits().xmlFlattened,a=1;for(let u of r){if(u==null)continue;let l=this.getKey("member",s.getMergedTraits().xmlName),m=i?`${n}${a}`:`${n}${l}.${a}`;this.write(s,u,m),++a}}}else if(o.isMapSchema()){if(r&&typeof r=="object"){let s=o.getKeySchema(),i=o.getValueSchema(),a=o.getMergedTraits().xmlFlattened,u=1;for(let[l,m]of Object.entries(r)){if(m==null)continue;let p=this.getKey("key",s.getMergedTraits().xmlName),g=a?`${n}${u}.${p}`:`${n}entry.${u}.${p}`,h=this.getKey("value",i.getMergedTraits().xmlName),_=a?`${n}${u}.${h}`:`${n}entry.${u}.${h}`;this.write(s,l,g),this.write(i,m,_),++u}}}else if(o.isStructSchema()){if(r&&typeof r=="object"){let s=!1;for(let[i,a]of Po(o,r)){if(r[i]==null&&!a.isIdempotencyToken())continue;let u=this.getKey(i,a.getMergedTraits().xmlName),l=`${n}${u}`;this.write(a,r[i],l),s=!0}if(!s&&o.isUnionSchema()){let{$unknown:i}=r;if(Array.isArray(i)){let[a,u]=i,l=`${n}${a}`;this.write(15,u,l)}}}}else if(!o.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${o.getName(!0)}`)}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let t=this.buffer;return delete this.buffer,t}getKey(t,r){let n=r??t;return this.settings.capitalizeKeys?n[0].toUpperCase()+n.slice(1):n}writeKey(t){t.endsWith(".")&&(t=t.slice(0,t.length-1)),this.buffer+=`&${Bt(t)}=`}writeValue(t){this.buffer+=Bt(t)}}});var Wr,th=b(()=>{c();nt();ne();Io();Uc();vv();Wr=class extends cr{options;serializer;deserializer;mixin=new gt;constructor(t){super({defaultNamespace:t.defaultNamespace}),this.options=t;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace,serializeEmptyLists:!0};this.serializer=new Fc(r),this.deserializer=new Vr(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(t){this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n);o.path.endsWith("/")||(o.path+="/"),Object.assign(o.headers,{"content-type":"application/x-www-form-urlencoded"}),(Ct(t.input)==="unit"||!o.body)&&(o.body="");let s=t.name.split("#")[1]??t.name;return o.body=`Action=${s}&Version=${this.options.version}`+o.body,o.body.endsWith("&")&&(o.body=o.body.slice(-1)),o}async deserializeResponse(t,r,n){let o=this.deserializer,s=$.of(t.output),i={};if(n.statusCode>=300){let p=await pt(n.body,r);p.byteLength>0&&Object.assign(i,await o.read(15,p)),await this.handleError(t,r,n,i,this.deserializeMetadata(n))}for(let p in n.headers){let g=n.headers[p];delete n.headers[p],n.headers[p.toLowerCase()]=g}let a=t.name.split("#")[1]??t.name,u=s.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,l=await pt(n.body,r);return l.byteLength>0&&Object.assign(i,await o.read(s,l,u)),{$metadata:this.deserializeMetadata(n),...i}}useNestedResult(){return!0}async handleError(t,r,n,o,s){let i=this.loadQueryErrorCode(n,o)??"Unknown",a=this.loadQueryError(o),u=this.loadQueryErrorMessage(o);a.message=u,a.Error={Type:a.Type,Code:a.Code,Message:u};let{errorSchema:l,errorMetadata:m}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,a,s,this.mixin.findQueryCompatibleError),p=$.of(l),g=F.for(l[1]).getErrorCtor(l)??Error,h=new g(u),_={Type:a.Error.Type,Code:a.Error.Code,Error:a.Error};for(let[T,I]of p.structIterator()){let P=I.getMergedTraits().xmlName??T,D=a[P]??o[P];_[T]=this.deserializer.readSchema(I,D)}throw this.mixin.decorateServiceException(Object.assign(h,m,{$fault:p.getMergedTraits().error,message:u},_),o)}loadQueryErrorCode(t,r){let n=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(n!==void 0)return n;if(t.statusCode==404)return"NotFound"}loadQueryError(t){return t.Errors?.[0]?.Error??t.Errors?.Error??t.Error}loadQueryErrorMessage(t){let r=this.loadQueryError(t);return r?.message??r?.Message??t.message??t.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var Hc,Cv=b(()=>{c();th();Hc=class extends Wr{options;constructor(t){super(t),this.options=t;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}});var Av,Tv,rh,xv,qc,nh=b(()=>{c();Av=A(Lc()),Tv=A(X());Km();rh=(e,t)=>Pc(e,t).then(r=>{if(r.length){let n;try{n=(0,Av.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let o="#text",s=Object.keys(n)[0],i=n[s];return i[o]&&(i[s]=i[o],delete i[o]),(0,Tv.getValueFromTextNode)(i)}return{}}),xv=async(e,t)=>{let r=await rh(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},qc=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"}});var Xe,oh,jc,Mo,sh=b(()=>{c();Xe=A(Lc());nt();ne();Ke();oh=A(X()),jc=A(js());qr();Gs();Mo=class extends Ue{settings;stringBuffer;byteBuffer;buffer;constructor(t){super(),this.settings=t}write(t,r){let n=$.of(t);if(n.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(n.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??jc.fromBase64)(r);else{this.buffer=this.writeStruct(n,r,void 0);let o=n.getMergedTraits();o.httpPayload&&!o.xmlName&&this.buffer.withName(n.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let t=this.buffer;return this.settings.xmlNamespace&&(t?.attributes?.xmlns||t.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,t.toString()}writeStruct(t,r,n){let o=t.getMergedTraits(),s=t.isMemberSchema()&&!o.httpPayload?t.getMemberTraits().xmlName??t.getMemberName():o.xmlName??t.getName();if(!s||!t.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${t.getName(!0)}.`);let i=Xe.XmlNode.of(s),[a,u]=this.getXmlnsAttribute(t,n);for(let[m,p]of Po(t,r)){let g=r[m];if(g!=null||p.isIdempotencyToken()){if(p.getMergedTraits().xmlAttribute){i.addAttribute(p.getMergedTraits().xmlName??m,this.writeSimple(p,g));continue}if(p.isListSchema())this.writeList(p,g,i,u);else if(p.isMapSchema())this.writeMap(p,g,i,u);else if(p.isStructSchema())i.addChildNode(this.writeStruct(p,g,u));else{let h=Xe.XmlNode.of(p.getMergedTraits().xmlName??p.getMemberName());this.writeSimpleInto(p,g,h,u),i.addChildNode(h)}}}let{$unknown:l}=r;if(l&&t.isUnionSchema()&&Array.isArray(l)&&Object.keys(r).length===1){let[m,p]=l,g=Xe.XmlNode.of(m);if(typeof p!="string")if(r instanceof Xe.XmlNode||r instanceof Xe.XmlText)i.addChildNode(r);else throw new Error("@aws-sdk - $unknown union member in XML requires value of type string, @aws-sdk/xml-builder::XmlNode or XmlText.");this.writeSimpleInto(0,p,g,u),i.addChildNode(g)}return u&&i.addAttribute(a,u),i}writeList(t,r,n,o){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${t.getName(!0)}`);let s=t.getMergedTraits(),i=t.getValueSchema(),a=i.getMergedTraits(),u=!!a.sparse,l=!!s.xmlFlattened,[m,p]=this.getXmlnsAttribute(t,o),g=(h,_)=>{if(i.isListSchema())this.writeList(i,Array.isArray(_)?_:[_],h,p);else if(i.isMapSchema())this.writeMap(i,_,h,p);else if(i.isStructSchema()){let T=this.writeStruct(i,_,p);h.addChildNode(T.withName(l?s.xmlName??t.getMemberName():a.xmlName??"member"))}else{let T=Xe.XmlNode.of(l?s.xmlName??t.getMemberName():a.xmlName??"member");this.writeSimpleInto(i,_,T,p),h.addChildNode(T)}};if(l)for(let h of r)(u||h!=null)&&g(n,h);else{let h=Xe.XmlNode.of(s.xmlName??t.getMemberName());p&&h.addAttribute(m,p);for(let _ of r)(u||_!=null)&&g(h,_);n.addChildNode(h)}}writeMap(t,r,n,o,s=!1){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${t.getName(!0)}`);let i=t.getMergedTraits(),a=t.getKeySchema(),l=a.getMergedTraits().xmlName??"key",m=t.getValueSchema(),p=m.getMergedTraits(),g=p.xmlName??"value",h=!!p.sparse,_=!!i.xmlFlattened,[T,I]=this.getXmlnsAttribute(t,o),P=(D,M,L)=>{let j=Xe.XmlNode.of(l,M),[Q,Ee]=this.getXmlnsAttribute(a,I);Ee&&j.addAttribute(Q,Ee),D.addChildNode(j);let K=Xe.XmlNode.of(g);m.isListSchema()?this.writeList(m,L,K,I):m.isMapSchema()?this.writeMap(m,L,K,I,!0):m.isStructSchema()?K=this.writeStruct(m,L,I):this.writeSimpleInto(m,L,K,I),D.addChildNode(K)};if(_){for(let[D,M]of Object.entries(r))if(h||M!=null){let L=Xe.XmlNode.of(i.xmlName??t.getMemberName());P(L,D,M),n.addChildNode(L)}}else{let D;s||(D=Xe.XmlNode.of(i.xmlName??t.getMemberName()),I&&D.addAttribute(T,I),n.addChildNode(D));for(let[M,L]of Object.entries(r))if(h||L!=null){let j=Xe.XmlNode.of("entry");P(j,M,L),(s?n:D).addChildNode(j)}}}writeSimple(t,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let n=$.of(t),o=null;if(r&&typeof r=="object")if(n.isBlobSchema())o=(this.serdeContext?.base64Encoder??jc.toBase64)(r);else if(n.isTimestampSchema()&&r instanceof Date)switch(ct(n,this.settings)){case 5:o=r.toISOString().replace(".000Z","Z");break;case 6:o=(0,oh.dateToUtcString)(r);break;case 7:o=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),o=(0,oh.dateToUtcString)(r);break}else{if(n.isBigDecimalSchema()&&r)return r instanceof pe?r.string:String(r);throw n.isMapSchema()||n.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${n.getName(!0)}`)}if((n.isBooleanSchema()||n.isNumericSchema()||n.isBigIntegerSchema()||n.isBigDecimalSchema())&&(o=String(r)),n.isStringSchema()&&(r===void 0&&n.isIdempotencyToken()?o=(0,mt.v4)():o=String(r)),o===null)throw new Error(`Unhandled schema-value pair ${n.getName(!0)}=${r}`);return o}writeSimpleInto(t,r,n,o){let s=this.writeSimple(t,r),i=$.of(t),a=new Xe.XmlText(s),[u,l]=this.getXmlnsAttribute(i,o);l&&n.addAttribute(u,l),n.addChildNode(a)}getXmlnsAttribute(t,r){let n=t.getMergedTraits(),[o,s]=n.xmlNamespace??[];return s&&s!==r?[o?`xmlns:${o}`:"xmlns",s]:[void 0,void 0]}}});var $o,ih=b(()=>{c();qr();Uc();sh();$o=class extends Ue{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new Mo(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new Vr(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var Gc,Rv=b(()=>{c();nt();ne();Io();nh();ih();Gc=class extends Pn{codec;serializer;deserializer;mixin=new gt;constructor(t){super(t);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace};this.codec=new $o(r),this.serializer=new Dn(this.codec.createSerializer(),r),this.deserializer=new Nn(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n),s=$.of(t.input);if(!o.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),s);i&&(o.headers["content-type"]=i)}return typeof o.body=="string"&&o.headers["content-type"]===this.getDefaultContentType()&&!o.body.startsWith("<?xml ")&&!this.hasUnstructuredPayloadBinding(s)&&(o.body='<?xml version="1.0" encoding="UTF-8"?>'+o.body),o}async deserializeResponse(t,r,n){return super.deserializeResponse(t,r,n)}async handleError(t,r,n,o,s){let i=qc(n,o)??"Unknown",{errorSchema:a,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,o,s),l=$.of(a),m=o.Error?.message??o.Error?.Message??o.message??o.Message??"Unknown",p=F.for(a[1]).getErrorCtor(a)??Error,g=new p(m);await this.deserializeHttpMessage(a,r,n,o);let h={};for(let[_,T]of l.structIterator()){let I=T.getMergedTraits().xmlName??_,P=o.Error?.[I]??o[I];h[_]=this.codec.createDeserializer().readSchema(T,P)}throw this.mixin.decorateServiceException(Object.assign(g,u,{$fault:l.getMergedTraits().error,message:m},h),o)}getDefaultContentType(){return"application/xml"}hasUnstructuredPayloadBinding(t){for(let[,r]of t.structIterator())if(r.getMergedTraits().httpPayload)return!(r.isStructSchema()||r.isMapSchema()||r.isListSchema());return!1}}});var ah={};rt(ah,{AwsEc2QueryProtocol:()=>Hc,AwsJson1_0Protocol:()=>kc,AwsJson1_1Protocol:()=>Mc,AwsJsonRpcProtocol:()=>Gr,AwsQueryProtocol:()=>Wr,AwsRestJsonProtocol:()=>zr,AwsRestXmlProtocol:()=>Gc,AwsSmithyRpcV2CborProtocol:()=>xc,JsonCodec:()=>jr,JsonShapeDeserializer:()=>Do,JsonShapeSerializer:()=>ko,XmlCodec:()=>$o,XmlShapeDeserializer:()=>Vr,XmlShapeSerializer:()=>Mo,_toBool:()=>Wb,_toNum:()=>Kb,_toStr:()=>Vb,awsExpectUnion:()=>pv,loadRestJsonErrorCode:()=>No,loadRestXmlErrorCode:()=>qc,parseJsonBody:()=>zs,parseJsonErrorBody:()=>sv,parseXmlBody:()=>rh,parseXmlErrorBody:()=>xv});var Un=b(()=>{c();zb();Yb();uv();lv();Dc();dv();Nc();Ym();Qm();mv();Vs();Cv();th();Rv();ih();Uc();sh();nh()});var Kr={};rt(Kr,{AWSSDKSigV4Signer:()=>Zp,AwsEc2QueryProtocol:()=>Hc,AwsJson1_0Protocol:()=>kc,AwsJson1_1Protocol:()=>Mc,AwsJsonRpcProtocol:()=>Gr,AwsQueryProtocol:()=>Wr,AwsRestJsonProtocol:()=>zr,AwsRestXmlProtocol:()=>Gc,AwsSdkSigV4ASigner:()=>Bs,AwsSdkSigV4Signer:()=>Be,AwsSmithyRpcV2CborProtocol:()=>xc,JsonCodec:()=>jr,JsonShapeDeserializer:()=>Do,JsonShapeSerializer:()=>ko,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Mr,NODE_SIGV4A_CONFIG_OPTIONS:()=>F0,XmlCodec:()=>$o,XmlShapeDeserializer:()=>Vr,XmlShapeSerializer:()=>Mo,_toBool:()=>Wb,_toNum:()=>Kb,_toStr:()=>Vb,awsExpectUnion:()=>pv,emitWarningIfUnsupportedVersion:()=>Dr,getBearerTokenEnvKey:()=>uc,loadRestJsonErrorCode:()=>No,loadRestXmlErrorCode:()=>qc,parseJsonBody:()=>zs,parseJsonErrorBody:()=>sv,parseXmlBody:()=>rh,parseXmlErrorBody:()=>xv,resolveAWSSDKSigV4Config:()=>mb,resolveAwsSdkSigV4AConfig:()=>U0,resolveAwsSdkSigV4Config:()=>pr,setCredentialFeature:()=>kr,setFeature:()=>v0,setTokenFeature:()=>A0,state:()=>cc,validateSigningProperties:()=>Ao});var Pe=b(()=>{c();ht();Em();Un()});var Fn=x(Bo=>{"use strict";c();var f2=(xe(),W(lr)),p2=Mn(),m2=oe(),Ht=(Pe(),W(Kr)),Nv=void 0;function h2(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function g2(e){let t=f2.normalizeProvider(e.userAgentAppId??Nv),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let n=await t();if(!h2(n)){let o=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof n!="string"?o?.warn("userAgentAppId must be a string or undefined."):n.length>50&&o?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}var y2=/\d{12}\.ddb/;async function S2(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Ht.setFeature(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let s=await t.retryStrategy();typeof s.acquireInitialRetryToken=="function"?s.constructor?.name?.includes("Adaptive")?Ht.setFeature(e,"RETRY_MODE_ADAPTIVE","F"):Ht.setFeature(e,"RETRY_MODE_STANDARD","E"):Ht.setFeature(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let s=e.endpointV2;switch(String(s?.url?.hostname).match(y2)&&Ht.setFeature(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":Ht.setFeature(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Ht.setFeature(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Ht.setFeature(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let o=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(o?.$source){let s=o;s.accountId&&Ht.setFeature(e,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(s.$source??{}))Ht.setFeature(e,i,a)}}var Iv="user-agent",ch="x-amz-user-agent",Pv=" ",uh="/",E2=/[^!$%&'*+\-.^_`|~\w]/g,_2=/[^!$%&'*+\-.^_`|~\w#]/g,Ov="-",w2=1024;function b2(e){let t="";for(let r in e){let n=e[r];if(t.length+n.length+1<=w2){t.length?t+=","+n:t+=n;continue}break}return t}var Dv=e=>(t,r)=>async n=>{let{request:o}=n;if(!m2.HttpRequest.isInstance(o))return t(n);let{headers:s}=o,i=r?.userAgent?.map(zc)||[],a=(await e.defaultUserAgentProvider()).map(zc);await S2(r,e,n);let u=r;a.push(`m/${b2(Object.assign({},r.__smithy_context?.features,u.__aws_sdk_context?.features))}`);let l=e?.customUserAgent?.map(zc)||[],m=await e.userAgentAppId();m&&a.push(zc(["app",`${m}`]));let p=p2.getUserAgentPrefix(),g=(p?[p]:[]).concat([...a,...i,...l]).join(Pv),h=[...a.filter(_=>_.startsWith("aws-sdk-")),...l].join(Pv);return e.runtime!=="browser"?(h&&(s[ch]=s[ch]?`${s[Iv]} ${h}`:h),s[Iv]=g):s[ch]=g,t({...n,request:o})},zc=e=>{let t=e[0].split(uh).map(i=>i.replace(E2,Ov)).join(uh),r=e[1]?.replace(_2,Ov),n=t.indexOf(uh),o=t.substring(0,n),s=t.substring(n+1);return o==="api"&&(s=s.toLowerCase()),[o,s,r].filter(i=>i&&i.length>0).reduce((i,a,u)=>{switch(u){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},kv={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},v2=e=>({applyToStack:t=>{t.add(Dv(e),kv)}});Bo.DEFAULT_UA_APP_ID=Nv;Bo.getUserAgentMiddlewareOptions=kv;Bo.getUserAgentPlugin=v2;Bo.resolveUserAgentConfig=g2;Bo.userAgentMiddleware=Dv});var Bv=x((Uce,$v)=>{c();var Vc=Object.defineProperty,C2=Object.getOwnPropertyDescriptor,A2=Object.getOwnPropertyNames,T2=Object.prototype.hasOwnProperty,x2=(e,t)=>Vc(e,"name",{value:t,configurable:!0}),R2=(e,t)=>{for(var r in t)Vc(e,r,{get:t[r],enumerable:!0})},I2=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of A2(t))!T2.call(e,o)&&o!==r&&Vc(e,o,{get:()=>t[o],enumerable:!(n=C2(t,o))||n.enumerable});return e},P2=e=>I2(Vc({},"__esModule",{value:!0}),e),Mv={};R2(Mv,{isArrayBuffer:()=>O2});$v.exports=P2(Mv);var O2=x2(e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]","isArrayBuffer")});var Hv=x((Hce,Fv)=>{c();var Wc=Object.defineProperty,N2=Object.getOwnPropertyDescriptor,D2=Object.getOwnPropertyNames,k2=Object.prototype.hasOwnProperty,Lv=(e,t)=>Wc(e,"name",{value:t,configurable:!0}),M2=(e,t)=>{for(var r in t)Wc(e,r,{get:t[r],enumerable:!0})},$2=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of D2(t))!k2.call(e,o)&&o!==r&&Wc(e,o,{get:()=>t[o],enumerable:!(n=N2(t,o))||n.enumerable});return e},B2=e=>$2(Wc({},"__esModule",{value:!0}),e),Uv={};M2(Uv,{fromArrayBuffer:()=>U2,fromString:()=>F2});Fv.exports=B2(Uv);var L2=Bv(),lh=z("buffer"),U2=Lv((e,t=0,r=e.byteLength-t)=>{if(!(0,L2.isArrayBuffer)(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return lh.Buffer.from(e,t,r)},"fromArrayBuffer"),F2=Lv((e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?lh.Buffer.from(e,t):lh.Buffer.from(e)},"fromString")});var Vv=x((jce,zv)=>{c();var Kc=Object.defineProperty,H2=Object.getOwnPropertyDescriptor,q2=Object.getOwnPropertyNames,j2=Object.prototype.hasOwnProperty,dh=(e,t)=>Kc(e,"name",{value:t,configurable:!0}),G2=(e,t)=>{for(var r in t)Kc(e,r,{get:t[r],enumerable:!0})},z2=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of q2(t))!j2.call(e,o)&&o!==r&&Kc(e,o,{get:()=>t[o],enumerable:!(n=H2(t,o))||n.enumerable});return e},V2=e=>z2(Kc({},"__esModule",{value:!0}),e),qv={};G2(qv,{fromUtf8:()=>Gv,toUint8Array:()=>W2,toUtf8:()=>K2});zv.exports=V2(qv);var jv=Hv(),Gv=dh(e=>{let t=(0,jv.fromString)(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},"fromUtf8"),W2=dh(e=>typeof e=="string"?Gv(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),"toUint8Array"),K2=dh(e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,jv.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},"toUtf8")});var Wv=x(Yc=>{"use strict";c();Object.defineProperty(Yc,"__esModule",{value:!0});Yc.convertToBuffer=void 0;var Y2=Vv(),X2=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:Y2.fromUtf8;function Q2(e){return e instanceof Uint8Array?e:typeof e=="string"?X2(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}Yc.convertToBuffer=Q2});var Kv=x(Xc=>{"use strict";c();Object.defineProperty(Xc,"__esModule",{value:!0});Xc.isEmptyData=void 0;function J2(e){return typeof e=="string"?e.length===0:e.byteLength===0}Xc.isEmptyData=J2});var Yv=x(Qc=>{"use strict";c();Object.defineProperty(Qc,"__esModule",{value:!0});Qc.numToUint8=void 0;function Z2(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}Qc.numToUint8=Z2});var Xv=x(Jc=>{"use strict";c();Object.defineProperty(Jc,"__esModule",{value:!0});Jc.uint32ArrayFrom=void 0;function eH(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}Jc.uint32ArrayFrom=eH});var fh=x(qt=>{"use strict";c();Object.defineProperty(qt,"__esModule",{value:!0});qt.uint32ArrayFrom=qt.numToUint8=qt.isEmptyData=qt.convertToBuffer=void 0;var tH=Wv();Object.defineProperty(qt,"convertToBuffer",{enumerable:!0,get:function(){return tH.convertToBuffer}});var rH=Kv();Object.defineProperty(qt,"isEmptyData",{enumerable:!0,get:function(){return rH.isEmptyData}});var nH=Yv();Object.defineProperty(qt,"numToUint8",{enumerable:!0,get:function(){return nH.numToUint8}});var oH=Xv();Object.defineProperty(qt,"uint32ArrayFrom",{enumerable:!0,get:function(){return oH.uint32ArrayFrom}})});var Zv=x(Zc=>{"use strict";c();Object.defineProperty(Zc,"__esModule",{value:!0});Zc.AwsCrc32=void 0;var Qv=(Rn(),W(xn)),ph=fh(),Jv=mh(),sH=(function(){function e(){this.crc32=new Jv.Crc32}return e.prototype.update=function(t){(0,ph.isEmptyData)(t)||this.crc32.update((0,ph.convertToBuffer)(t))},e.prototype.digest=function(){return Qv.__awaiter(this,void 0,void 0,function(){return Qv.__generator(this,function(t){return[2,(0,ph.numToUint8)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new Jv.Crc32},e})();Zc.AwsCrc32=sH});var mh=x(Yr=>{"use strict";c();Object.defineProperty(Yr,"__esModule",{value:!0});Yr.AwsCrc32=Yr.Crc32=Yr.crc32=void 0;var iH=(Rn(),W(xn)),aH=fh();function cH(e){return new eC().update(e).digest()}Yr.crc32=cH;var eC=(function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=iH.__values(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^lH[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e})();Yr.Crc32=eC;var uH=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],lH=(0,aH.uint32ArrayFrom)(uH),dH=Zv();Object.defineProperty(Yr,"AwsCrc32",{enumerable:!0,get:function(){return dH.AwsCrc32}})});var tu=x(Qr=>{"use strict";c();var nC=mh(),Hn=vs(),Lo=class e{bytes;constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&tC(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&tC(t),parseInt(Hn.toHex(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function tC(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var eu=class{toUtf8;fromUtf8;constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){let r=[];for(let s of Object.keys(t)){let i=this.fromUtf8(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let n=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),o=0;for(let s of r)n.set(s,o),o+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let a=this.fromUtf8(t.value),u=new DataView(new ArrayBuffer(3+a.byteLength));u.setUint8(0,7),u.setUint16(1,a.byteLength,!1);let l=new Uint8Array(u.buffer);return l.set(a,3),l;case"timestamp":let m=new Uint8Array(9);return m[0]=8,m.set(Lo.fromNumber(t.value.valueOf()).bytes,1),m;case"uuid":if(!_H.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let p=new Uint8Array(17);return p[0]=9,p.set(Hn.fromHex(t.value.replace(/\-/g,"")),1),p}}parse(t){let r={},n=0;for(;n<t.byteLength;){let o=t.getUint8(n++),s=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,o));switch(n+=o,t.getUint8(n++)){case 0:r[s]={type:rC,value:!0};break;case 1:r[s]={type:rC,value:!1};break;case 2:r[s]={type:fH,value:t.getInt8(n++)};break;case 3:r[s]={type:pH,value:t.getInt16(n,!1)},n+=2;break;case 4:r[s]={type:mH,value:t.getInt32(n,!1)},n+=4;break;case 5:r[s]={type:hH,value:new Lo(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:let i=t.getUint16(n,!1);n+=2,r[s]={type:gH,value:new Uint8Array(t.buffer,t.byteOffset+n,i)},n+=i;break;case 7:let a=t.getUint16(n,!1);n+=2,r[s]={type:yH,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[s]={type:SH,value:new Date(new Lo(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let u=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[s]={type:EH,value:`${Hn.toHex(u.subarray(0,4))}-${Hn.toHex(u.subarray(4,6))}-${Hn.toHex(u.subarray(6,8))}-${Hn.toHex(u.subarray(8,10))}-${Hn.toHex(u.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},rC="boolean",fH="byte",pH="short",mH="integer",hH="long",gH="binary",yH="string",SH="timestamp",EH="uuid",_H=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,oC=4,Xr=oC*2,qn=4,wH=Xr+qn*2;function bH({byteLength:e,byteOffset:t,buffer:r}){if(e<wH)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,t,e),o=n.getUint32(0,!1);if(e!==o)throw new Error("Reported message length does not match received message length");let s=n.getUint32(oC,!1),i=n.getUint32(Xr,!1),a=n.getUint32(e-qn,!1),u=new nC.Crc32().update(new Uint8Array(r,t,Xr));if(i!==u.digest())throw new Error(`The prelude checksum specified in the message (${i}) does not match the calculated CRC32 checksum (${u.digest()})`);if(u.update(new Uint8Array(r,t+Xr,e-(Xr+qn))),a!==u.digest())throw new Error(`The message checksum (${u.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+Xr+qn,s),body:new Uint8Array(r,t+Xr+qn+s,o-s-(Xr+qn+qn))}}var hh=class{headerMarshaller;messageBuffer;isEndOfStream;constructor(t,r){this.headerMarshaller=new eu(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){let t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){let t=this.messageBuffer;this.messageBuffer=[];let r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){let n=this.headerMarshaller.format(t),o=n.byteLength+r.byteLength+16,s=new Uint8Array(o),i=new DataView(s.buffer,s.byteOffset,s.byteLength),a=new nC.Crc32;return i.setUint32(0,o,!1),i.setUint32(4,n.byteLength,!1),i.setUint32(8,a.update(s.subarray(0,8)).digest(),!1),s.set(n,12),s.set(r,n.byteLength+12),i.setUint32(o-4,a.update(s.subarray(8,o-4)).digest(),!1),s}decode(t){let{headers:r,body:n}=bH(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}},gh=class{options;constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.decoder.decode(t)}},yh=class{options;constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}},Sh=class{options;constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream){let r=await this.options.deserializer(t);r!==void 0&&(yield r)}}},Eh=class{options;constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.serializer(t)}};Qr.EventStreamCodec=hh;Qr.HeaderMarshaller=eu;Qr.Int64=Lo;Qr.MessageDecoderStream=gh;Qr.MessageEncoderStream=yh;Qr.SmithyMessageDecoderStream=Sh;Qr.SmithyMessageEncoderStream=Eh});var iC=x(_h=>{"use strict";c();var sC=e=>encodeURIComponent(e).replace(/[!'()*]/g,vH),vH=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,CH=e=>e.split("/").map(sC).join("/");_h.escapeUri=sC;_h.escapeUriPath=CH});var cC=x(aC=>{"use strict";c();var wh=iC();function AH(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=wh.escapeUri(r),Array.isArray(n))for(let o=0,s=n.length;o<s;o++)t.push(`${r}=${wh.escapeUri(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${wh.escapeUri(n)}`),t.push(o)}}return t.join("&")}aC.buildQueryString=AH});var lC=x(uC=>{"use strict";c();var TH=cC();function xH(e){let{port:t,query:r}=e,{protocol:n,path:o,hostname:s}=e;n&&n.slice(-1)!==":"&&(n+=":"),t&&(s+=`:${t}`),o&&o.charAt(0)!=="/"&&(o=`/${o}`);let i=r?TH.buildQueryString(r):"";i&&i[0]!=="?"&&(i=`?${i}`);let a="";if(e.username!=null||e.password!=null){let l=e.username??"",m=e.password??"";a=`${l}:${m}@`}let u="";return e.fragment&&(u=`#${e.fragment}`),`${n}//${a}${s}${o}${i}${u}`}uC.formatUrl=xH});var vh=x(bh=>{"use strict";c();var Ws=tu();function RH(e){let t=0,r=0,n=null,o=null,s=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);t=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},i=async function*(){let a=e[Symbol.asyncIterator]();for(;;){let{value:u,done:l}=await a.next();if(l){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}let m=u.length,p=0;for(;p<m;){if(!n){let h=m-p;o||(o=new Uint8Array(4));let _=Math.min(4-r,h);if(o.set(u.slice(p,p+_),r),r+=_,p+=_,r<4)break;s(new DataView(o.buffer).getUint32(0,!1)),o=null}let g=Math.min(t-r,m-p);n.set(u.slice(p,p+g),r),r+=g,p+=g,t&&t===r&&(yield n,n=null,t=0,r=0)}}};return{[Symbol.asyncIterator]:i}}function IH(e,t){return async function(r){let{value:n}=r.headers[":message-type"];if(n==="error"){let o=new Error(r.headers[":error-message"].value||"UnknownError");throw o.name=r.headers[":error-code"].value,o}else if(n==="exception"){let o=r.headers[":exception-type"].value,s={[o]:r},i=await e(s);if(i.$unknown){let a=new Error(t(r.body));throw a.name=o,a}throw i[o]}else if(n==="event"){let o={[r.headers[":event-type"].value]:r},s=await e(o);return s.$unknown?void 0:s}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}var ru=class{eventStreamCodec;utfEncoder;constructor({utf8Encoder:t,utf8Decoder:r}){this.eventStreamCodec=new Ws.EventStreamCodec(t,r),this.utfEncoder=t}deserialize(t,r){let n=RH(t);return new Ws.SmithyMessageDecoderStream({messageStream:new Ws.MessageDecoderStream({inputStream:n,decoder:this.eventStreamCodec}),deserializer:IH(r,this.utfEncoder)})}serialize(t,r){return new Ws.MessageEncoderStream({messageStream:new Ws.SmithyMessageEncoderStream({inputStream:t,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}},PH=e=>new ru(e);bh.EventStreamMarshaller=ru;bh.eventStreamSerdeProvider=PH});var pC=x(Ks=>{"use strict";c();var OH=vh(),dC=e=>({[Symbol.asyncIterator]:async function*(){let t=e.getReader();try{for(;;){let{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}}),fC=e=>{let t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(r){let{done:n,value:o}=await t.next();if(n)return r.close();r.enqueue(o)}})},nu=class{universalMarshaller;constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new OH.EventStreamMarshaller({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){let n=NH(t)?dC(t):t;return this.universalMarshaller.deserialize(n,r)}serialize(t,r){let n=this.universalMarshaller.serialize(t,r);return typeof ReadableStream=="function"?fC(n):n}},NH=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream,DH=e=>new nu(e);Ks.EventStreamMarshaller=nu;Ks.eventStreamSerdeProvider=DH;Ks.iterableToReadableStream=fC;Ks.readableStreamtoIterable=dC});var yC=x(Ys=>{"use strict";c();var kH=tu(),MH=vs(),xh=oe(),$H=lC(),hC=pC(),mC=Wf(),BH=(e,t,r,n)=>{let o=e,s={start(){},async transform(i,a){try{let u=new Date(Date.now()+await n()),l={":date":{type:"timestamp",value:u}},m=await t.sign({message:{body:i,headers:l},priorSignature:o},{signingDate:u});o=m.signature;let p=r.encode({headers:{...l,":chunk-signature":{type:"binary",value:MH.fromHex(m.signature)}},body:i});a.enqueue(p)}catch(u){a.error(u)}}};return new TransformStream({...s})},Ch=class{messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(t){this.messageSigner=t.messageSigner,this.eventStreamCodec=new kH.EventStreamCodec(t.utf8Encoder,t.utf8Decoder),this.systemClockOffsetProvider=async()=>t.systemClockOffset??0}async handle(t,r,n={}){let o=r.request,{body:s,headers:i,query:a}=o;if(!(s instanceof ReadableStream))throw new Error("Eventstream payload must be a ReadableStream.");let u=new TransformStream;o.body=u.readable;let l;try{l=await t(r)}catch(_){throw o.body.cancel(),_}let p=((i.authorization||"").match(/Signature=([\w]+)$/)||[])[1]||a&&a["X-Amz-Signature"]||"",g=BH(p,await this.messageSigner(),this.eventStreamCodec,this.systemClockOffsetProvider);return s.pipeThrough(g).pipeThrough(u),l}},LH=e=>new Ch(e),UH=()=>e=>async t=>{let r={...t.input},n=await e(t),o=n.output;return r.SessionId&&o.SessionId==null&&(o.SessionId=r.SessionId),n},FH={step:"initialize",name:"injectSessionIdMiddleware",tags:["WEBSOCKET","EVENT_STREAM"],override:!0},HH=(e,t)=>r=>n=>{let{request:o}=n;if(xh.HttpRequest.isInstance(o)&&e.requestHandler.metadata?.handlerProtocol?.toLowerCase().includes("websocket")){o.protocol="wss:",o.method="GET",o.path=`${o.path}-websocket`;let{headers:s}=o;delete s["content-type"],delete s["x-amz-content-sha256"];for(let i of Object.keys(s))if(i.indexOf(t.headerPrefix)===0){let a=i.replace(t.headerPrefix,"");o.query[a]=s[i]}s["x-amz-user-agent"]&&(o.query["user-agent"]=s["x-amz-user-agent"]),o.headers={host:s.host??o.hostname}}return r(n)},qH={name:"websocketEndpointMiddleware",tags:["WEBSOCKET","EVENT_STREAM"],relation:"after",toMiddleware:"eventStreamHeaderMiddleware",override:!0},jH=(e,t)=>({applyToStack:r=>{r.addRelativeTo(HH(e,t),qH),r.add(UH(),FH)}}),gC=e=>e.protocol==="ws:"||e.protocol==="wss:",Ah=class{signer;constructor(t){this.signer=t.signer}presign(t,r={}){return this.signer.presign(t,r)}async sign(t,r){return xh.HttpRequest.isInstance(t)&&gC(t)?{...await this.signer.presign({...t,body:""},{...r,expiresIn:60,unsignableHeaders:new Set(Object.keys(t.headers).filter(o=>o!=="host"))}),body:t.body}:this.signer.sign(t,r)}},GH=e=>{let{signer:t}=e;return Object.assign(e,{signer:async r=>{let n=await t(r);if(zH(n))return new Ah({signer:n});throw new Error("Expected WebsocketSignatureV4 signer, please check the client constructor.")}})},zH=e=>!!e,VH=2e3,Th=class e{metadata={handlerProtocol:"websocket/h1.1"};config;configPromise;httpHandler;sockets={};static create(t,r=new mC.FetchHttpHandler){return typeof t?.handle=="function"?t:new e(t,r)}constructor(t,r=new mC.FetchHttpHandler){this.httpHandler=r,typeof t=="function"?(this.config={},this.configPromise=t().then(n=>this.config=n??{})):(this.config=t??{},this.configPromise=Promise.resolve(this.config))}destroy(){for(let[t,r]of Object.entries(this.sockets)){for(let n of r)n.close(1e3,"Socket closed through destroy() call");delete this.sockets[t]}}async handle(t){if(!gC(t))return this.httpHandler.handle(t);let r=$H.formatUrl(t),n=new WebSocket(r);this.sockets[r]||(this.sockets[r]=[]),this.sockets[r].push(n),n.binaryType="arraybuffer",this.config=await this.configPromise;let{connectionTimeout:o=VH}=this.config;await this.waitForReady(n,o);let{body:s}=t,i=WH(s),a=this.connect(n,i),u=KH(a);return{response:new xh.HttpResponse({statusCode:200,body:u})}}updateHttpClientConfig(t,r){this.configPromise=this.configPromise.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}removeNotUsableSockets(t){this.sockets[t]=(this.sockets[t]??[]).filter(r=>![WebSocket.CLOSING,WebSocket.CLOSED].includes(r.readyState))}waitForReady(t,r){return new Promise((n,o)=>{let s=setTimeout(()=>{this.removeNotUsableSockets(t.url),o({$metadata:{httpStatusCode:500}})},r);t.onopen=()=>{clearTimeout(s),n()}})}connect(t,r){let n,o=!1,s=()=>{},i=()=>{};t.onmessage=l=>{i({done:!1,value:new Uint8Array(l.data)})},t.onerror=l=>{o=!0,t.close(),s(l)},t.onclose=()=>{this.removeNotUsableSockets(t.url),!o&&(n?s(n):i({done:!0,value:void 0}))};let a={[Symbol.asyncIterator]:()=>({next:()=>new Promise((l,m)=>{i=l,s=m})})};return(async()=>{try{for await(let l of r)t.send(l)}catch(l){n=l}finally{t.close(1e3)}})(),a}},WH=e=>e[Symbol.asyncIterator]?e:YH(e)?hC.readableStreamtoIterable(e):{[Symbol.asyncIterator]:async function*(){yield e}},KH=e=>typeof ReadableStream=="function"?hC.iterableToReadableStream(e):e,YH=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;Ys.WebSocketFetchHandler=Th;Ys.eventStreamPayloadHandlerProvider=LH;Ys.getWebSocketPlugin=jH;Ys.resolveWebSocketConfig=GH});var SC=x(Uo=>{"use strict";c();var XH=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}},QH=(e,t,r)=>{if(!(t in e))return;let n=parseInt(e[t],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${t}'. Expected number, got '${e[t]}'.`);return n};Uo.SelectorType=void 0;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Uo.SelectorType||(Uo.SelectorType={}));Uo.booleanSelector=XH;Uo.numberSelector=QH});var ot=x(Oe=>{"use strict";c();var Jr=SC(),ou=ze(),JH=Nr(),wC="AWS_USE_DUALSTACK_ENDPOINT",bC="use_dualstack_endpoint",ZH=!1,e4={environmentVariableSelector:e=>Jr.booleanSelector(e,wC,Jr.SelectorType.ENV),configFileSelector:e=>Jr.booleanSelector(e,bC,Jr.SelectorType.CONFIG),default:!1},vC="AWS_USE_FIPS_ENDPOINT",CC="use_fips_endpoint",t4=!1,r4={environmentVariableSelector:e=>Jr.booleanSelector(e,vC,Jr.SelectorType.ENV),configFileSelector:e=>Jr.booleanSelector(e,CC,Jr.SelectorType.CONFIG),default:!1},n4=e=>{let{tls:t,endpoint:r,urlParser:n,useDualstackEndpoint:o}=e;return Object.assign(e,{tls:t??!0,endpoint:ou.normalizeProvider(typeof r=="string"?n(r):r),isCustomEndpoint:!0,useDualstackEndpoint:ou.normalizeProvider(o??!1)})},o4=async e=>{let{tls:t=!0}=e,r=await e.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let o=await e.useDualstackEndpoint(),s=await e.useFipsEndpoint(),{hostname:i}=await e.regionInfoProvider(r,{useDualstackEndpoint:o,useFipsEndpoint:s})??{};if(!i)throw new Error("Cannot resolve hostname from client config");return e.urlParser(`${t?"https:":"http:"}//${i}`)},s4=e=>{let t=ou.normalizeProvider(e.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:o,tls:s}=e;return Object.assign(e,{tls:s??!0,endpoint:r?ou.normalizeProvider(typeof r=="string"?o(r):r):()=>o4({...e,useDualstackEndpoint:t,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:t})},AC="AWS_REGION",TC="region",i4={environmentVariableSelector:e=>e[AC],configFileSelector:e=>e[TC],default:()=>{throw new Error("Region is missing")}},a4={preferredFile:"credentials"},EC=new Set,c4=(e,t=JH.isValidHostLabel)=>{if(!EC.has(e)&&!t(e))if(e==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${e}" is not a valid hostname component.`);else EC.add(e)},xC=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),u4=e=>xC(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,l4=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:async()=>{let n=typeof t=="function"?await t():t,o=u4(n);return c4(o),o},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return xC(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},_C=(e=[],{useFipsEndpoint:t,useDualstackEndpoint:r})=>e.find(({tags:n})=>t===n.includes("fips")&&r===n.includes("dualstack"))?.hostname,d4=(e,{regionHostname:t,partitionHostname:r})=>t||(r?r.replace("{region}",e):void 0),f4=(e,{partitionHash:t})=>Object.keys(t||{}).find(r=>t[r].regions.includes(e))??"aws",p4=(e,{signingRegion:t,regionRegex:r,useFipsEndpoint:n})=>{if(t)return t;if(n){let o=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),s=e.match(o);if(s)return s[0].slice(1,-1)}},m4=(e,{useFipsEndpoint:t=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:o,partitionHash:s})=>{let i=f4(e,{partitionHash:s}),a=e in o?e:s[i]?.endpoint??e,u={useFipsEndpoint:t,useDualstackEndpoint:r},l=_C(o[a]?.variants,u),m=_C(s[i]?.variants,u),p=d4(a,{regionHostname:l,partitionHostname:m});if(p===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:t,useDualstackEndpoint:r}}`);let g=p4(p,{signingRegion:o[a]?.signingRegion,regionRegex:s[i].regionRegex,useFipsEndpoint:t});return{partition:i,signingService:n,hostname:p,...g&&{signingRegion:g},...o[a]?.signingService&&{signingService:o[a].signingService}}};Oe.CONFIG_USE_DUALSTACK_ENDPOINT=bC;Oe.CONFIG_USE_FIPS_ENDPOINT=CC;Oe.DEFAULT_USE_DUALSTACK_ENDPOINT=ZH;Oe.DEFAULT_USE_FIPS_ENDPOINT=t4;Oe.ENV_USE_DUALSTACK_ENDPOINT=wC;Oe.ENV_USE_FIPS_ENDPOINT=vC;Oe.NODE_REGION_CONFIG_FILE_OPTIONS=a4;Oe.NODE_REGION_CONFIG_OPTIONS=i4;Oe.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=e4;Oe.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=r4;Oe.REGION_ENV_NAME=AC;Oe.REGION_INI_NAME=TC;Oe.getRegionInfo=m4;Oe.resolveCustomEndpointsConfig=n4;Oe.resolveEndpointsConfig=s4;Oe.resolveRegionConfig=l4});var IC=x(RC=>{"use strict";c();var h4=e=>Object.assign(e,{eventStreamMarshaller:e.eventStreamSerdeProvider(e)});RC.resolveEventStreamSerdeConfig=h4});var Fo=x(su=>{"use strict";c();var g4=oe(),PC="content-length";function OC(e){return t=>async r=>{let n=r.request;if(g4.HttpRequest.isInstance(n)){let{body:o,headers:s}=n;if(o&&Object.keys(s).map(i=>i.toLowerCase()).indexOf(PC)===-1)try{let i=e(o);n.headers={...n.headers,[PC]:String(i)}}catch{}}return t({...r,request:n})}}var NC={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},y4=e=>({applyToStack:t=>{t.add(OC(e.bodyLengthChecker),NC)}});su.contentLengthMiddleware=OC;su.contentLengthMiddlewareOptions=NC;su.getContentLengthPlugin=y4});var Ih=x(iu=>{"use strict";c();Object.defineProperty(iu,"__esModule",{value:!0});iu.getHomeDir=void 0;var S4=z("os"),E4=z("path"),Rh={},_4=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",w4=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${E4.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${n}${r}`;let o=_4();return Rh[o]||(Rh[o]=(0,S4.homedir)()),Rh[o]};iu.getHomeDir=w4});var Ph=x(au=>{"use strict";c();Object.defineProperty(au,"__esModule",{value:!0});au.getSSOTokenFilepath=void 0;var b4=z("crypto"),v4=z("path"),C4=Ih(),A4=e=>{let r=(0,b4.createHash)("sha1").update(e).digest("hex");return(0,v4.join)((0,C4.getHomeDir)(),".aws","sso","cache",`${r}.json`)};au.getSSOTokenFilepath=A4});var DC=x(Zr=>{"use strict";c();Object.defineProperty(Zr,"__esModule",{value:!0});Zr.getSSOTokenFromFile=Zr.tokenIntercept=void 0;var T4=z("fs/promises"),x4=Ph();Zr.tokenIntercept={};var R4=async e=>{if(Zr.tokenIntercept[e])return Zr.tokenIntercept[e];let t=(0,x4.getSSOTokenFilepath)(e),r=await(0,T4.readFile)(t,"utf8");return JSON.parse(r)};Zr.getSSOTokenFromFile=R4});var kC=x(ut=>{"use strict";c();Object.defineProperty(ut,"__esModule",{value:!0});ut.readFile=ut.fileIntercept=ut.filePromises=void 0;var I4=z("node:fs/promises");ut.filePromises={};ut.fileIntercept={};var P4=(e,t)=>ut.fileIntercept[e]!==void 0?ut.fileIntercept[e]:((!ut.filePromises[e]||t?.ignoreCache)&&(ut.filePromises[e]=(0,I4.readFile)(e,"utf8")),ut.filePromises[e]);ut.readFile=P4});var jt=x(Qe=>{"use strict";c();var Xs=Ih(),MC=Ph(),Oh=DC(),cu=z("path"),uu=Tr(),Ho=kC(),BC="AWS_PROFILE",LC="default",O4=e=>e.profile||process.env[BC]||LC,jn=".",N4=e=>Object.entries(e).filter(([t])=>{let r=t.indexOf(jn);return r===-1?!1:Object.values(uu.IniSectionType).includes(t.substring(0,r))}).reduce((t,[r,n])=>{let o=r.indexOf(jn),s=r.substring(0,o)===uu.IniSectionType.PROFILE?r.substring(o+1):r;return t[s]=n,t},{...e.default&&{default:e.default}}),D4="AWS_CONFIG_FILE",UC=()=>process.env[D4]||cu.join(Xs.getHomeDir(),".aws","config"),k4="AWS_SHARED_CREDENTIALS_FILE",M4=()=>process.env[k4]||cu.join(Xs.getHomeDir(),".aws","credentials"),$4=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,B4=["__proto__","profile __proto__"],Nh=e=>{let t={},r,n;for(let o of e.split(/\r?\n/)){let s=o.split(/(^|\s)[;#]/)[0].trim();if(s[0]==="["&&s[s.length-1]==="]"){r=void 0,n=void 0;let a=s.substring(1,s.length-1),u=$4.exec(a);if(u){let[,l,,m]=u;Object.values(uu.IniSectionType).includes(l)&&(r=[l,m].join(jn))}else r=a;if(B4.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=s.indexOf("=");if(![0,-1].includes(a)){let[u,l]=[s.substring(0,a).trim(),s.substring(a+1).trim()];if(l==="")n=u;else{n&&o.trimStart()===o&&(n=void 0),t[r]=t[r]||{};let m=n?[n,u].join(jn):u;t[r][m]=l}}}}return t},$C=()=>({}),FC=async(e={})=>{let{filepath:t=M4(),configFilepath:r=UC()}=e,n=Xs.getHomeDir(),o="~/",s=t;t.startsWith(o)&&(s=cu.join(n,t.slice(2)));let i=r;r.startsWith(o)&&(i=cu.join(n,r.slice(2)));let a=await Promise.all([Ho.readFile(i,{ignoreCache:e.ignoreCache}).then(Nh).then(N4).catch($C),Ho.readFile(s,{ignoreCache:e.ignoreCache}).then(Nh).catch($C)]);return{configFile:a[0],credentialsFile:a[1]}},L4=e=>Object.entries(e).filter(([t])=>t.startsWith(uu.IniSectionType.SSO_SESSION+jn)).reduce((t,[r,n])=>({...t,[r.substring(r.indexOf(jn)+1)]:n}),{}),U4=()=>({}),F4=async(e={})=>Ho.readFile(e.configFilepath??UC()).then(Nh).then(L4).catch(U4),H4=(...e)=>{let t={};for(let r of e)for(let[n,o]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],o):t[n]=o;return t},q4=async e=>{let t=await FC(e);return H4(t.configFile,t.credentialsFile)},j4={getFileRecord(){return Ho.fileIntercept},interceptFile(e,t){Ho.fileIntercept[e]=Promise.resolve(t)},getTokenRecord(){return Oh.tokenIntercept},interceptToken(e,t){Oh.tokenIntercept[e]=t}};Object.defineProperty(Qe,"getSSOTokenFromFile",{enumerable:!0,get:function(){return Oh.getSSOTokenFromFile}});Object.defineProperty(Qe,"readFile",{enumerable:!0,get:function(){return Ho.readFile}});Qe.CONFIG_PREFIX_SEPARATOR=jn;Qe.DEFAULT_PROFILE=LC;Qe.ENV_PROFILE=BC;Qe.externalDataInterceptor=j4;Qe.getProfileName=O4;Qe.loadSharedConfigFiles=FC;Qe.loadSsoSessionData=F4;Qe.parseKnownFiles=q4;Object.keys(Xs).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Qe,e)&&Object.defineProperty(Qe,e,{enumerable:!0,get:function(){return Xs[e]}})});Object.keys(MC).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Qe,e)&&Object.defineProperty(Qe,e,{enumerable:!0,get:function(){return MC[e]}})})});var Gt=x(jC=>{"use strict";c();var Qs=Le(),HC=jt();function qC(e){try{let t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch{return e}}var G4=(e,t)=>async()=>{try{let r=e(process.env,t);if(r===void 0)throw new Error;return r}catch(r){throw new Qs.CredentialsProviderError(r.message||`Not found in ENV: ${qC(e.toString())}`,{logger:t?.logger})}},z4=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=HC.getProfileName(r),{configFile:o,credentialsFile:s}=await HC.loadSharedConfigFiles(r),i=s[n]||{},a=o[n]||{},u=t==="config"?{...i,...a}:{...a,...i};try{let m=e(u,t==="config"?o:s);if(m===void 0)throw new Error;return m}catch(l){throw new Qs.CredentialsProviderError(l.message||`Not found in config files w/ profile [${n}]: ${qC(e.toString())}`,{logger:r.logger})}},V4=e=>typeof e=="function",W4=e=>V4(e)?async()=>await e():Qs.fromStatic(e),K4=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>{let{signingName:o,logger:s}=n,i={signingName:o,logger:s};return Qs.memoize(Qs.chain(G4(e,i),z4(t,n),W4(r)))};jC.loadConfig=K4});var WC=x(lu=>{"use strict";c();Object.defineProperty(lu,"__esModule",{value:!0});lu.getEndpointUrlConfig=void 0;var GC=jt(),zC="AWS_ENDPOINT_URL",VC="endpoint_url",Y4=e=>({environmentVariableSelector:t=>{let r=e.split(" ").map(s=>s.toUpperCase()),n=t[[zC,...r].join("_")];if(n)return n;let o=t[zC];if(o)return o},configFileSelector:(t,r)=>{if(r&&t.services){let o=r[["services",t.services].join(GC.CONFIG_PREFIX_SEPARATOR)];if(o){let s=e.split(" ").map(a=>a.toLowerCase()),i=o[[s.join("_"),VC].join(GC.CONFIG_PREFIX_SEPARATOR)];if(i)return i}}let n=t[VC];if(n)return n},default:void 0});lu.getEndpointUrlConfig=Y4});var KC=x(du=>{"use strict";c();Object.defineProperty(du,"__esModule",{value:!0});du.getEndpointFromConfig=void 0;var X4=Gt(),Q4=WC(),J4=async e=>(0,X4.loadConfig)((0,Q4.getEndpointUrlConfig)(e??""))();du.getEndpointFromConfig=J4});var zt=x(Er=>{"use strict";c();var XC=KC(),YC=dr(),Z4=(xe(),W(lr)),fu=ze(),eq=_f(),tq=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),iq(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!sq(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},rq=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,nq=/(\d+\.){3}\d+/,oq=/\.\./,sq=e=>rq.test(e)&&!nq.test(e)&&!oq.test(e),iq=e=>{let[t,r,n,,,o]=e.split(":"),s=t==="arn"&&e.split(":").length>=6,i=!!(s&&r&&n&&o);if(s&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i},aq=(e,t,r,n=!1)=>{let o=async()=>{let s;return n?s=r.clientContextParams?.[e]??r[e]??r[t]:s=r[e]??r[t],typeof s=="function"?s():s};return e==="credentialScope"||t==="CredentialScope"?async()=>{let s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.credentialScope??s?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{let s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.accountId??s?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let s=await o();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){let{protocol:i,hostname:a,port:u,path:l}=s;return`${i}//${a}${u?":"+u:""}${l}`}}return s}:o},Dh=e=>typeof e=="object"?"url"in e?YC.parseUrl(e.url):e:YC.parseUrl(e),QC=async(e,t,r,n)=>{if(!r.isCustomEndpoint){let i;r.serviceConfiguredEndpoint?i=await r.serviceConfiguredEndpoint():i=await XC.getEndpointFromConfig(r.serviceId),i&&(r.endpoint=()=>Promise.resolve(Dh(i)),r.isCustomEndpoint=!0)}let o=await JC(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},JC=async(e,t,r)=>{let n={},o=t?.getEndpointParameterInstructions?.()||{};for(let[s,i]of Object.entries(o))switch(i.type){case"staticContextParams":n[s]=i.value;break;case"contextParams":n[s]=e[i.name];break;case"clientContextParams":case"builtInParams":n[s]=await aq(i.name,s,r,i.type!=="builtInParams")();break;case"operationContextParams":n[s]=i.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await tq(n),n},ZC=({config:e,instructions:t})=>(r,n)=>async o=>{e.isCustomEndpoint&&Z4.setFeature(n,"ENDPOINT_OVERRIDE","N");let s=await QC(o.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=s,n.authSchemes=s.properties?.authSchemes;let i=n.authSchemes?.[0];if(i){n.signing_region=i.signingRegion,n.signing_service=i.signingName;let u=fu.getSmithyContext(n)?.selectedHttpAuthScheme?.httpAuthOption;u&&(u.signingProperties=Object.assign(u.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...o})},eA={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:eq.serializerMiddlewareOption.name},cq=(e,t)=>({applyToStack:r=>{r.addRelativeTo(ZC({config:e,instructions:t}),eA)}}),uq=e=>{let t=e.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:o}=e,s=r!=null?async()=>Dh(await fu.normalizeProvider(r)()):void 0,a=Object.assign(e,{endpoint:s,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:fu.normalizeProvider(n??!1),useFipsEndpoint:fu.normalizeProvider(o??!1)}),u;return a.serviceConfiguredEndpoint=async()=>(e.serviceId&&!u&&(u=XC.getEndpointFromConfig(e.serviceId)),u),a},lq=e=>{let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),e};Er.endpointMiddleware=ZC;Er.endpointMiddlewareOptions=eA;Er.getEndpointFromInstructions=QC;Er.getEndpointPlugin=cq;Er.resolveEndpointConfig=uq;Er.resolveEndpointRequiredConfig=lq;Er.resolveParams=JC;Er.toEndpointV1=Dh});var Mh=x(en=>{"use strict";c();var dq=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],fq=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],pq=["TimeoutError","RequestTimeout","RequestTimeoutException"],mq=[500,502,503,504],hq=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],gq=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],tA=e=>e?.$retryable!==void 0,yq=e=>dq.includes(e.name),rA=e=>e.$metadata?.clockSkewCorrected,nA=e=>{let t=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return e&&e instanceof TypeError?t.has(e.message):!1},Sq=e=>e.$metadata?.httpStatusCode===429||fq.includes(e.name)||e.$retryable?.throttling==!0,kh=(e,t=0)=>tA(e)||rA(e)||pq.includes(e.name)||hq.includes(e?.code||"")||gq.includes(e?.code||"")||mq.includes(e.$metadata?.httpStatusCode||0)||nA(e)||e.cause!==void 0&&t<=10&&kh(e.cause,t+1),Eq=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!kh(e)}return!1};en.isBrowserNetworkError=nA;en.isClockSkewCorrectedError=rA;en.isClockSkewError=yq;en.isRetryableByTrait=tA;en.isServerError=Eq;en.isThrottlingError=Sq;en.isTransientError=kh});var Gn=x(ye=>{"use strict";c();var _q=Mh();ye.RETRY_MODES=void 0;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(ye.RETRY_MODES||(ye.RETRY_MODES={}));var $h=3,wq=ye.RETRY_MODES.STANDARD,pu=class e{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(t){this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>e.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),_q.isThrottlingError(t)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}},Js=100,Fh=20*1e3,sA=500,Bh=500,iA=5,aA=10,cA=1,bq="amz-sdk-invocation-id",vq="amz-sdk-request",Cq=()=>{let e=Js;return{computeNextBackoffDelay:n=>Math.floor(Math.min(Fh,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}},oA=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(Fh,e),getRetryCost:()=>r}),Zs=class{maxAttempts;mode=ye.RETRY_MODES.STANDARD;capacity=Bh;retryBackoffStrategy=Cq();maxAttemptsProvider;constructor(t){this.maxAttempts=t,this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return oA({retryDelay:Js,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let o=r.errorType;this.retryBackoffStrategy.setDelayBase(o==="THROTTLING"?sA:Js);let s=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,s):s,a=this.getCapacityCost(o);return this.capacity-=a,oA({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(Bh,this.capacity+(t.getRetryCost()??cA))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${$h}`),$h}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?aA:iA}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}},Lh=class{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=ye.RETRY_MODES.ADAPTIVE;constructor(t,r){this.maxAttemptsProvider=t;let{rateLimiter:n}=r??{};this.rateLimiter=n??new pu,this.standardRetryStrategy=new Zs(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}},Uh=class extends Zs{computeNextBackoffDelay;constructor(t,r=Js){super(typeof t=="function"?t:async()=>t),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(t,r){let n=await super.refreshRetryTokenForRetry(t,r);return n.getRetryDelay=()=>this.computeNextBackoffDelay(n.getRetryCount()),n}};ye.AdaptiveRetryStrategy=Lh;ye.ConfiguredRetryStrategy=Uh;ye.DEFAULT_MAX_ATTEMPTS=$h;ye.DEFAULT_RETRY_DELAY_BASE=Js;ye.DEFAULT_RETRY_MODE=wq;ye.DefaultRateLimiter=pu;ye.INITIAL_RETRY_TOKENS=Bh;ye.INVOCATION_ID_HEADER=bq;ye.MAXIMUM_RETRY_DELAY=Fh;ye.NO_RETRY_INCREMENT=cA;ye.REQUEST_HEADER=vq;ye.RETRY_COST=iA;ye.StandardRetryStrategy=Zs;ye.THROTTLING_RETRY_DELAY_BASE=sA;ye.TIMEOUT_RETRY_COST=aA});var uA=x(mu=>{"use strict";c();Object.defineProperty(mu,"__esModule",{value:!0});mu.isStreamingPayload=void 0;var Aq=z("stream"),Tq=e=>e?.body instanceof Aq.Readable||typeof ReadableStream<"u"&&e?.body instanceof ReadableStream;mu.isStreamingPayload=Tq});var xt=x(Ce=>{"use strict";c();var ge=Gn(),qo=oe(),tn=Mh(),dA=wp(),lA=ze(),xq=X(),Rq=uA(),Iq=(e,t)=>{let r=e,n=ge.NO_RETRY_INCREMENT,o=ge.RETRY_COST,s=ge.TIMEOUT_RETRY_COST,i=e,a=p=>p.name==="TimeoutError"?s:o,u=p=>a(p)<=i;return Object.freeze({hasRetryTokens:u,retrieveRetryTokens:p=>{if(!u(p))throw new Error("No retry token available");let g=a(p);return i-=g,g},releaseRetryTokens:p=>{i+=p??n,i=Math.min(i,r)}})},fA=(e,t)=>Math.floor(Math.min(ge.MAXIMUM_RETRY_DELAY,Math.random()*2**t*e)),pA=e=>e?tn.isRetryableByTrait(e)||tn.isClockSkewError(e)||tn.isThrottlingError(e)||tn.isTransientError(e):!1,mA=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),hu=class{maxAttemptsProvider;retryDecider;delayDecider;retryQuota;mode=ge.RETRY_MODES.STANDARD;constructor(t,r){this.maxAttemptsProvider=t,this.retryDecider=r?.retryDecider??pA,this.delayDecider=r?.delayDecider??fA,this.retryQuota=r?.retryQuota??Iq(ge.INITIAL_RETRY_TOKENS)}shouldRetry(t,r,n){return r<n&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)}async getMaxAttempts(){let t;try{t=await this.maxAttemptsProvider()}catch{t=ge.DEFAULT_MAX_ATTEMPTS}return t}async retry(t,r,n){let o,s=0,i=0,a=await this.getMaxAttempts(),{request:u}=r;for(qo.HttpRequest.isInstance(u)&&(u.headers[ge.INVOCATION_ID_HEADER]=dA.v4());;)try{qo.HttpRequest.isInstance(u)&&(u.headers[ge.REQUEST_HEADER]=`attempt=${s+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:l,output:m}=await t(r);return n?.afterRequest&&n.afterRequest(l),this.retryQuota.releaseRetryTokens(o),m.$metadata.attempts=s+1,m.$metadata.totalRetryDelay=i,{response:l,output:m}}catch(l){let m=mA(l);if(s++,this.shouldRetry(m,s,a)){o=this.retryQuota.retrieveRetryTokens(m);let p=this.delayDecider(tn.isThrottlingError(m)?ge.THROTTLING_RETRY_DELAY_BASE:ge.DEFAULT_RETRY_DELAY_BASE,s),g=Pq(m.$response),h=Math.max(g||0,p);i+=h,await new Promise(_=>setTimeout(_,h));continue}throw m.$metadata||(m.$metadata={}),m.$metadata.attempts=s,m.$metadata.totalRetryDelay=i,m}}},Pq=e=>{if(!qo.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},Hh=class extends hu{rateLimiter;constructor(t,r){let{rateLimiter:n,...o}=r??{};super(t,o),this.rateLimiter=n??new ge.DefaultRateLimiter,this.mode=ge.RETRY_MODES.ADAPTIVE}async retry(t,r){return super.retry(t,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:n=>{this.rateLimiter.updateClientSendingRate(n)}})}},qh="AWS_MAX_ATTEMPTS",jh="max_attempts",Oq={environmentVariableSelector:e=>{let t=e[qh];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${qh} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[jh];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${jh} mast be a number, got "${t}"`);return r},default:ge.DEFAULT_MAX_ATTEMPTS},Nq=e=>{let{retryStrategy:t,retryMode:r,maxAttempts:n}=e,o=lA.normalizeProvider(n??ge.DEFAULT_MAX_ATTEMPTS);return Object.assign(e,{maxAttempts:o,retryStrategy:async()=>t||(await lA.normalizeProvider(r)()===ge.RETRY_MODES.ADAPTIVE?new ge.AdaptiveRetryStrategy(o):new ge.StandardRetryStrategy(o))})},hA="AWS_RETRY_MODE",gA="retry_mode",Dq={environmentVariableSelector:e=>e[hA],configFileSelector:e=>e[gA],default:ge.DEFAULT_RETRY_MODE},yA=()=>e=>async t=>{let{request:r}=t;return qo.HttpRequest.isInstance(r)&&(delete r.headers[ge.INVOCATION_ID_HEADER],delete r.headers[ge.REQUEST_HEADER]),e(t)},SA={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},kq=e=>({applyToStack:t=>{t.addRelativeTo(yA(),SA)}}),EA=e=>(t,r)=>async n=>{let o=await e.retryStrategy(),s=await e.maxAttempts();if(Mq(o)){o=o;let i=await o.acquireInitialRetryToken(r.partition_id),a=new Error,u=0,l=0,{request:m}=n,p=qo.HttpRequest.isInstance(m);for(p&&(m.headers[ge.INVOCATION_ID_HEADER]=dA.v4());;)try{p&&(m.headers[ge.REQUEST_HEADER]=`attempt=${u+1}; max=${s}`);let{response:g,output:h}=await t(n);return o.recordSuccess(i),h.$metadata.attempts=u+1,h.$metadata.totalRetryDelay=l,{response:g,output:h}}catch(g){let h=$q(g);if(a=mA(g),p&&Rq.isStreamingPayload(m))throw(r.logger instanceof xq.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await o.refreshRetryTokenForRetry(i,h)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=u+1,a.$metadata.totalRetryDelay=l,a}u=i.getRetryCount();let _=i.getRetryDelay();l+=_,await new Promise(T=>setTimeout(T,_))}}else return o=o,o?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,n)},Mq=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",$q=e=>{let t={error:e,errorType:Bq(e)},r=wA(e.$response);return r&&(t.retryAfterHint=r),t},Bq=e=>tn.isThrottlingError(e)?"THROTTLING":tn.isTransientError(e)?"TRANSIENT":tn.isServerError(e)?"SERVER_ERROR":"CLIENT_ERROR",_A={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Lq=e=>({applyToStack:t=>{t.add(EA(e),_A)}}),wA=e=>{if(!qo.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};Ce.AdaptiveRetryStrategy=Hh;Ce.CONFIG_MAX_ATTEMPTS=jh;Ce.CONFIG_RETRY_MODE=gA;Ce.ENV_MAX_ATTEMPTS=qh;Ce.ENV_RETRY_MODE=hA;Ce.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=Oq;Ce.NODE_RETRY_MODE_CONFIG_OPTIONS=Dq;Ce.StandardRetryStrategy=hu;Ce.defaultDelayDecider=fA;Ce.defaultRetryDecider=pA;Ce.getOmitRetryHeadersPlugin=kq;Ce.getRetryAfterHint=wA;Ce.getRetryPlugin=Lq;Ce.omitRetryHeadersMiddleware=yA;Ce.omitRetryHeadersMiddlewareOptions=SA;Ce.resolveRetryConfig=Nq;Ce.retryMiddleware=EA;Ce.retryMiddlewareOptions=_A});var Vh=x(rn=>{"use strict";c();Object.defineProperty(rn,"__esModule",{value:!0});rn.resolveHttpAuthSchemeConfig=rn.defaultBedrockRuntimeHttpAuthSchemeProvider=rn.defaultBedrockRuntimeHttpAuthSchemeParametersProvider=void 0;var Uq=(Pe(),W(Kr)),Gh=(xe(),W(lr)),zh=ze(),Fq=async(e,t,r)=>({operation:(0,zh.getSmithyContext)(t).operation,region:await(0,zh.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});rn.defaultBedrockRuntimeHttpAuthSchemeParametersProvider=Fq;function Hq(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"bedrock",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function qq(e){return{schemeId:"smithy.api#httpBearerAuth",propertiesExtractor:({profile:t,filepath:r,configFilepath:n,ignoreCache:o},s)=>({identityProperties:{profile:t,filepath:r,configFilepath:n,ignoreCache:o}})}}var jq=e=>{let t=[];switch(e.operation){default:t.push(Hq(e)),t.push(qq(e))}return t};rn.defaultBedrockRuntimeHttpAuthSchemeProvider=jq;var Gq=e=>{let t=(0,Gh.memoizeIdentityProvider)(e.token,Gh.isIdentityExpired,Gh.doesIdentityRequireRefresh),r=(0,Uq.resolveAwsSdkSigV4Config)(e);return Object.assign(r,{authSchemePreference:(0,zh.normalizeProvider)(e.authSchemePreference??[]),token:t})};rn.resolveHttpAuthSchemeConfig=Gq});var bA=x((tle,zq)=>{zq.exports={name:"@aws-sdk/client-bedrock-runtime",description:"AWS SDK for JavaScript Bedrock Runtime Client for Node.js, Browser and React Native",version:"3.972.0",scripts:{build:"concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline client-bedrock-runtime","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"premove dist-cjs dist-es dist-types tsconfig.cjs.tsbuildinfo tsconfig.es.tsbuildinfo tsconfig.types.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo bedrock-runtime","test:index":"tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.972.0","@aws-sdk/credential-provider-node":"3.972.0","@aws-sdk/eventstream-handler-node":"3.972.0","@aws-sdk/middleware-eventstream":"3.972.0","@aws-sdk/middleware-host-header":"3.972.0","@aws-sdk/middleware-logger":"3.972.0","@aws-sdk/middleware-recursion-detection":"3.972.0","@aws-sdk/middleware-user-agent":"3.972.0","@aws-sdk/middleware-websocket":"3.972.0","@aws-sdk/region-config-resolver":"3.972.0","@aws-sdk/token-providers":"3.972.0","@aws-sdk/types":"3.972.0","@aws-sdk/util-endpoints":"3.972.0","@aws-sdk/util-user-agent-browser":"3.972.0","@aws-sdk/util-user-agent-node":"3.972.0","@smithy/config-resolver":"^4.4.6","@smithy/core":"^3.20.6","@smithy/eventstream-serde-browser":"^4.2.8","@smithy/eventstream-serde-config-resolver":"^4.3.8","@smithy/eventstream-serde-node":"^4.2.8","@smithy/fetch-http-handler":"^5.3.9","@smithy/hash-node":"^4.2.8","@smithy/invalid-dependency":"^4.2.8","@smithy/middleware-content-length":"^4.2.8","@smithy/middleware-endpoint":"^4.4.7","@smithy/middleware-retry":"^4.4.23","@smithy/middleware-serde":"^4.2.9","@smithy/middleware-stack":"^4.2.8","@smithy/node-config-provider":"^4.3.8","@smithy/node-http-handler":"^4.4.8","@smithy/protocol-http":"^5.3.8","@smithy/smithy-client":"^4.10.8","@smithy/types":"^4.12.0","@smithy/url-parser":"^4.2.8","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.22","@smithy/util-defaults-mode-node":"^4.2.25","@smithy/util-endpoints":"^3.2.8","@smithy/util-middleware":"^4.2.8","@smithy/util-retry":"^4.2.8","@smithy/util-stream":"^4.5.10","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node20":"20.1.8","@types/node":"^20.14.8",concurrently:"7.0.0","downlevel-dts":"0.10.1",premove:"4.0.0",typescript:"~5.8.3"},engines:{node:">=20.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-bedrock-runtime",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-bedrock-runtime"}}});var Wh=x(nn=>{"use strict";c();var Vq=(ht(),W(fr)),Wq=Le(),vA="AWS_ACCESS_KEY_ID",CA="AWS_SECRET_ACCESS_KEY",AA="AWS_SESSION_TOKEN",TA="AWS_CREDENTIAL_EXPIRATION",xA="AWS_CREDENTIAL_SCOPE",RA="AWS_ACCOUNT_ID",Kq=e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let t=process.env[vA],r=process.env[CA],n=process.env[AA],o=process.env[TA],s=process.env[xA],i=process.env[RA];if(t&&r){let a={accessKeyId:t,secretAccessKey:r,...n&&{sessionToken:n},...o&&{expiration:new Date(o)},...s&&{credentialScope:s},...i&&{accountId:i}};return Vq.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new Wq.CredentialsProviderError("Unable to find environment variable credentials.",{logger:e?.logger})};nn.ENV_ACCOUNT_ID=RA;nn.ENV_CREDENTIAL_SCOPE=xA;nn.ENV_EXPIRATION=TA;nn.ENV_KEY=vA;nn.ENV_SECRET=CA;nn.ENV_SESSION=AA;nn.fromEnv=Kq});var ti=x(Fe=>{"use strict";c();var Vt=Le(),Yq=z("url"),Xq=z("buffer"),Qq=z("http"),Jh=Gt(),Jq=dr();function ei(e){return new Promise((t,r)=>{let n=Qq.request({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",o=>{r(Object.assign(new Vt.ProviderError("Unable to connect to instance metadata service"),o)),n.destroy()}),n.on("timeout",()=>{r(new Vt.ProviderError("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",o=>{let{statusCode:s=400}=o;(s<200||300<=s)&&(r(Object.assign(new Vt.ProviderError("Error response received from instance metadata service"),{statusCode:s})),n.destroy());let i=[];o.on("data",a=>{i.push(a)}),o.on("end",()=>{t(Xq.Buffer.concat(i)),n.destroy()})}),n.end()})}var NA=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",DA=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}}),kA=1e3,MA=0,Zh=({maxRetries:e=MA,timeout:t=kA})=>({maxRetries:e,timeout:t}),Yh=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r},gu="AWS_CONTAINER_CREDENTIALS_FULL_URI",yu="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",Xh="AWS_CONTAINER_AUTHORIZATION_TOKEN",Zq=(e={})=>{let{timeout:t,maxRetries:r}=Zh(e);return()=>Yh(async()=>{let n=await oj({logger:e.logger}),o=JSON.parse(await ej(t,n));if(!NA(o))throw new Vt.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:e.logger});return DA(o)},r)},ej=async(e,t)=>(process.env[Xh]&&(t.headers={...t.headers,Authorization:process.env[Xh]}),(await ei({...t,timeout:e})).toString()),tj="169.254.170.2",rj={localhost:!0,"127.0.0.1":!0},nj={"http:":!0,"https:":!0},oj=async({logger:e})=>{if(process.env[yu])return{hostname:tj,path:process.env[yu]};if(process.env[gu]){let t=Yq.parse(process.env[gu]);if(!t.hostname||!(t.hostname in rj))throw new Vt.CredentialsProviderError(`${t.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!t.protocol||!(t.protocol in nj))throw new Vt.CredentialsProviderError(`${t.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new Vt.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${yu} or ${gu} environment variable is set`,{tryNextLink:!1,logger:e})},Qh=class e extends Vt.CredentialsProviderError{tryNextLink;name="InstanceMetadataV1FallbackError";constructor(t,r=!0){super(t,r),this.tryNextLink=r,Object.setPrototypeOf(this,e.prototype)}};Fe.Endpoint=void 0;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(Fe.Endpoint||(Fe.Endpoint={}));var sj="AWS_EC2_METADATA_SERVICE_ENDPOINT",ij="ec2_metadata_service_endpoint",aj={environmentVariableSelector:e=>e[sj],configFileSelector:e=>e[ij],default:void 0},jo;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(jo||(jo={}));var cj="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",uj="ec2_metadata_service_endpoint_mode",lj={environmentVariableSelector:e=>e[cj],configFileSelector:e=>e[uj],default:jo.IPv4},$A=async()=>Jq.parseUrl(await dj()||await fj()),dj=async()=>Jh.loadConfig(aj)(),fj=async()=>{let e=await Jh.loadConfig(lj)();switch(e){case jo.IPv4:return Fe.Endpoint.IPv4;case jo.IPv6:return Fe.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(jo)}`)}},pj=300,mj=300,hj="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",IA=(e,t)=>{let r=pj+Math.floor(Math.random()*mj),n=new Date(Date.now()+r*1e3);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+hj);let o=e.originalExpiration??e.expiration;return{...e,...o?{originalExpiration:o}:{},expiration:n}},gj=(e,t={})=>{let r=t?.logger||console,n;return async()=>{let o;try{o=await e(),o.expiration&&o.expiration.getTime()<Date.now()&&(o=IA(o,r))}catch(s){if(n)r.warn("Credential renew failed: ",s),o=IA(n,r);else throw s}return n=o,o}},BA="/latest/meta-data/iam/security-credentials/",yj="/latest/api/token",Kh="AWS_EC2_METADATA_V1_DISABLED",PA="ec2_metadata_v1_disabled",OA="x-aws-ec2-metadata-token",Sj=(e={})=>gj(Ej(e),{logger:e.logger}),Ej=(e={})=>{let t=!1,{logger:r,profile:n}=e,{timeout:o,maxRetries:s}=Zh(e),i=async(a,u)=>{if(t||u.headers?.[OA]==null){let p=!1,g=!1,h=await Jh.loadConfig({environmentVariableSelector:_=>{let T=_[Kh];if(g=!!T&&T!=="false",T===void 0)throw new Vt.CredentialsProviderError(`${Kh} not set in env, checking config file next.`,{logger:e.logger});return g},configFileSelector:_=>{let T=_[PA];return p=!!T&&T!=="false",p},default:!1},{profile:n})();if(e.ec2MetadataV1Disabled||h){let _=[];throw e.ec2MetadataV1Disabled&&_.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),p&&_.push(`config file profile (${PA})`),g&&_.push(`process environment variable (${Kh})`),new Qh(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${_.join(", ")}].`)}}let m=(await Yh(async()=>{let p;try{p=await wj(u)}catch(g){throw g.statusCode===401&&(t=!1),g}return p},a)).trim();return Yh(async()=>{let p;try{p=await bj(m,u,e)}catch(g){throw g.statusCode===401&&(t=!1),g}return p},a)};return async()=>{let a=await $A();if(t)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(s,{...a,timeout:o});{let u;try{u=(await _j({...a,timeout:o})).toString()}catch(l){if(l?.statusCode===400)throw Object.assign(l,{message:"EC2 Metadata token request returned error"});return(l.message==="TimeoutError"||[403,404,405].includes(l.statusCode))&&(t=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(s,{...a,timeout:o})}return i(s,{...a,headers:{[OA]:u},timeout:o})}}},_j=async e=>ei({...e,path:yj,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),wj=async e=>(await ei({...e,path:BA})).toString(),bj=async(e,t,r)=>{let n=JSON.parse((await ei({...t,path:BA+e})).toString());if(!NA(n))throw new Vt.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return DA(n)};Fe.DEFAULT_MAX_RETRIES=MA;Fe.DEFAULT_TIMEOUT=kA;Fe.ENV_CMDS_AUTH_TOKEN=Xh;Fe.ENV_CMDS_FULL_URI=gu;Fe.ENV_CMDS_RELATIVE_URI=yu;Fe.fromContainerMetadata=Zq;Fe.fromInstanceMetadata=Sj;Fe.getInstanceMetadataEndpoint=$A;Fe.httpRequest=ei;Fe.providerConfigFromInit=Zh});var LA=x(Su=>{"use strict";c();Object.defineProperty(Su,"__esModule",{value:!0});Su.checkUrl=void 0;var vj=Le(),Cj="169.254.170.2",Aj="169.254.170.23",Tj="[fd00:ec2::23]",xj=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===Cj||e.hostname===Aj||e.hostname===Tj)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;let r=e.hostname.split("."),n=o=>{let s=parseInt(o,10);return 0<=s&&s<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new vj.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}};Su.checkUrl=xj});var UA=x(Eu=>{"use strict";c();Object.defineProperty(Eu,"__esModule",{value:!0});Eu.createGetRequest=Oj;Eu.getCredentials=Nj;var eg=Le(),Rj=oe(),Ij=X(),Pj=ka();function Oj(e){return new Rj.HttpRequest({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,n])=>(t[r]=n,t),{}),fragment:e.hash})}async function Nj(e,t){let n=await(0,Pj.sdkStreamMixin)(e.body).transformToString();if(e.statusCode===200){let o=JSON.parse(n);if(typeof o.AccessKeyId!="string"||typeof o.SecretAccessKey!="string"||typeof o.Token!="string"||typeof o.Expiration!="string")throw new eg.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.Token,expiration:(0,Ij.parseRfc3339DateTime)(o.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let o={};try{o=JSON.parse(n)}catch{}throw Object.assign(new eg.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:o.Code,Message:o.Message})}throw new eg.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t})}});var FA=x(_u=>{"use strict";c();Object.defineProperty(_u,"__esModule",{value:!0});_u.retryWrapper=void 0;var Dj=(e,t,r)=>async()=>{for(let n=0;n<t;++n)try{return await e()}catch{await new Promise(s=>setTimeout(s,r))}return await e()};_u.retryWrapper=Dj});var jA=x(wu=>{"use strict";c();Object.defineProperty(wu,"__esModule",{value:!0});wu.fromHttp=void 0;var kj=(Rn(),W(xn)),Mj=(ht(),W(fr)),$j=Ir(),HA=Le(),Bj=kj.__importDefault(z("fs/promises")),Lj=LA(),qA=UA(),Uj=FA(),Fj="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",Hj="http://169.254.170.2",qj="AWS_CONTAINER_CREDENTIALS_FULL_URI",jj="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",Gj="AWS_CONTAINER_AUTHORIZATION_TOKEN",zj=(e={})=>{e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let t,r=e.awsContainerCredentialsRelativeUri??process.env[Fj],n=e.awsContainerCredentialsFullUri??process.env[qj],o=e.awsContainerAuthorizationToken??process.env[Gj],s=e.awsContainerAuthorizationTokenFile??process.env[jj],i=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?.warn?console.warn:e.logger.warn.bind(e.logger);if(r&&n&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),o&&s&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),n)t=n;else if(r)t=`${Hj}${r}`;else throw new HA.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let a=new URL(t);(0,Lj.checkUrl)(a,e.logger);let u=$j.NodeHttpHandler.create({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return(0,Uj.retryWrapper)(async()=>{let l=(0,qA.createGetRequest)(a);o?l.headers.Authorization=o:s&&(l.headers.Authorization=(await Bj.default.readFile(s)).toString());try{let m=await u.handle(l);return(0,qA.getCredentials)(m.response).then(p=>(0,Mj.setCredentialFeature)(p,"CREDENTIALS_HTTP","z"))}catch(m){throw new HA.CredentialsProviderError(String(m),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)};wu.fromHttp=zj});var tg=x(bu=>{"use strict";c();Object.defineProperty(bu,"__esModule",{value:!0});bu.fromHttp=void 0;var Vj=jA();Object.defineProperty(bu,"fromHttp",{enumerable:!0,get:function(){return Vj.fromHttp}})});function Wj(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Kj(e){return{schemeId:"smithy.api#noAuth"}}var ri,GA,zA,VA,rg=b(()=>{c();Pe();ri=A(ze()),GA=async(e,t,r)=>({operation:(0,ri.getSmithyContext)(t).operation,region:await(0,ri.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});zA=e=>{let t=[];return e.operation==="CreateToken"?t.push(Kj(e)):t.push(Wj(e)),t},VA=e=>{let t=pr(e);return Object.assign(t,{authSchemePreference:(0,ri.normalizeProvider)(e.authSchemePreference??[])})}});var WA,KA,ng=b(()=>{c();WA=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),KA={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var Go,vu=b(()=>{Go={name:"@aws-sdk/nested-clients",version:"3.972.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"premove dist-cjs dist-es dist-types tsconfig.cjs.tsbuildinfo tsconfig.es.tsbuildinfo tsconfig.types.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=20.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.972.0","@aws-sdk/middleware-host-header":"3.972.0","@aws-sdk/middleware-logger":"3.972.0","@aws-sdk/middleware-recursion-detection":"3.972.0","@aws-sdk/middleware-user-agent":"3.972.0","@aws-sdk/region-config-resolver":"3.972.0","@aws-sdk/types":"3.972.0","@aws-sdk/util-endpoints":"3.972.0","@aws-sdk/util-user-agent-browser":"3.972.0","@aws-sdk/util-user-agent-node":"3.972.0","@smithy/config-resolver":"^4.4.6","@smithy/core":"^3.20.6","@smithy/fetch-http-handler":"^5.3.9","@smithy/hash-node":"^4.2.8","@smithy/invalid-dependency":"^4.2.8","@smithy/middleware-content-length":"^4.2.8","@smithy/middleware-endpoint":"^4.4.7","@smithy/middleware-retry":"^4.4.23","@smithy/middleware-serde":"^4.2.9","@smithy/middleware-stack":"^4.2.8","@smithy/node-config-provider":"^4.3.8","@smithy/node-http-handler":"^4.4.8","@smithy/protocol-http":"^5.3.8","@smithy/smithy-client":"^4.10.8","@smithy/types":"^4.12.0","@smithy/url-parser":"^4.2.8","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.22","@smithy/util-defaults-mode-node":"^4.2.25","@smithy/util-endpoints":"^3.2.8","@smithy/util-middleware":"^4.2.8","@smithy/util-retry":"^4.2.8","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",premove:"4.0.0",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./signin.d.ts","./signin.js","./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/signin/runtimeConfig":"./dist-es/submodules/signin/runtimeConfig.browser","./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./package.json":"./package.json","./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"},"./signin":{types:"./dist-types/submodules/signin/index.d.ts",module:"./dist-es/submodules/signin/index.js",node:"./dist-cjs/submodules/signin/index.js",import:"./dist-es/submodules/signin/index.js",require:"./dist-cjs/submodules/signin/index.js"}}}});var zo=x(zn=>{"use strict";c();var YA=z("os"),og=z("process"),Xj=Fn(),XA={isCrtAvailable:!1},Qj=()=>XA.isCrtAvailable?["md/crt-avail"]:null,QA=({serviceId:e,clientVersion:t})=>async r=>{let n=[["aws-sdk-js",t],["ua","2.1"],[`os/${YA.platform()}`,YA.release()],["lang/js"],["md/nodejs",`${og.versions.node}`]],o=Qj();o&&n.push(o),e&&n.push([`api/${e}`,t]),og.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${og.env.AWS_EXECUTION_ENV}`]);let s=await r?.userAgentAppId?.();return s?[...n,[`app/${s}`]]:[...n]},Jj=QA,JA="AWS_SDK_UA_APP_ID",ZA="sdk_ua_app_id",Zj="sdk-ua-app-id",eG={environmentVariableSelector:e=>e[JA],configFileSelector:e=>e[ZA]??e[Zj],default:Xj.DEFAULT_UA_APP_ID};zn.NODE_APP_ID_CONFIG_OPTIONS=eG;zn.UA_APP_ID_ENV_NAME=JA;zn.UA_APP_ID_INI_NAME=ZA;zn.createDefaultUserAgentProvider=QA;zn.crtAvailability=XA;zn.defaultUserAgent=Jj});var Vo=x(rT=>{"use strict";c();var sg=Ae(),tG=me(),rG=z("buffer"),eT=z("crypto"),ig=class{algorithmIdentifier;secret;hash;constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(tG.toUint8Array(tT(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?eT.createHmac(this.algorithmIdentifier,tT(this.secret)):eT.createHash(this.algorithmIdentifier)}};function tT(e,t){return rG.Buffer.isBuffer(e)?e:typeof e=="string"?sg.fromString(e,t):ArrayBuffer.isView(e)?sg.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength):sg.fromArrayBuffer(e)}rT.Hash=ig});var Wo=x(nT=>{"use strict";c();var ag=z("node:fs"),nG=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(e instanceof ag.ReadStream){if(e.path!=null)return ag.lstatSync(e.path).size;if(typeof e.fd=="number")return ag.fstatSync(e.fd).size}throw new Error(`Body Length computation failed for ${e}`)};nT.calculateBodyLength=nG});var Ko=x(aT=>{"use strict";c();var oG=ot(),oT=Gt(),sG=Le(),iG="AWS_EXECUTION_ENV",sT="AWS_REGION",iT="AWS_DEFAULT_REGION",aG="AWS_EC2_METADATA_DISABLED",cG=["in-region","cross-region","mobile","standard","legacy"],uG="/latest/meta-data/placement/region",lG="AWS_DEFAULTS_MODE",dG="defaults_mode",fG={environmentVariableSelector:e=>e[lG],configFileSelector:e=>e[dG],default:"legacy"},pG=({region:e=oT.loadConfig(oG.NODE_REGION_CONFIG_OPTIONS),defaultsMode:t=oT.loadConfig(fG)}={})=>sG.memoize(async()=>{let r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return mG(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${cG.join(", ")}, got ${r}`)}}),mG=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await hG();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},hG=async()=>{if(process.env[iG]&&(process.env[sT]||process.env[iT]))return process.env[sT]??process.env[iT];if(!process.env[aG])try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>A(ti())),r=await e();return(await t({...r,path:uG})).toString()}catch{}};aT.resolveDefaultsModeConfig=pG});var cT=x(Cu=>{"use strict";c();Object.defineProperty(Cu,"__esModule",{value:!0});Cu.fromBase64=void 0;var gG=Ae(),yG=/^[A-Za-z0-9+/]*={0,2}$/,SG=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!yG.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,gG.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};Cu.fromBase64=SG});var uT=x(Au=>{"use strict";c();Object.defineProperty(Au,"__esModule",{value:!0});Au.toBase64=void 0;var EG=Ae(),_G=me(),wG=e=>{let t;if(typeof e=="string"?t=(0,_G.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,EG.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};Au.toBase64=wG});var Tu=x(ni=>{"use strict";c();var lT=cT(),dT=uT();Object.keys(lT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ni,e)&&Object.defineProperty(ni,e,{enumerable:!0,get:function(){return lT[e]}})});Object.keys(dT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ni,e)&&Object.defineProperty(ni,e,{enumerable:!0,get:function(){return dT[e]}})})});var wT,St,fT,oi,Yo,Xo,_r,cg,ug,pT,mT,hT,bT,vT,yt,gT,CT,yT,ST,ET,_T,bG,AT,TT=b(()=>{c();wT="required",St="argv",fT="isSet",oi="booleanEquals",Yo="error",Xo="endpoint",_r="tree",cg="PartitionResult",ug="getAttr",pT={[wT]:!1,type:"string"},mT={[wT]:!0,default:!1,type:"boolean"},hT={ref:"Endpoint"},bT={fn:oi,[St]:[{ref:"UseFIPS"},!0]},vT={fn:oi,[St]:[{ref:"UseDualStack"},!0]},yt={},gT={fn:ug,[St]:[{ref:cg},"supportsFIPS"]},CT={ref:cg},yT={fn:oi,[St]:[!0,{fn:ug,[St]:[CT,"supportsDualStack"]}]},ST=[bT],ET=[vT],_T=[{ref:"Region"}],bG={version:"1.0",parameters:{Region:pT,UseDualStack:mT,UseFIPS:mT,Endpoint:pT},rules:[{conditions:[{fn:fT,[St]:[hT]}],rules:[{conditions:ST,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Yo},{conditions:ET,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Yo},{endpoint:{url:hT,properties:yt,headers:yt},type:Xo}],type:_r},{conditions:[{fn:fT,[St]:_T}],rules:[{conditions:[{fn:"aws.partition",[St]:_T,assign:cg}],rules:[{conditions:[bT,vT],rules:[{conditions:[{fn:oi,[St]:[!0,gT]},yT],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:yt,headers:yt},type:Xo}],type:_r},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Yo}],type:_r},{conditions:ST,rules:[{conditions:[{fn:oi,[St]:[gT,!0]}],rules:[{conditions:[{fn:"stringEquals",[St]:[{fn:ug,[St]:[CT,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:yt,headers:yt},type:Xo},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:yt,headers:yt},type:Xo}],type:_r},{error:"FIPS is enabled but this partition does not support FIPS",type:Yo}],type:_r},{conditions:ET,rules:[{conditions:[yT],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:yt,headers:yt},type:Xo}],type:_r},{error:"DualStack is enabled but this partition does not support DualStack",type:Yo}],type:_r},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:yt,headers:yt},type:Xo}],type:_r}],type:_r},{error:"Invalid Configuration: Missing Region",type:Yo}]},AT=bG});var xT,Qo,vG,RT,IT=b(()=>{c();xT=A(Mn()),Qo=A(Nr());TT();vG=new Qo.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),RT=(e,t={})=>vG.get(e,()=>(0,Qo.resolveEndpoint)(AT,{endpointParams:e,logger:t.logger}));Qo.customEndpointFunctions.aws=xT.awsEndpointFunctions});var PT,OT,xu,Ru,NT,DT=b(()=>{c();Pe();Un();xe();PT=A(X()),OT=A(dr()),xu=A(Tu()),Ru=A(me());rg();IT();NT=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??xu.fromBase64,base64Encoder:e?.base64Encoder??xu.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??RT,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??zA,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Be},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new At}],logger:e?.logger??new PT.NoOpLogger,protocol:e?.protocol??zr,protocolSettings:e?.protocolSettings??{defaultNamespace:"com.amazonaws.ssooidc",version:"2019-06-10",serviceTarget:"AWSSSOOIDCService"},serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??OT.parseUrl,utf8Decoder:e?.utf8Decoder??Ru.fromUtf8,utf8Encoder:e?.utf8Encoder??Ru.toUtf8})});var Iu,sn,kT,Pu,on,Ou,Nu,MT,$T,BT,LT,UT=b(()=>{c();vu();Pe();Iu=A(zo()),sn=A(ot()),kT=A(Vo()),Pu=A(xt()),on=A(Gt()),Ou=A(Ir()),Nu=A(X()),MT=A(Wo()),$T=A(Ko()),BT=A(Gn());DT();LT=e=>{(0,Nu.emitWarningIfUnsupportedVersion)(process.version);let t=(0,$T.resolveDefaultsModeConfig)(e),r=()=>t().then(Nu.loadConfigsForDefaultMode),n=NT(e);Dr(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,on.loadConfig)(Mr,o),bodyLengthChecker:e?.bodyLengthChecker??MT.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Iu.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Go.version}),maxAttempts:e?.maxAttempts??(0,on.loadConfig)(Pu.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,on.loadConfig)(sn.NODE_REGION_CONFIG_OPTIONS,{...sn.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:Ou.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,on.loadConfig)({...Pu.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||BT.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??kT.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??Ou.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,on.loadConfig)(sn.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,on.loadConfig)(sn.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,on.loadConfig)(Iu.NODE_APP_ID_CONFIG_OPTIONS,o)}}});var HT=x(Jo=>{"use strict";c();Object.defineProperty(Jo,"__esModule",{value:!0});Jo.warning=void 0;Jo.stsRegionDefaultResolver=AG;var FT=ot(),CG=Gt();function AG(e={}){return(0,CG.loadConfig)({...FT.NODE_REGION_CONFIG_OPTIONS,async default(){return Jo.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...FT.NODE_REGION_CONFIG_FILE_OPTIONS,...e})}Jo.warning={silence:!1}});var Vn=x(Wt=>{"use strict";c();var qT=HT(),si=ot(),TG=e=>({setRegion(t){e.region=t},region(){return e.region}}),xG=e=>({region:e.region()});Object.defineProperty(Wt,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return si.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(Wt,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return si.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(Wt,"REGION_ENV_NAME",{enumerable:!0,get:function(){return si.REGION_ENV_NAME}});Object.defineProperty(Wt,"REGION_INI_NAME",{enumerable:!0,get:function(){return si.REGION_INI_NAME}});Object.defineProperty(Wt,"resolveRegionConfig",{enumerable:!0,get:function(){return si.resolveRegionConfig}});Wt.getAwsRegionExtensionConfiguration=TG;Wt.resolveAwsRegionExtensionConfiguration=xG;Object.keys(qT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Wt,e)&&Object.defineProperty(Wt,e,{enumerable:!0,get:function(){return qT[e]}})})});var jT,GT,zT=b(()=>{c();jT=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},GT=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Du,ku,Mu,VT,WT=b(()=>{c();Du=A(Vn()),ku=A(oe()),Mu=A(X());zT();VT=(e,t)=>{let r=Object.assign((0,Du.getAwsRegionExtensionConfiguration)(e),(0,Mu.getDefaultExtensionConfiguration)(e),(0,ku.getHttpHandlerExtensionConfiguration)(e),jT(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,Du.resolveAwsRegionExtensionConfiguration)(r),(0,Mu.resolveDefaultRuntimeConfig)(r),(0,ku.resolveHttpHandlerRuntimeConfig)(r),GT(r))}});var $u,KT,YT,Bu,XT,QT,JT,Lu,lg,ii,dg=b(()=>{c();$u=A(lo()),KT=A(fo()),YT=A(po()),Bu=A(Fn()),XT=A(ot());xe();ne();QT=A(Fo()),JT=A(zt()),Lu=A(xt()),lg=A(X());rg();ng();UT();WT();ii=class extends lg.Client{config;constructor(...[t]){let r=LT(t||{});super(r),this.initConfig=r;let n=WA(r),o=(0,Bu.resolveUserAgentConfig)(n),s=(0,Lu.resolveRetryConfig)(o),i=(0,XT.resolveRegionConfig)(s),a=(0,$u.resolveHostHeaderConfig)(i),u=(0,JT.resolveEndpointConfig)(a),l=VA(u),m=VT(l,t?.extensions||[]);this.config=m,this.middlewareStack.use(An(this.config)),this.middlewareStack.use((0,Bu.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Lu.getRetryPlugin)(this.config)),this.middlewareStack.use((0,QT.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,$u.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,KT.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,YT.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(vn(this.config,{httpAuthSchemeParametersProvider:GA,identityProviderConfigProvider:async p=>new ur({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(Cn(this.config))}destroy(){super.destroy()}}});var ZT,Re,Uu=b(()=>{c();ZT=A(X()),Re=class e extends ZT.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var ai,ci,ui,li,di,fi,pi,mi,hi,gi,yi,fg=b(()=>{c();Uu();ai=class e extends Re{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},ci=class e extends Re{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},ui=class e extends Re{name="ExpiredTokenException";$fault="client";error;error_description;constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},li=class e extends Re{name="InternalServerException";$fault="server";error;error_description;constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},di=class e extends Re{name="InvalidClientException";$fault="client";error;error_description;constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},fi=class e extends Re{name="InvalidGrantException";$fault="client";error;error_description;constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},pi=class e extends Re{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},mi=class e extends Re{name="InvalidScopeException";$fault="client";error;error_description;constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},hi=class e extends Re{name="SlowDownException";$fault="client";error;error_description;constructor(t){super({name:"SlowDownException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},gi=class e extends Re{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},yi=class e extends Re{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}}});var RG,IG,PG,OG,NG,DG,kG,MG,$G,BG,LG,UG,FG,HG,qG,jG,GG,zG,VG,WG,Kt,KG,YG,XG,QG,JG,Se,ZG,Rt,e3,t3,It,r3,ex,tx,n3,o3,s3,rx,i3,se,a3,c3,u3,l3,nx,ox,sx,ix,ax,cx,ux,lx,dx,fx,px,mx,hx,gx,yx,pg,mg=b(()=>{c();ne();fg();Uu();RG="AccessDeniedException",IG="AuthorizationPendingException",PG="AccessToken",OG="ClientSecret",NG="CreateToken",DG="CreateTokenRequest",kG="CreateTokenResponse",MG="CodeVerifier",$G="ExpiredTokenException",BG="InvalidClientException",LG="InvalidGrantException",UG="InvalidRequestException",FG="InternalServerException",HG="InvalidScopeException",qG="IdToken",jG="RefreshToken",GG="SlowDownException",zG="UnauthorizedClientException",VG="UnsupportedGrantTypeException",WG="accessToken",Kt="client",KG="clientId",YG="clientSecret",XG="codeVerifier",QG="code",JG="deviceCode",Se="error",ZG="expiresIn",Rt="error_description",e3="grantType",t3="http",It="httpError",r3="idToken",ex="reason",tx="refreshToken",n3="redirectUri",o3="scope",s3="server",rx="smithy.ts.sdk.synthetic.com.amazonaws.ssooidc",i3="tokenType",se="com.amazonaws.ssooidc",a3=[0,se,PG,8,0],c3=[0,se,OG,8,0],u3=[0,se,MG,8,0],l3=[0,se,qG,8,0],nx=[0,se,jG,8,0],ox=[-3,se,RG,{[Se]:Kt,[It]:400},[Se,ex,Rt],[0,0,0]];F.for(se).registerError(ox,ai);sx=[-3,se,IG,{[Se]:Kt,[It]:400},[Se,Rt],[0,0]];F.for(se).registerError(sx,ci);ix=[3,se,DG,0,[KG,YG,e3,JG,QG,tx,o3,n3,XG],[0,[()=>c3,0],0,0,0,[()=>nx,0],64,0,[()=>u3,0]],3],ax=[3,se,kG,0,[WG,i3,ZG,tx,r3],[[()=>a3,0],0,1,[()=>nx,0],[()=>l3,0]]],cx=[-3,se,$G,{[Se]:Kt,[It]:400},[Se,Rt],[0,0]];F.for(se).registerError(cx,ui);ux=[-3,se,FG,{[Se]:s3,[It]:500},[Se,Rt],[0,0]];F.for(se).registerError(ux,li);lx=[-3,se,BG,{[Se]:Kt,[It]:401},[Se,Rt],[0,0]];F.for(se).registerError(lx,di);dx=[-3,se,LG,{[Se]:Kt,[It]:400},[Se,Rt],[0,0]];F.for(se).registerError(dx,fi);fx=[-3,se,UG,{[Se]:Kt,[It]:400},[Se,ex,Rt],[0,0,0]];F.for(se).registerError(fx,pi);px=[-3,se,HG,{[Se]:Kt,[It]:400},[Se,Rt],[0,0]];F.for(se).registerError(px,mi);mx=[-3,se,GG,{[Se]:Kt,[It]:400},[Se,Rt],[0,0]];F.for(se).registerError(mx,hi);hx=[-3,se,zG,{[Se]:Kt,[It]:400},[Se,Rt],[0,0]];F.for(se).registerError(hx,gi);gx=[-3,se,VG,{[Se]:Kt,[It]:400},[Se,Rt],[0,0]];F.for(se).registerError(gx,yi);yx=[-3,rx,"SSOOIDCServiceException",0,[],[]];F.for(rx).registerError(yx,Re);pg=[9,se,NG,{[t3]:["POST","/token",200]},()=>ix,()=>ax]});var Sx,hg,Si,gg=b(()=>{c();Sx=A(zt()),hg=A(X());ng();mg();Si=class extends hg.Command.classBuilder().ep(KA).m(function(t,r,n,o){return[(0,Sx.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").sc(pg).build(){}});var Ex,d3,Fu,_x=b(()=>{c();Ex=A(X());gg();dg();d3={CreateTokenCommand:Si},Fu=class extends ii{};(0,Ex.createAggregatedClient)(d3,Fu)});var wx=b(()=>{c();gg()});var f3,p3,bx=b(()=>{c();f3={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},p3={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"}});var vx=b(()=>{c()});var yg={};rt(yg,{$Command:()=>hg.Command,AccessDeniedException:()=>ai,AccessDeniedException$:()=>ox,AccessDeniedExceptionReason:()=>f3,AuthorizationPendingException:()=>ci,AuthorizationPendingException$:()=>sx,CreateToken$:()=>pg,CreateTokenCommand:()=>Si,CreateTokenRequest$:()=>ix,CreateTokenResponse$:()=>ax,ExpiredTokenException:()=>ui,ExpiredTokenException$:()=>cx,InternalServerException:()=>li,InternalServerException$:()=>ux,InvalidClientException:()=>di,InvalidClientException$:()=>lx,InvalidGrantException:()=>fi,InvalidGrantException$:()=>dx,InvalidRequestException:()=>pi,InvalidRequestException$:()=>fx,InvalidRequestExceptionReason:()=>p3,InvalidScopeException:()=>mi,InvalidScopeException$:()=>px,SSOOIDC:()=>Fu,SSOOIDCClient:()=>ii,SSOOIDCServiceException:()=>Re,SSOOIDCServiceException$:()=>yx,SlowDownException:()=>hi,SlowDownException$:()=>mx,UnauthorizedClientException:()=>gi,UnauthorizedClientException$:()=>hx,UnsupportedGrantTypeException:()=>yi,UnsupportedGrantTypeException$:()=>gx,__Client:()=>lg.Client});var Sg=b(()=>{c();dg();_x();wx();mg();bx();fg();vx();Uu()});var _g=x(_i=>{"use strict";c();var m3=(ht(),W(fr)),h3=(Em(),W(yb)),lt=Le(),Ei=jt(),g3=z("fs"),y3=({logger:e,signingName:t}={})=>async()=>{if(e?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!t)throw new lt.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:e});let r=h3.getBearerTokenEnvKey(t);if(!(r in process.env))throw new lt.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:e});let n={token:process.env[r]};return m3.setTokenFeature(n,"BEARER_SERVICE_ENV_VARS","3"),n},S3=300*1e3,Eg="To refresh this SSO session run 'aws sso login' with the corresponding profile.",E3=async(e,t={},r)=>{let{SSOOIDCClient:n}=await Promise.resolve().then(()=>(Sg(),yg)),o=i=>t.clientConfig?.[i]??t.parentClientConfig?.[i]??r?.[i];return new n(Object.assign({},t.clientConfig??{},{region:e??t.clientConfig?.region,logger:o("logger"),userAgentAppId:o("userAgentAppId")}))},_3=async(e,t,r={},n)=>{let{CreateTokenCommand:o}=await Promise.resolve().then(()=>(Sg(),yg));return(await E3(t,r,n)).send(new o({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}))},Cx=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new lt.TokenProviderError(`Token is expired. ${Eg}`,!1)},Wn=(e,t,r=!1)=>{if(typeof t>"u")throw new lt.TokenProviderError(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${Eg}`,!1)},{writeFile:w3}=g3.promises,b3=(e,t)=>{let r=Ei.getSSOTokenFilepath(e),n=JSON.stringify(t,null,2);return w3(r,n)},Ax=new Date(0),Tx=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/token-providers - fromSso");let r=await Ei.parseKnownFiles(e),n=Ei.getProfileName({profile:e.profile??t?.profile}),o=r[n];if(o){if(!o.sso_session)throw new lt.TokenProviderError(`Profile '${n}' is missing required property 'sso_session'.`)}else throw new lt.TokenProviderError(`Profile '${n}' could not be found in shared credentials file.`,!1);let s=o.sso_session,a=(await Ei.loadSsoSessionData(e))[s];if(!a)throw new lt.TokenProviderError(`Sso session '${s}' could not be found in shared credentials file.`,!1);for(let h of["sso_start_url","sso_region"])if(!a[h])throw new lt.TokenProviderError(`Sso session '${s}' is missing required property '${h}'.`,!1);a.sso_start_url;let u=a.sso_region,l;try{l=await Ei.getSSOTokenFromFile(s)}catch{throw new lt.TokenProviderError(`The SSO session token associated with profile=${n} was not found or is invalid. ${Eg}`,!1)}Wn("accessToken",l.accessToken),Wn("expiresAt",l.expiresAt);let{accessToken:m,expiresAt:p}=l,g={token:m,expiration:new Date(p)};if(g.expiration.getTime()-Date.now()>S3)return g;if(Date.now()-Ax.getTime()<30*1e3)return Cx(g),g;Wn("clientId",l.clientId,!0),Wn("clientSecret",l.clientSecret,!0),Wn("refreshToken",l.refreshToken,!0);try{Ax.setTime(Date.now());let h=await _3(l,u,e,t);Wn("accessToken",h.accessToken),Wn("expiresIn",h.expiresIn);let _=new Date(Date.now()+h.expiresIn*1e3);try{await b3(s,{...l,accessToken:h.accessToken,expiresAt:_.toISOString(),refreshToken:h.refreshToken})}catch{}return{token:h.accessToken,expiration:_}}catch{return Cx(g),g}},v3=({token:e,logger:t})=>async()=>{if(t?.debug("@aws-sdk/token-providers - fromStatic"),!e||!e.token)throw new lt.TokenProviderError("Please pass a valid token to fromStatic",!1);return e},C3=(e={})=>lt.memoize(lt.chain(Tx(e),async()=>{throw new lt.TokenProviderError("Could not load token from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);_i.fromEnvSigningName=y3;_i.fromSso=Tx;_i.fromStatic=v3;_i.nodeProvider=C3});var bg=x(an=>{"use strict";c();Object.defineProperty(an,"__esModule",{value:!0});an.resolveHttpAuthSchemeConfig=an.defaultSSOHttpAuthSchemeProvider=an.defaultSSOHttpAuthSchemeParametersProvider=void 0;var A3=(Pe(),W(Kr)),wg=ze(),T3=async(e,t,r)=>({operation:(0,wg.getSmithyContext)(t).operation,region:await(0,wg.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});an.defaultSSOHttpAuthSchemeParametersProvider=T3;function x3(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Hu(e){return{schemeId:"smithy.api#noAuth"}}var R3=e=>{let t=[];switch(e.operation){case"GetRoleCredentials":{t.push(Hu(e));break}case"ListAccountRoles":{t.push(Hu(e));break}case"ListAccounts":{t.push(Hu(e));break}case"Logout":{t.push(Hu(e));break}default:t.push(x3(e))}return t};an.defaultSSOHttpAuthSchemeProvider=R3;var I3=e=>{let t=(0,A3.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,wg.normalizeProvider)(e.authSchemePreference??[])})};an.resolveHttpAuthSchemeConfig=I3});var xx=x((Zde,P3)=>{P3.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.972.0",scripts:{build:"concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"premove dist-cjs dist-es dist-types tsconfig.cjs.tsbuildinfo tsconfig.es.tsbuildinfo tsconfig.types.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso","test:index":"tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.972.0","@aws-sdk/middleware-host-header":"3.972.0","@aws-sdk/middleware-logger":"3.972.0","@aws-sdk/middleware-recursion-detection":"3.972.0","@aws-sdk/middleware-user-agent":"3.972.0","@aws-sdk/region-config-resolver":"3.972.0","@aws-sdk/types":"3.972.0","@aws-sdk/util-endpoints":"3.972.0","@aws-sdk/util-user-agent-browser":"3.972.0","@aws-sdk/util-user-agent-node":"3.972.0","@smithy/config-resolver":"^4.4.6","@smithy/core":"^3.20.6","@smithy/fetch-http-handler":"^5.3.9","@smithy/hash-node":"^4.2.8","@smithy/invalid-dependency":"^4.2.8","@smithy/middleware-content-length":"^4.2.8","@smithy/middleware-endpoint":"^4.4.7","@smithy/middleware-retry":"^4.4.23","@smithy/middleware-serde":"^4.2.9","@smithy/middleware-stack":"^4.2.8","@smithy/node-config-provider":"^4.3.8","@smithy/node-http-handler":"^4.4.8","@smithy/protocol-http":"^5.3.8","@smithy/smithy-client":"^4.10.8","@smithy/types":"^4.12.0","@smithy/url-parser":"^4.2.8","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.22","@smithy/util-defaults-mode-node":"^4.2.25","@smithy/util-endpoints":"^3.2.8","@smithy/util-middleware":"^4.2.8","@smithy/util-retry":"^4.2.8","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node20":"20.1.8","@types/node":"^20.14.8",concurrently:"7.0.0","downlevel-dts":"0.10.1",premove:"4.0.0",typescript:"~5.8.3"},engines:{node:">=20.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var Rx=x(qu=>{"use strict";c();Object.defineProperty(qu,"__esModule",{value:!0});qu.fromBase64=void 0;var O3=Ae(),N3=/^[A-Za-z0-9+/]*={0,2}$/,D3=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!N3.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,O3.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};qu.fromBase64=D3});var Ix=x(ju=>{"use strict";c();Object.defineProperty(ju,"__esModule",{value:!0});ju.toBase64=void 0;var k3=Ae(),M3=me(),$3=e=>{let t;if(typeof e=="string"?t=(0,M3.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,k3.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};ju.toBase64=$3});var Nx=x(wi=>{"use strict";c();var Px=Rx(),Ox=Ix();Object.keys(Px).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(wi,e)&&Object.defineProperty(wi,e,{enumerable:!0,get:function(){return Px[e]}})});Object.keys(Ox).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(wi,e)&&Object.defineProperty(wi,e,{enumerable:!0,get:function(){return Ox[e]}})})});var Wx=x(Gu=>{"use strict";c();Object.defineProperty(Gu,"__esModule",{value:!0});Gu.ruleSet=void 0;var jx="required",_t="fn",wt="argv",ts="ref",Dx=!0,kx="isSet",bi="booleanEquals",Zo="error",es="endpoint",wr="tree",vg="PartitionResult",Cg="getAttr",Mx={[jx]:!1,type:"string"},$x={[jx]:!0,default:!1,type:"boolean"},Bx={[ts]:"Endpoint"},Gx={[_t]:bi,[wt]:[{[ts]:"UseFIPS"},!0]},zx={[_t]:bi,[wt]:[{[ts]:"UseDualStack"},!0]},Et={},Lx={[_t]:Cg,[wt]:[{[ts]:vg},"supportsFIPS"]},Vx={[ts]:vg},Ux={[_t]:bi,[wt]:[!0,{[_t]:Cg,[wt]:[Vx,"supportsDualStack"]}]},Fx=[Gx],Hx=[zx],qx=[{[ts]:"Region"}],B3={version:"1.0",parameters:{Region:Mx,UseDualStack:$x,UseFIPS:$x,Endpoint:Mx},rules:[{conditions:[{[_t]:kx,[wt]:[Bx]}],rules:[{conditions:Fx,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Zo},{conditions:Hx,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Zo},{endpoint:{url:Bx,properties:Et,headers:Et},type:es}],type:wr},{conditions:[{[_t]:kx,[wt]:qx}],rules:[{conditions:[{[_t]:"aws.partition",[wt]:qx,assign:vg}],rules:[{conditions:[Gx,zx],rules:[{conditions:[{[_t]:bi,[wt]:[Dx,Lx]},Ux],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Et,headers:Et},type:es}],type:wr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Zo}],type:wr},{conditions:Fx,rules:[{conditions:[{[_t]:bi,[wt]:[Lx,Dx]}],rules:[{conditions:[{[_t]:"stringEquals",[wt]:[{[_t]:Cg,[wt]:[Vx,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:Et,headers:Et},type:es},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Et,headers:Et},type:es}],type:wr},{error:"FIPS is enabled but this partition does not support FIPS",type:Zo}],type:wr},{conditions:Hx,rules:[{conditions:[Ux],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Et,headers:Et},type:es}],type:wr},{error:"DualStack is enabled but this partition does not support DualStack",type:Zo}],type:wr},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Et,headers:Et},type:es}],type:wr}],type:wr},{error:"Invalid Configuration: Missing Region",type:Zo}]};Gu.ruleSet=B3});var Kx=x(zu=>{"use strict";c();Object.defineProperty(zu,"__esModule",{value:!0});zu.defaultEndpointResolver=void 0;var L3=Mn(),Ag=Nr(),U3=Wx(),F3=new Ag.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),H3=(e,t={})=>F3.get(e,()=>(0,Ag.resolveEndpoint)(U3.ruleSet,{endpointParams:e,logger:t.logger}));zu.defaultEndpointResolver=H3;Ag.customEndpointFunctions.aws=L3.awsEndpointFunctions});var Qx=x(Vu=>{"use strict";c();Object.defineProperty(Vu,"__esModule",{value:!0});Vu.getRuntimeConfig=void 0;var q3=(Pe(),W(Kr)),j3=(Un(),W(ah)),G3=(xe(),W(lr)),z3=X(),V3=dr(),Yx=Nx(),Xx=me(),W3=bg(),K3=Kx(),Y3=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Yx.fromBase64,base64Encoder:e?.base64Encoder??Yx.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??K3.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??W3.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new q3.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new G3.NoAuthSigner}],logger:e?.logger??new z3.NoOpLogger,protocol:e?.protocol??j3.AwsRestJsonProtocol,protocolSettings:e?.protocolSettings??{defaultNamespace:"com.amazonaws.sso",version:"2019-06-10",serviceTarget:"SWBPortalService"},serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??V3.parseUrl,utf8Decoder:e?.utf8Decoder??Xx.fromUtf8,utf8Encoder:e?.utf8Encoder??Xx.toUtf8});Vu.getRuntimeConfig=Y3});var nR=x(Ku=>{"use strict";c();Object.defineProperty(Ku,"__esModule",{value:!0});Ku.getRuntimeConfig=void 0;var X3=(Rn(),W(xn)),Q3=X3.__importDefault(xx()),Jx=(Pe(),W(Kr)),Zx=zo(),Wu=ot(),J3=Vo(),eR=xt(),Kn=Gt(),tR=Ir(),rR=X(),Z3=Wo(),e6=Ko(),t6=Gn(),r6=Qx(),n6=e=>{(0,rR.emitWarningIfUnsupportedVersion)(process.version);let t=(0,e6.resolveDefaultsModeConfig)(e),r=()=>t().then(rR.loadConfigsForDefaultMode),n=(0,r6.getRuntimeConfig)(e);(0,Jx.emitWarningIfUnsupportedVersion)(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Kn.loadConfig)(Jx.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,o),bodyLengthChecker:e?.bodyLengthChecker??Z3.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Zx.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Q3.default.version}),maxAttempts:e?.maxAttempts??(0,Kn.loadConfig)(eR.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Kn.loadConfig)(Wu.NODE_REGION_CONFIG_OPTIONS,{...Wu.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:tR.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Kn.loadConfig)({...eR.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||t6.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??J3.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??tR.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Kn.loadConfig)(Wu.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,Kn.loadConfig)(Wu.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,Kn.loadConfig)(Zx.NODE_APP_ID_CONFIG_OPTIONS,o)}};Ku.getRuntimeConfig=n6});var MR=x(J=>{"use strict";c();var oR=lo(),o6=fo(),s6=po(),sR=Fn(),i6=ot(),vi=(xe(),W(lr)),ns=(ne(),W(ja)),a6=Fo(),Ti=zt(),iR=xt(),Pt=X(),aR=bg(),c6=nR(),cR=Vn(),uR=oe(),u6=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),rl={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},l6=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},d6=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),f6=(e,t)=>{let r=Object.assign(cR.getAwsRegionExtensionConfiguration(e),Pt.getDefaultExtensionConfiguration(e),uR.getHttpHandlerExtensionConfiguration(e),l6(e));return t.forEach(n=>n.configure(r)),Object.assign(e,cR.resolveAwsRegionExtensionConfiguration(r),Pt.resolveDefaultRuntimeConfig(r),uR.resolveHttpHandlerRuntimeConfig(r),d6(r))},rs=class extends Pt.Client{config;constructor(...[t]){let r=c6.getRuntimeConfig(t||{});super(r),this.initConfig=r;let n=u6(r),o=sR.resolveUserAgentConfig(n),s=iR.resolveRetryConfig(o),i=i6.resolveRegionConfig(s),a=oR.resolveHostHeaderConfig(i),u=Ti.resolveEndpointConfig(a),l=aR.resolveHttpAuthSchemeConfig(u),m=f6(l,t?.extensions||[]);this.config=m,this.middlewareStack.use(ns.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(sR.getUserAgentPlugin(this.config)),this.middlewareStack.use(iR.getRetryPlugin(this.config)),this.middlewareStack.use(a6.getContentLengthPlugin(this.config)),this.middlewareStack.use(oR.getHostHeaderPlugin(this.config)),this.middlewareStack.use(o6.getLoggerPlugin(this.config)),this.middlewareStack.use(s6.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(vi.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:aR.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async p=>new vi.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(vi.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},cn=class e extends Pt.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},Yu=class e extends cn{name="InvalidRequestException";$fault="client";constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Xu=class e extends cn{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Qu=class e extends cn{name="TooManyRequestsException";$fault="client";constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ju=class e extends cn{name="UnauthorizedException";$fault="client";constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},p6="AccountInfo",m6="AccountListType",h6="AccessTokenType",g6="GetRoleCredentials",y6="GetRoleCredentialsRequest",S6="GetRoleCredentialsResponse",E6="InvalidRequestException",_6="Logout",w6="ListAccounts",b6="ListAccountsRequest",v6="ListAccountRolesRequest",C6="ListAccountRolesResponse",A6="ListAccountsResponse",T6="ListAccountRoles",x6="LogoutRequest",R6="RoleCredentials",I6="RoleInfo",P6="RoleListType",O6="ResourceNotFoundException",N6="SecretAccessKeyType",D6="SessionTokenType",k6="TooManyRequestsException",M6="UnauthorizedException",nl="accountId",$6="accessKeyId",B6="accountList",L6="accountName",ol="accessToken",lR="account_id",sl="client",il="error",U6="emailAddress",F6="expiration",al="http",cl="httpError",ul="httpHeader",Yn="httpQuery",ll="message",dR="maxResults",fR="max_result",dl="nextToken",pR="next_token",H6="roleCredentials",q6="roleList",mR="roleName",j6="role_name",hR="smithy.ts.sdk.synthetic.com.amazonaws.sso",G6="secretAccessKey",z6="sessionToken",fl="x-amz-sso_bearer_token",fe="com.amazonaws.sso",pl=[0,fe,h6,8,0],V6=[0,fe,N6,8,0],W6=[0,fe,D6,8,0],gR=[3,fe,p6,0,[nl,L6,U6],[0,0,0]],yR=[3,fe,y6,0,[mR,nl,ol],[[0,{[Yn]:j6}],[0,{[Yn]:lR}],[()=>pl,{[ul]:fl}]],3],SR=[3,fe,S6,0,[H6],[[()=>TR,0]]],ER=[-3,fe,E6,{[il]:sl,[cl]:400},[ll],[0]];ns.TypeRegistry.for(fe).registerError(ER,Yu);var _R=[3,fe,v6,0,[ol,nl,dl,dR],[[()=>pl,{[ul]:fl}],[0,{[Yn]:lR}],[0,{[Yn]:pR}],[1,{[Yn]:fR}]],2],wR=[3,fe,C6,0,[dl,q6],[0,()=>X6]],bR=[3,fe,b6,0,[ol,dl,dR],[[()=>pl,{[ul]:fl}],[0,{[Yn]:pR}],[1,{[Yn]:fR}]],1],vR=[3,fe,A6,0,[dl,B6],[0,()=>Y6]],CR=[3,fe,x6,0,[ol],[[()=>pl,{[ul]:fl}]],1],AR=[-3,fe,O6,{[il]:sl,[cl]:404},[ll],[0]];ns.TypeRegistry.for(fe).registerError(AR,Xu);var TR=[3,fe,R6,0,[$6,G6,z6,F6],[0,[()=>V6,0],[()=>W6,0],1]],xR=[3,fe,I6,0,[mR,nl],[0,0]],RR=[-3,fe,k6,{[il]:sl,[cl]:429},[ll],[0]];ns.TypeRegistry.for(fe).registerError(RR,Qu);var IR=[-3,fe,M6,{[il]:sl,[cl]:401},[ll],[0]];ns.TypeRegistry.for(fe).registerError(IR,Ju);var K6="unit",PR=[-3,hR,"SSOServiceException",0,[],[]];ns.TypeRegistry.for(hR).registerError(PR,cn);var Y6=[1,fe,m6,0,()=>gR],X6=[1,fe,P6,0,()=>xR],OR=[9,fe,g6,{[al]:["GET","/federation/credentials",200]},()=>yR,()=>SR],NR=[9,fe,T6,{[al]:["GET","/assignment/roles",200]},()=>_R,()=>wR],DR=[9,fe,w6,{[al]:["GET","/assignment/accounts",200]},()=>bR,()=>vR],kR=[9,fe,_6,{[al]:["POST","/logout",200]},()=>CR,()=>K6],Zu=class extends Pt.Command.classBuilder().ep(rl).m(function(t,r,n,o){return[Ti.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").sc(OR).build(){},Ci=class extends Pt.Command.classBuilder().ep(rl).m(function(t,r,n,o){return[Ti.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").sc(NR).build(){},Ai=class extends Pt.Command.classBuilder().ep(rl).m(function(t,r,n,o){return[Ti.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").sc(DR).build(){},el=class extends Pt.Command.classBuilder().ep(rl).m(function(t,r,n,o){return[Ti.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").sc(kR).build(){},Q6={GetRoleCredentialsCommand:Zu,ListAccountRolesCommand:Ci,ListAccountsCommand:Ai,LogoutCommand:el},tl=class extends rs{};Pt.createAggregatedClient(Q6,tl);var J6=vi.createPaginator(rs,Ci,"nextToken","nextToken","maxResults"),Z6=vi.createPaginator(rs,Ai,"nextToken","nextToken","maxResults");Object.defineProperty(J,"$Command",{enumerable:!0,get:function(){return Pt.Command}});Object.defineProperty(J,"__Client",{enumerable:!0,get:function(){return Pt.Client}});J.AccountInfo$=gR;J.GetRoleCredentials$=OR;J.GetRoleCredentialsCommand=Zu;J.GetRoleCredentialsRequest$=yR;J.GetRoleCredentialsResponse$=SR;J.InvalidRequestException=Yu;J.InvalidRequestException$=ER;J.ListAccountRoles$=NR;J.ListAccountRolesCommand=Ci;J.ListAccountRolesRequest$=_R;J.ListAccountRolesResponse$=wR;J.ListAccounts$=DR;J.ListAccountsCommand=Ai;J.ListAccountsRequest$=bR;J.ListAccountsResponse$=vR;J.Logout$=kR;J.LogoutCommand=el;J.LogoutRequest$=CR;J.ResourceNotFoundException=Xu;J.ResourceNotFoundException$=AR;J.RoleCredentials$=TR;J.RoleInfo$=xR;J.SSO=tl;J.SSOClient=rs;J.SSOServiceException=cn;J.SSOServiceException$=PR;J.TooManyRequestsException=Qu;J.TooManyRequestsException$=RR;J.UnauthorizedException=Ju;J.UnauthorizedException$=IR;J.paginateListAccountRoles=J6;J.paginateListAccounts=Z6});var BR=x(Tg=>{"use strict";c();var $R=MR();Object.defineProperty(Tg,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return $R.GetRoleCredentialsCommand}});Object.defineProperty(Tg,"SSOClient",{enumerable:!0,get:function(){return $R.SSOClient}})});var xg=x(hl=>{"use strict";c();var Ot=Le(),ml=jt(),LR=(ht(),W(fr)),e8=_g(),FR=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),xi=!1,UR=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,clientConfig:i,parentClientConfig:a,callerClientConfig:u,profile:l,filepath:m,configFilepath:p,ignoreCache:g,logger:h})=>{let _,T="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let tt=await e8.fromSso({profile:l,filepath:m,configFilepath:p,ignoreCache:g})();_={accessToken:tt.token,expiresAt:new Date(tt.expiration).toISOString()}}catch(tt){throw new Ot.CredentialsProviderError(tt.message,{tryNextLink:xi,logger:h})}else try{_=await ml.getSSOTokenFromFile(e)}catch{throw new Ot.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${T}`,{tryNextLink:xi,logger:h})}if(new Date(_.expiresAt).getTime()-Date.now()<=0)throw new Ot.CredentialsProviderError(`The SSO session associated with this profile has expired. ${T}`,{tryNextLink:xi,logger:h});let{accessToken:I}=_,{SSOClient:P,GetRoleCredentialsCommand:D}=await Promise.resolve().then(function(){return BR()}),M=s||new P(Object.assign({},i??{},{logger:i?.logger??u?.logger??a?.logger,region:i?.region??n,userAgentAppId:i?.userAgentAppId??u?.userAgentAppId??a?.userAgentAppId})),L;try{L=await M.send(new D({accountId:r,roleName:o,accessToken:I}))}catch(tt){throw new Ot.CredentialsProviderError(tt,{tryNextLink:xi,logger:h})}let{roleCredentials:{accessKeyId:j,secretAccessKey:Q,sessionToken:Ee,expiration:K,credentialScope:Z,accountId:le}={}}=L;if(!j||!Q||!Ee||!K)throw new Ot.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:xi,logger:h});let Ie={accessKeyId:j,secretAccessKey:Q,sessionToken:Ee,expiration:new Date(K),...Z&&{credentialScope:Z},...le&&{accountId:le}};return t?LR.setCredentialFeature(Ie,"CREDENTIALS_SSO","s"):LR.setCredentialFeature(Ie,"CREDENTIALS_SSO_LEGACY","u"),Ie},HR=(e,t)=>{let{sso_start_url:r,sso_account_id:n,sso_region:o,sso_role_name:s}=e;if(!r||!n||!o||!s)throw new Ot.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e},t8=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:o,ssoRoleName:s,ssoSession:i}=e,{ssoClient:a}=e,u=ml.getProfileName({profile:e.profile??t?.profile});if(!r&&!n&&!o&&!s&&!i){let m=(await ml.parseKnownFiles(e))[u];if(!m)throw new Ot.CredentialsProviderError(`Profile ${u} was not found.`,{logger:e.logger});if(!FR(m))throw new Ot.CredentialsProviderError(`Profile ${u} is not configured with SSO credentials.`,{logger:e.logger});if(m?.sso_session){let P=(await ml.loadSsoSessionData(e))[m.sso_session],D=` configurations in profile ${u} and sso-session ${m.sso_session}`;if(o&&o!==P.sso_region)throw new Ot.CredentialsProviderError("Conflicting SSO region"+D,{tryNextLink:!1,logger:e.logger});if(r&&r!==P.sso_start_url)throw new Ot.CredentialsProviderError("Conflicting SSO start_url"+D,{tryNextLink:!1,logger:e.logger});m.sso_region=P.sso_region,m.sso_start_url=P.sso_start_url}let{sso_start_url:p,sso_account_id:g,sso_region:h,sso_role_name:_,sso_session:T}=HR(m,e.logger);return UR({ssoStartUrl:p,ssoSession:T,ssoAccountId:g,ssoRegion:h,ssoRoleName:_,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,callerClientConfig:e.callerClientConfig,profile:u,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}else{if(!r||!n||!o||!s)throw new Ot.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});return UR({ssoStartUrl:r,ssoSession:i,ssoAccountId:n,ssoRegion:o,ssoRoleName:s,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,callerClientConfig:e.callerClientConfig,profile:u,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}};hl.fromSSO=t8;hl.isSsoProfile=FR;hl.validateSsoProfile=HR});function r8(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"signin",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function n8(e){return{schemeId:"smithy.api#noAuth"}}var Ri,qR,jR,GR,Rg=b(()=>{c();Pe();Ri=A(ze()),qR=async(e,t,r)=>({operation:(0,Ri.getSmithyContext)(t).operation,region:await(0,Ri.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});jR=e=>{let t=[];return e.operation==="CreateOAuth2Token"?t.push(n8(e)):t.push(r8(e)),t},GR=e=>{let t=pr(e);return Object.assign(t,{authSchemePreference:(0,Ri.normalizeProvider)(e.authSchemePreference??[])})}});var zR,VR,Ig=b(()=>{c();zR=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"signin"}),VR={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var eI,qe,WR,Xn,os,un,Nt,Sl,Pg,KR,YR,XR,Og,Ng,He,Dg,gl,yl,QR,JR,ZR,o8,tI,rI=b(()=>{c();eI="required",qe="argv",WR="isSet",Xn="booleanEquals",os="error",un="endpoint",Nt="tree",Sl="PartitionResult",Pg="stringEquals",KR={[eI]:!0,default:!1,type:"boolean"},YR={[eI]:!1,type:"string"},XR={ref:"Endpoint"},Og={fn:Xn,[qe]:[{ref:"UseFIPS"},!0]},Ng={fn:Xn,[qe]:[{ref:"UseDualStack"},!0]},He={},Dg={fn:"getAttr",[qe]:[{ref:Sl},"name"]},gl={fn:Xn,[qe]:[{ref:"UseFIPS"},!1]},yl={fn:Xn,[qe]:[{ref:"UseDualStack"},!1]},QR={fn:"getAttr",[qe]:[{ref:Sl},"supportsFIPS"]},JR={fn:Xn,[qe]:[!0,{fn:"getAttr",[qe]:[{ref:Sl},"supportsDualStack"]}]},ZR=[{ref:"Region"}],o8={version:"1.0",parameters:{UseDualStack:KR,UseFIPS:KR,Endpoint:YR,Region:YR},rules:[{conditions:[{fn:WR,[qe]:[XR]}],rules:[{conditions:[Og],error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:os},{rules:[{conditions:[Ng],error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:os},{endpoint:{url:XR,properties:He,headers:He},type:un}],type:Nt}],type:Nt},{rules:[{conditions:[{fn:WR,[qe]:ZR}],rules:[{conditions:[{fn:"aws.partition",[qe]:ZR,assign:Sl}],rules:[{conditions:[{fn:Pg,[qe]:[Dg,"aws"]},gl,yl],endpoint:{url:"https://{Region}.signin.aws.amazon.com",properties:He,headers:He},type:un},{conditions:[{fn:Pg,[qe]:[Dg,"aws-cn"]},gl,yl],endpoint:{url:"https://{Region}.signin.amazonaws.cn",properties:He,headers:He},type:un},{conditions:[{fn:Pg,[qe]:[Dg,"aws-us-gov"]},gl,yl],endpoint:{url:"https://{Region}.signin.amazonaws-us-gov.com",properties:He,headers:He},type:un},{conditions:[Og,Ng],rules:[{conditions:[{fn:Xn,[qe]:[!0,QR]},JR],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:He,headers:He},type:un}],type:Nt},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:os}],type:Nt},{conditions:[Og,yl],rules:[{conditions:[{fn:Xn,[qe]:[QR,!0]}],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dnsSuffix}",properties:He,headers:He},type:un}],type:Nt},{error:"FIPS is enabled but this partition does not support FIPS",type:os}],type:Nt},{conditions:[gl,Ng],rules:[{conditions:[JR],rules:[{endpoint:{url:"https://signin.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:He,headers:He},type:un}],type:Nt},{error:"DualStack is enabled but this partition does not support DualStack",type:os}],type:Nt},{endpoint:{url:"https://signin.{Region}.{PartitionResult#dnsSuffix}",properties:He,headers:He},type:un}],type:Nt}],type:Nt},{error:"Invalid Configuration: Missing Region",type:os}],type:Nt}]},tI=o8});var nI,ss,s8,oI,sI=b(()=>{c();nI=A(Mn()),ss=A(Nr());rI();s8=new ss.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),oI=(e,t={})=>s8.get(e,()=>(0,ss.resolveEndpoint)(tI,{endpointParams:e,logger:t.logger}));ss.customEndpointFunctions.aws=nI.awsEndpointFunctions});var iI,aI,El,_l,cI,uI=b(()=>{c();Pe();Un();xe();iI=A(X()),aI=A(dr()),El=A(Tu()),_l=A(me());Rg();sI();cI=e=>({apiVersion:"2023-01-01",base64Decoder:e?.base64Decoder??El.fromBase64,base64Encoder:e?.base64Encoder??El.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??oI,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??jR,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Be},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new At}],logger:e?.logger??new iI.NoOpLogger,protocol:e?.protocol??zr,protocolSettings:e?.protocolSettings??{defaultNamespace:"com.amazonaws.signin",version:"2023-01-01",serviceTarget:"Signin"},serviceId:e?.serviceId??"Signin",urlParser:e?.urlParser??aI.parseUrl,utf8Decoder:e?.utf8Decoder??_l.fromUtf8,utf8Encoder:e?.utf8Encoder??_l.toUtf8})});var wl,dn,lI,bl,ln,vl,Cl,dI,fI,pI,mI,hI=b(()=>{c();vu();Pe();wl=A(zo()),dn=A(ot()),lI=A(Vo()),bl=A(xt()),ln=A(Gt()),vl=A(Ir()),Cl=A(X()),dI=A(Wo()),fI=A(Ko()),pI=A(Gn());uI();mI=e=>{(0,Cl.emitWarningIfUnsupportedVersion)(process.version);let t=(0,fI.resolveDefaultsModeConfig)(e),r=()=>t().then(Cl.loadConfigsForDefaultMode),n=cI(e);Dr(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,ln.loadConfig)(Mr,o),bodyLengthChecker:e?.bodyLengthChecker??dI.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,wl.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Go.version}),maxAttempts:e?.maxAttempts??(0,ln.loadConfig)(bl.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,ln.loadConfig)(dn.NODE_REGION_CONFIG_OPTIONS,{...dn.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:vl.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,ln.loadConfig)({...bl.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||pI.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??lI.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??vl.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,ln.loadConfig)(dn.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,ln.loadConfig)(dn.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,ln.loadConfig)(wl.NODE_APP_ID_CONFIG_OPTIONS,o)}}});var gI,yI,SI=b(()=>{c();gI=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},yI=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Al,Tl,xl,EI,_I=b(()=>{c();Al=A(Vn()),Tl=A(oe()),xl=A(X());SI();EI=(e,t)=>{let r=Object.assign((0,Al.getAwsRegionExtensionConfiguration)(e),(0,xl.getDefaultExtensionConfiguration)(e),(0,Tl.getHttpHandlerExtensionConfiguration)(e),gI(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,Al.resolveAwsRegionExtensionConfiguration)(r),(0,xl.resolveDefaultRuntimeConfig)(r),(0,Tl.resolveHttpHandlerRuntimeConfig)(r),yI(r))}});var Rl,wI,bI,Il,vI,CI,AI,Pl,kg,Ii,Mg=b(()=>{c();Rl=A(lo()),wI=A(fo()),bI=A(po()),Il=A(Fn()),vI=A(ot());xe();ne();CI=A(Fo()),AI=A(zt()),Pl=A(xt()),kg=A(X());Rg();Ig();hI();_I();Ii=class extends kg.Client{config;constructor(...[t]){let r=mI(t||{});super(r),this.initConfig=r;let n=zR(r),o=(0,Il.resolveUserAgentConfig)(n),s=(0,Pl.resolveRetryConfig)(o),i=(0,vI.resolveRegionConfig)(s),a=(0,Rl.resolveHostHeaderConfig)(i),u=(0,AI.resolveEndpointConfig)(a),l=GR(u),m=EI(l,t?.extensions||[]);this.config=m,this.middlewareStack.use(An(this.config)),this.middlewareStack.use((0,Il.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Pl.getRetryPlugin)(this.config)),this.middlewareStack.use((0,CI.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Rl.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,wI.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,bI.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(vn(this.config,{httpAuthSchemeParametersProvider:qR,identityProviderConfigProvider:async p=>new ur({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(Cn(this.config))}destroy(){super.destroy()}}});var TI,Dt,Ol=b(()=>{c();TI=A(X()),Dt=class e extends TI.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var Pi,Oi,Ni,Di,$g=b(()=>{c();Ol();Pi=class e extends Dt{name="AccessDeniedException";$fault="client";error;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}},Oi=class e extends Dt{name="InternalServerException";$fault="server";error;constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}},Ni=class e extends Dt{name="TooManyRequestsError";$fault="client";error;constructor(t){super({name:"TooManyRequestsError",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}},Di=class e extends Dt{name="ValidationException";$fault="client";error;constructor(t){super({name:"ValidationException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}}});var i8,a8,c8,u8,l8,d8,f8,p8,m8,h8,g8,xI,RI,Bg,II,PI,y8,fn,OI,NI,S8,Lg,DI,dt,Dl,Nl,kI,E8,MI,$I,LI,_8,w8,BI,Je,UI,FI,HI,qI,jI,GI,zI,VI,WI,KI,YI,Ug,Fg=b(()=>{c();ne();$g();Ol();i8="AccessDeniedException",a8="AccessToken",c8="CreateOAuth2Token",u8="CreateOAuth2TokenRequest",l8="CreateOAuth2TokenRequestBody",d8="CreateOAuth2TokenResponseBody",f8="CreateOAuth2TokenResponse",p8="InternalServerException",m8="RefreshToken",h8="TooManyRequestsError",g8="ValidationException",xI="accessKeyId",RI="accessToken",Bg="client",II="clientId",PI="codeVerifier",y8="code",fn="error",OI="expiresIn",NI="grantType",S8="http",Lg="httpError",DI="idToken",dt="jsonName",Dl="message",Nl="refreshToken",kI="redirectUri",E8="server",MI="secretAccessKey",$I="sessionToken",LI="smithy.ts.sdk.synthetic.com.amazonaws.signin",_8="tokenInput",w8="tokenOutput",BI="tokenType",Je="com.amazonaws.signin",UI=[0,Je,m8,8,0],FI=[-3,Je,i8,{[fn]:Bg},[fn,Dl],[0,0],2];F.for(Je).registerError(FI,Pi);HI=[3,Je,a8,8,[xI,MI,$I],[[0,{[dt]:xI}],[0,{[dt]:MI}],[0,{[dt]:$I}]],3],qI=[3,Je,u8,0,[_8],[[()=>jI,16]],1],jI=[3,Je,l8,0,[II,NI,y8,kI,PI,Nl],[[0,{[dt]:II}],[0,{[dt]:NI}],0,[0,{[dt]:kI}],[0,{[dt]:PI}],[()=>UI,{[dt]:Nl}]],2],GI=[3,Je,f8,0,[w8],[[()=>zI,16]],1],zI=[3,Je,d8,0,[RI,BI,OI,Nl,DI],[[()=>HI,{[dt]:RI}],[0,{[dt]:BI}],[1,{[dt]:OI}],[()=>UI,{[dt]:Nl}],[0,{[dt]:DI}]],4],VI=[-3,Je,p8,{[fn]:E8,[Lg]:500},[fn,Dl],[0,0],2];F.for(Je).registerError(VI,Oi);WI=[-3,Je,h8,{[fn]:Bg,[Lg]:429},[fn,Dl],[0,0],2];F.for(Je).registerError(WI,Ni);KI=[-3,Je,g8,{[fn]:Bg,[Lg]:400},[fn,Dl],[0,0],2];F.for(Je).registerError(KI,Di);YI=[-3,LI,"SigninServiceException",0,[],[]];F.for(LI).registerError(YI,Dt);Ug=[9,Je,c8,{[S8]:["POST","/v1/token",200]},()=>qI,()=>GI]});var XI,Hg,ki,qg=b(()=>{c();XI=A(zt()),Hg=A(X());Ig();Fg();ki=class extends Hg.Command.classBuilder().ep(VR).m(function(t,r,n,o){return[(0,XI.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Signin","CreateOAuth2Token",{}).n("SigninClient","CreateOAuth2TokenCommand").sc(Ug).build(){}});var QI,b8,kl,JI=b(()=>{c();QI=A(X());qg();Mg();b8={CreateOAuth2TokenCommand:ki},kl=class extends Ii{};(0,QI.createAggregatedClient)(b8,kl)});var ZI=b(()=>{c();qg()});var v8,eP=b(()=>{c();v8={AUTHCODE_EXPIRED:"AUTHCODE_EXPIRED",INSUFFICIENT_PERMISSIONS:"INSUFFICIENT_PERMISSIONS",INVALID_REQUEST:"INVALID_REQUEST",SERVER_ERROR:"server_error",TOKEN_EXPIRED:"TOKEN_EXPIRED",USER_CREDENTIALS_CHANGED:"USER_CREDENTIALS_CHANGED"}});var tP=b(()=>{c()});var rP={};rt(rP,{$Command:()=>Hg.Command,AccessDeniedException:()=>Pi,AccessDeniedException$:()=>FI,AccessToken$:()=>HI,CreateOAuth2Token$:()=>Ug,CreateOAuth2TokenCommand:()=>ki,CreateOAuth2TokenRequest$:()=>qI,CreateOAuth2TokenRequestBody$:()=>jI,CreateOAuth2TokenResponse$:()=>GI,CreateOAuth2TokenResponseBody$:()=>zI,InternalServerException:()=>Oi,InternalServerException$:()=>VI,OAuth2ErrorCode:()=>v8,Signin:()=>kl,SigninClient:()=>Ii,SigninServiceException:()=>Dt,SigninServiceException$:()=>YI,TooManyRequestsError:()=>Ni,TooManyRequestsError$:()=>WI,ValidationException:()=>Di,ValidationException$:()=>KI,__Client:()=>kg.Client});var nP=b(()=>{c();Mg();JI();ZI();Fg();eP();$g();tP();Ol()});var sP=x(oP=>{"use strict";c();var C8=(ht(),W(fr)),pn=Le(),zg=jt(),A8=oe(),Ml=z("node:crypto"),jg=z("node:fs"),T8=z("node:os"),Gg=z("node:path"),Vg=class e{profileData;init;callerClientConfig;static REFRESH_THRESHOLD=300*1e3;constructor(t,r,n){this.profileData=t,this.init=r,this.callerClientConfig=n}async loadCredentials(){let t=await this.loadToken();if(!t)throw new pn.CredentialsProviderError(`Failed to load a token for session ${this.loginSession}, please re-authenticate using aws login`,{tryNextLink:!1,logger:this.logger});let r=t.accessToken,n=Date.now();return new Date(r.expiresAt).getTime()-n<=e.REFRESH_THRESHOLD?this.refresh(t):{accessKeyId:r.accessKeyId,secretAccessKey:r.secretAccessKey,sessionToken:r.sessionToken,accountId:r.accountId,expiration:new Date(r.expiresAt)}}get logger(){return this.init?.logger}get loginSession(){return this.profileData.login_session}async refresh(t){let{SigninClient:r,CreateOAuth2TokenCommand:n}=await Promise.resolve().then(()=>(nP(),rP)),{logger:o,userAgentAppId:s}=this.callerClientConfig??{},a=(p=>p?.metadata?.handlerProtocol==="h2")(this.callerClientConfig?.requestHandler)?void 0:this.callerClientConfig?.requestHandler,u=this.profileData.region??await this.callerClientConfig?.region?.()??process.env.AWS_REGION,l=new r({credentials:{accessKeyId:"",secretAccessKey:""},region:u,requestHandler:a,logger:o,userAgentAppId:s,...this.init?.clientConfig});this.createDPoPInterceptor(l.middlewareStack);let m={tokenInput:{clientId:t.clientId,refreshToken:t.refreshToken,grantType:"refresh_token"}};try{let p=await l.send(new n(m)),{accessKeyId:g,secretAccessKey:h,sessionToken:_}=p.tokenOutput?.accessToken??{},{refreshToken:T,expiresIn:I}=p.tokenOutput??{};if(!g||!h||!_||!T)throw new pn.CredentialsProviderError("Token refresh response missing required fields",{logger:this.logger,tryNextLink:!1});let P=(I??900)*1e3,D=new Date(Date.now()+P),M={...t,accessToken:{...t.accessToken,accessKeyId:g,secretAccessKey:h,sessionToken:_,expiresAt:D.toISOString()},refreshToken:T};await this.saveToken(M);let L=M.accessToken;return{accessKeyId:L.accessKeyId,secretAccessKey:L.secretAccessKey,sessionToken:L.sessionToken,accountId:L.accountId,expiration:D}}catch(p){if(p.name==="AccessDeniedException"){let g=p.error,h;switch(g){case"TOKEN_EXPIRED":h="Your session has expired. Please reauthenticate.";break;case"USER_CREDENTIALS_CHANGED":h="Unable to refresh credentials because of a change in your password. Please reauthenticate with your new password.";break;case"INSUFFICIENT_PERMISSIONS":h="Unable to refresh credentials due to insufficient permissions. You may be missing permission for the 'CreateOAuth2Token' action.";break;default:h=`Failed to refresh token: ${String(p)}. Please re-authenticate using \`aws login\``}throw new pn.CredentialsProviderError(h,{logger:this.logger,tryNextLink:!1})}throw new pn.CredentialsProviderError(`Failed to refresh token: ${String(p)}. Please re-authenticate using aws login`,{logger:this.logger})}}async loadToken(){let t=this.getTokenFilePath();try{let r;try{r=await zg.readFile(t,{ignoreCache:this.init?.ignoreCache})}catch{r=await jg.promises.readFile(t,"utf8")}let n=JSON.parse(r),o=["accessToken","clientId","refreshToken","dpopKey"].filter(s=>!n[s]);if(n.accessToken?.accountId||o.push("accountId"),o.length>0)throw new pn.CredentialsProviderError(`Token validation failed, missing fields: ${o.join(", ")}`,{logger:this.logger,tryNextLink:!1});return n}catch(r){throw new pn.CredentialsProviderError(`Failed to load token from ${t}: ${String(r)}`,{logger:this.logger,tryNextLink:!1})}}async saveToken(t){let r=this.getTokenFilePath(),n=Gg.dirname(r);try{await jg.promises.mkdir(n,{recursive:!0})}catch{}await jg.promises.writeFile(r,JSON.stringify(t,null,2),"utf8")}getTokenFilePath(){let t=process.env.AWS_LOGIN_CACHE_DIRECTORY??Gg.join(T8.homedir(),".aws","login","cache"),r=Buffer.from(this.loginSession,"utf8"),n=Ml.createHash("sha256").update(r).digest("hex");return Gg.join(t,`${n}.json`)}derToRawSignature(t){let r=2;if(t[r]!==2)throw new Error("Invalid DER signature");r++;let n=t[r++],o=t.subarray(r,r+n);if(r+=n,t[r]!==2)throw new Error("Invalid DER signature");r++;let s=t[r++],i=t.subarray(r,r+s);o=o[0]===0?o.subarray(1):o,i=i[0]===0?i.subarray(1):i;let a=Buffer.concat([Buffer.alloc(32-o.length),o]),u=Buffer.concat([Buffer.alloc(32-i.length),i]);return Buffer.concat([a,u])}createDPoPInterceptor(t){t.add(r=>async n=>{if(A8.HttpRequest.isInstance(n.request)){let o=n.request,s=`${o.protocol}//${o.hostname}${o.port?`:${o.port}`:""}${o.path}`,i=await this.generateDpop(o.method,s);o.headers={...o.headers,DPoP:i}}return r(n)},{step:"finalizeRequest",name:"dpopInterceptor",override:!0})}async generateDpop(t="POST",r){let n=await this.loadToken();try{let o=Ml.createPrivateKey({key:n.dpopKey,format:"pem",type:"sec1"}),i=Ml.createPublicKey(o).export({format:"der",type:"spki"}),a=-1;for(let D=0;D<i.length;D++)if(i[D]===4){a=D;break}let u=i.slice(a+1,a+33),l=i.slice(a+33,a+65),m={alg:"ES256",typ:"dpop+jwt",jwk:{kty:"EC",crv:"P-256",x:u.toString("base64url"),y:l.toString("base64url")}},p={jti:crypto.randomUUID(),htm:t,htu:r,iat:Math.floor(Date.now()/1e3)},g=Buffer.from(JSON.stringify(m)).toString("base64url"),h=Buffer.from(JSON.stringify(p)).toString("base64url"),_=`${g}.${h}`,T=Ml.sign("sha256",Buffer.from(_),o),P=this.derToRawSignature(T).toString("base64url");return`${_}.${P}`}catch(o){throw new pn.CredentialsProviderError(`Failed to generate Dpop proof: ${o instanceof Error?o.message:String(o)}`,{logger:this.logger,tryNextLink:!1})}}},x8=e=>async({callerClientConfig:t}={})=>{e?.logger?.debug?.("@aws-sdk/credential-providers - fromLoginCredentials");let r=await zg.parseKnownFiles(e||{}),n=zg.getProfileName({profile:e?.profile??t?.profile}),o=r[n];if(!o?.login_session)throw new pn.CredentialsProviderError(`Profile ${n} does not contain login_session.`,{tryNextLink:!0,logger:e?.logger});let i=await new Vg(o,e,t).loadCredentials();return C8.setCredentialFeature(i,"CREDENTIALS_LOGIN","AD")};oP.fromLoginCredentials=x8});function R8(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function I8(e){return{schemeId:"smithy.api#noAuth"}}var Mi,iP,aP,P8,cP,Wg=b(()=>{c();Pe();Mi=A(ze());$i();iP=async(e,t,r)=>({operation:(0,Mi.getSmithyContext)(t).operation,region:await(0,Mi.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});aP=e=>{let t=[];return e.operation==="AssumeRoleWithWebIdentity"?t.push(I8(e)):t.push(R8(e)),t},P8=e=>Object.assign(e,{stsClientCtor:Yt}),cP=e=>{let t=P8(e),r=pr(t);return Object.assign(r,{authSchemePreference:(0,Mi.normalizeProvider)(e.authSchemePreference??[])})}});var uP,$l,Bl=b(()=>{c();uP=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),$l={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var _P,G,re,mn,Ne,wP,bP,he,lP,Xt,is,Yg,dP,Kg,vP,fP,De,pP,CP,AP,je,ft,mP,TP,xP,hP,RP,gP,yP,SP,EP,O8,IP,PP=b(()=>{c();_P="required",G="type",re="argv",mn="booleanEquals",Ne="stringEquals",wP="sigv4",bP="us-east-1",he="endpoint",lP="https://sts.{Region}.{PartitionResult#dnsSuffix}",Xt="tree",is="error",Yg="getAttr",dP={[_P]:!1,[G]:"string"},Kg={[_P]:!0,default:!1,[G]:"boolean"},vP={ref:"Endpoint"},fP={fn:"isSet",[re]:[{ref:"Region"}]},De={ref:"Region"},pP={fn:"aws.partition",[re]:[De],assign:"PartitionResult"},CP={ref:"UseFIPS"},AP={ref:"UseDualStack"},je={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:wP,signingName:"sts",signingRegion:bP}]},headers:{}},ft={},mP={conditions:[{fn:Ne,[re]:[De,"aws-global"]}],[he]:je,[G]:he},TP={fn:mn,[re]:[CP,!0]},xP={fn:mn,[re]:[AP,!0]},hP={fn:Yg,[re]:[{ref:"PartitionResult"},"supportsFIPS"]},RP={ref:"PartitionResult"},gP={fn:mn,[re]:[!0,{fn:Yg,[re]:[RP,"supportsDualStack"]}]},yP=[{fn:"isSet",[re]:[vP]}],SP=[TP],EP=[xP],O8={version:"1.0",parameters:{Region:dP,UseDualStack:Kg,UseFIPS:Kg,Endpoint:dP,UseGlobalEndpoint:Kg},rules:[{conditions:[{fn:mn,[re]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[re]:yP},fP,pP,{fn:mn,[re]:[CP,!1]},{fn:mn,[re]:[AP,!1]}],rules:[{conditions:[{fn:Ne,[re]:[De,"ap-northeast-1"]}],endpoint:je,[G]:he},{conditions:[{fn:Ne,[re]:[De,"ap-south-1"]}],endpoint:je,[G]:he},{conditions:[{fn:Ne,[re]:[De,"ap-southeast-1"]}],endpoint:je,[G]:he},{conditions:[{fn:Ne,[re]:[De,"ap-southeast-2"]}],endpoint:je,[G]:he},mP,{conditions:[{fn:Ne,[re]:[De,"ca-central-1"]}],endpoint:je,[G]:he},{conditions:[{fn:Ne,[re]:[De,"eu-central-1"]}],endpoint:je,[G]:he},{conditions:[{fn:Ne,[re]:[De,"eu-north-1"]}],endpoint:je,[G]:he},{conditions:[{fn:Ne,[re]:[De,"eu-west-1"]}],endpoint:je,[G]:he},{conditions:[{fn:Ne,[re]:[De,"eu-west-2"]}],endpoint:je,[G]:he},{conditions:[{fn:Ne,[re]:[De,"eu-west-3"]}],endpoint:je,[G]:he},{conditions:[{fn:Ne,[re]:[De,"sa-east-1"]}],endpoint:je,[G]:he},{conditions:[{fn:Ne,[re]:[De,bP]}],endpoint:je,[G]:he},{conditions:[{fn:Ne,[re]:[De,"us-east-2"]}],endpoint:je,[G]:he},{conditions:[{fn:Ne,[re]:[De,"us-west-1"]}],endpoint:je,[G]:he},{conditions:[{fn:Ne,[re]:[De,"us-west-2"]}],endpoint:je,[G]:he},{endpoint:{url:lP,properties:{authSchemes:[{name:wP,signingName:"sts",signingRegion:"{Region}"}]},headers:ft},[G]:he}],[G]:Xt},{conditions:yP,rules:[{conditions:SP,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[G]:is},{conditions:EP,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[G]:is},{endpoint:{url:vP,properties:ft,headers:ft},[G]:he}],[G]:Xt},{conditions:[fP],rules:[{conditions:[pP],rules:[{conditions:[TP,xP],rules:[{conditions:[{fn:mn,[re]:[!0,hP]},gP],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ft,headers:ft},[G]:he}],[G]:Xt},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[G]:is}],[G]:Xt},{conditions:SP,rules:[{conditions:[{fn:mn,[re]:[hP,!0]}],rules:[{conditions:[{fn:Ne,[re]:[{fn:Yg,[re]:[RP,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:ft,headers:ft},[G]:he},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ft,headers:ft},[G]:he}],[G]:Xt},{error:"FIPS is enabled but this partition does not support FIPS",[G]:is}],[G]:Xt},{conditions:EP,rules:[{conditions:[gP],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ft,headers:ft},[G]:he}],[G]:Xt},{error:"DualStack is enabled but this partition does not support DualStack",[G]:is}],[G]:Xt},mP,{endpoint:{url:lP,properties:ft,headers:ft},[G]:he}],[G]:Xt}],[G]:Xt},{error:"Invalid Configuration: Missing Region",[G]:is}]},IP=O8});var OP,as,N8,NP,DP=b(()=>{c();OP=A(Mn()),as=A(Nr());PP();N8=new as.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),NP=(e,t={})=>N8.get(e,()=>(0,as.resolveEndpoint)(IP,{endpointParams:e,logger:t.logger}));as.customEndpointFunctions.aws=OP.awsEndpointFunctions});var kP,MP,Ll,Ul,$P,BP=b(()=>{c();Pe();Un();xe();kP=A(X()),MP=A(dr()),Ll=A(Tu()),Ul=A(me());Wg();DP();$P=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??Ll.fromBase64,base64Encoder:e?.base64Encoder??Ll.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??NP,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??aP,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Be},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new At}],logger:e?.logger??new kP.NoOpLogger,protocol:e?.protocol??Wr,protocolSettings:e?.protocolSettings??{defaultNamespace:"com.amazonaws.sts",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/",version:"2011-06-15",serviceTarget:"AWSSecurityTokenServiceV20110615"},serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??MP.parseUrl,utf8Decoder:e?.utf8Decoder??Ul.fromUtf8,utf8Encoder:e?.utf8Encoder??Ul.toUtf8})});var Fl,gn,LP,Hl,hn,ql,jl,UP,FP,HP,qP,jP=b(()=>{c();vu();Pe();Fl=A(zo()),gn=A(ot());xe();LP=A(Vo()),Hl=A(xt()),hn=A(Gt()),ql=A(Ir()),jl=A(X()),UP=A(Wo()),FP=A(Ko()),HP=A(Gn());BP();qP=e=>{(0,jl.emitWarningIfUnsupportedVersion)(process.version);let t=(0,FP.resolveDefaultsModeConfig)(e),r=()=>t().then(jl.loadConfigsForDefaultMode),n=$P(e);Dr(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,hn.loadConfig)(Mr,o),bodyLengthChecker:e?.bodyLengthChecker??UP.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Fl.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Go.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4")||(async i=>await e.credentialDefaultProvider(i?.__config||{})()),signer:new Be},{schemeId:"smithy.api#noAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new At}],maxAttempts:e?.maxAttempts??(0,hn.loadConfig)(Hl.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,hn.loadConfig)(gn.NODE_REGION_CONFIG_OPTIONS,{...gn.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:ql.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,hn.loadConfig)({...Hl.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||HP.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??LP.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??ql.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,hn.loadConfig)(gn.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,hn.loadConfig)(gn.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,hn.loadConfig)(Fl.NODE_APP_ID_CONFIG_OPTIONS,o)}}});var GP,zP,VP=b(()=>{c();GP=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},zP=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Gl,zl,Vl,WP,KP=b(()=>{c();Gl=A(Vn()),zl=A(oe()),Vl=A(X());VP();WP=(e,t)=>{let r=Object.assign((0,Gl.getAwsRegionExtensionConfiguration)(e),(0,Vl.getDefaultExtensionConfiguration)(e),(0,zl.getHttpHandlerExtensionConfiguration)(e),GP(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,Gl.resolveAwsRegionExtensionConfiguration)(r),(0,Vl.resolveDefaultRuntimeConfig)(r),(0,zl.resolveHttpHandlerRuntimeConfig)(r),zP(r))}});var Wl,YP,XP,Kl,QP,JP,ZP,Yl,Xg,Yt,$i=b(()=>{c();Wl=A(lo()),YP=A(fo()),XP=A(po()),Kl=A(Fn()),QP=A(ot());xe();ne();JP=A(Fo()),ZP=A(zt()),Yl=A(xt()),Xg=A(X());Wg();Bl();jP();KP();Yt=class extends Xg.Client{config;constructor(...[t]){let r=qP(t||{});super(r),this.initConfig=r;let n=uP(r),o=(0,Kl.resolveUserAgentConfig)(n),s=(0,Yl.resolveRetryConfig)(o),i=(0,QP.resolveRegionConfig)(s),a=(0,Wl.resolveHostHeaderConfig)(i),u=(0,ZP.resolveEndpointConfig)(a),l=cP(u),m=WP(l,t?.extensions||[]);this.config=m,this.middlewareStack.use(An(this.config)),this.middlewareStack.use((0,Kl.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Yl.getRetryPlugin)(this.config)),this.middlewareStack.use((0,JP.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Wl.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,YP.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,XP.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(vn(this.config,{httpAuthSchemeParametersProvider:iP,identityProviderConfigProvider:async p=>new ur({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(Cn(this.config))}destroy(){super.destroy()}}});var eO,st,Xl=b(()=>{c();eO=A(X()),st=class e extends eO.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var Bi,Li,Ui,Fi,Hi,qi,ji,Qg=b(()=>{c();Xl();Bi=class e extends st{name="ExpiredTokenException";$fault="client";constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Li=class e extends st{name="MalformedPolicyDocumentException";$fault="client";constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ui=class e extends st{name="PackedPolicyTooLargeException";$fault="client";constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Fi=class e extends st{name="RegionDisabledException";$fault="client";constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Hi=class e extends st{name="IDPRejectedClaimException";$fault="client";constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},qi=class e extends st{name="InvalidIdentityTokenException";$fault="client";constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ji=class e extends st{name="IDPCommunicationErrorException";$fault="client";constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}}});var D8,k8,M8,$8,B8,L8,Jg,U8,F8,H8,q8,Zg,j8,tO,G8,z8,V8,W8,K8,Y8,X8,Q8,rO,nO,J8,Z8,ez,tz,rz,nz,oO,oz,sz,sO,iz,iO,az,cz,ey,uz,lz,dz,fz,pz,mz,hz,gz,yz,Sz,Qn,Jn,Ez,Zn,eo,to,_z,aO,wz,ie,bz,vz,ty,cO,uO,lO,dO,ry,fO,pO,mO,hO,gO,yO,SO,EO,_O,wO,bO,vO,Cz,Az,ny,oy,Ql=b(()=>{c();ne();Qg();Xl();D8="Arn",k8="AccessKeyId",M8="AssumeRole",$8="AssumedRoleId",B8="AssumeRoleRequest",L8="AssumeRoleResponse",Jg="AssumedRoleUser",U8="AssumeRoleWithWebIdentity",F8="AssumeRoleWithWebIdentityRequest",H8="AssumeRoleWithWebIdentityResponse",q8="Audience",Zg="Credentials",j8="ContextAssertion",tO="DurationSeconds",G8="Expiration",z8="ExternalId",V8="ExpiredTokenException",W8="IDPCommunicationErrorException",K8="IDPRejectedClaimException",Y8="InvalidIdentityTokenException",X8="Key",Q8="MalformedPolicyDocumentException",rO="Policy",nO="PolicyArns",J8="ProviderArn",Z8="ProvidedContexts",ez="ProvidedContextsListType",tz="ProvidedContext",rz="PolicyDescriptorType",nz="ProviderId",oO="PackedPolicySize",oz="PackedPolicyTooLargeException",sz="Provider",sO="RoleArn",iz="RegionDisabledException",iO="RoleSessionName",az="SecretAccessKey",cz="SubjectFromWebIdentityToken",ey="SourceIdentity",uz="SerialNumber",lz="SessionToken",dz="Tags",fz="TokenCode",pz="TransitiveTagKeys",mz="Tag",hz="Value",gz="WebIdentityToken",yz="arn",Sz="accessKeySecretType",Qn="awsQueryError",Jn="client",Ez="clientTokenType",Zn="error",eo="httpError",to="message",_z="policyDescriptorListType",aO="smithy.ts.sdk.synthetic.com.amazonaws.sts",wz="tagListType",ie="com.amazonaws.sts",bz=[0,ie,Sz,8,0],vz=[0,ie,Ez,8,0],ty=[3,ie,Jg,0,[$8,D8],[0,0],2],cO=[3,ie,B8,0,[sO,iO,nO,rO,tO,dz,pz,z8,uz,fz,ey,Z8],[0,0,()=>vO,0,1,()=>Az,64,0,0,0,0,()=>Cz],2],uO=[3,ie,L8,0,[Zg,Jg,oO,ey],[[()=>ry,0],()=>ty,1,0]],lO=[3,ie,F8,0,[sO,iO,gz,nz,nO,rO,tO],[0,0,[()=>vz,0],0,()=>vO,0,1],3],dO=[3,ie,H8,0,[Zg,cz,Jg,oO,sz,q8,ey],[[()=>ry,0],0,()=>ty,1,0,0,0]],ry=[3,ie,Zg,0,[k8,az,lz,G8],[0,[()=>bz,0],0,4],4],fO=[-3,ie,V8,{[Qn]:["ExpiredTokenException",400],[Zn]:Jn,[eo]:400},[to],[0]];F.for(ie).registerError(fO,Bi);pO=[-3,ie,W8,{[Qn]:["IDPCommunicationError",400],[Zn]:Jn,[eo]:400},[to],[0]];F.for(ie).registerError(pO,ji);mO=[-3,ie,K8,{[Qn]:["IDPRejectedClaim",403],[Zn]:Jn,[eo]:403},[to],[0]];F.for(ie).registerError(mO,Hi);hO=[-3,ie,Y8,{[Qn]:["InvalidIdentityToken",400],[Zn]:Jn,[eo]:400},[to],[0]];F.for(ie).registerError(hO,qi);gO=[-3,ie,Q8,{[Qn]:["MalformedPolicyDocument",400],[Zn]:Jn,[eo]:400},[to],[0]];F.for(ie).registerError(gO,Li);yO=[-3,ie,oz,{[Qn]:["PackedPolicyTooLarge",400],[Zn]:Jn,[eo]:400},[to],[0]];F.for(ie).registerError(yO,Ui);SO=[3,ie,rz,0,[yz],[0]],EO=[3,ie,tz,0,[J8,j8],[0,0]],_O=[-3,ie,iz,{[Qn]:["RegionDisabledException",403],[Zn]:Jn,[eo]:403},[to],[0]];F.for(ie).registerError(_O,Fi);wO=[3,ie,mz,0,[X8,hz],[0,0],2],bO=[-3,aO,"STSServiceException",0,[],[]];F.for(aO).registerError(bO,st);vO=[1,ie,_z,0,()=>SO],Cz=[1,ie,ez,0,()=>EO],Az=[1,ie,wz,0,()=>wO],ny=[9,ie,M8,0,()=>cO,()=>uO],oy=[9,ie,U8,0,()=>lO,()=>dO]});var CO,AO,ro,Jl=b(()=>{c();CO=A(zt()),AO=A(X());Bl();Ql();ro=class extends AO.Command.classBuilder().ep($l).m(function(t,r,n,o){return[(0,CO.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").sc(ny).build(){}});var TO,xO,no,Zl=b(()=>{c();TO=A(zt()),xO=A(X());Bl();Ql();no=class extends xO.Command.classBuilder().ep($l).m(function(t,r,n,o){return[(0,TO.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").sc(oy).build(){}});var RO,Tz,ed,IO=b(()=>{c();RO=A(X());Jl();Zl();$i();Tz={AssumeRoleCommand:ro,AssumeRoleWithWebIdentityCommand:no},ed=class extends Yt{};(0,RO.createAggregatedClient)(Tz,ed)});var PO=b(()=>{c();Jl();Zl()});var OO=b(()=>{c()});var NO,DO,kO,MO,$O,BO,LO=b(()=>{c();ht();NO=A(Vn());Jl();Zl();DO=e=>{if(typeof e?.Arn=="string"){let t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},kO=async(e,t,r,n={})=>{let o=typeof e=="function"?await e():e,s=typeof t=="function"?await t():t,i="",a=o??s??(i=await(0,NO.stsRegionDefaultResolver)(n)());return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${o} (credential provider clientConfig)`,`${s} (contextual client)`,`${i} (STS default: AWS_REGION, profile region, or us-east-1)`),a},MO=(e,t)=>{let r,n;return async(o,s)=>{if(n=o,!r){let{logger:m=e?.parentClientConfig?.logger,profile:p=e?.parentClientConfig?.profile,region:g,requestHandler:h=e?.parentClientConfig?.requestHandler,credentialProviderLogger:_,userAgentAppId:T=e?.parentClientConfig?.userAgentAppId}=e,I=await kO(g,e?.parentClientConfig?.region,_,{logger:m,profile:p}),P=!BO(h);r=new t({...e,userAgentAppId:T,profile:p,credentialDefaultProvider:()=>async()=>n,region:I,requestHandler:P?h:void 0,logger:m})}let{Credentials:i,AssumedRoleUser:a}=await r.send(new ro(s));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${s.RoleArn}`);let u=DO(a),l={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...u&&{accountId:u}};return kr(l,"CREDENTIALS_STS_ASSUME_ROLE","i"),l}},$O=(e,t)=>{let r;return async n=>{if(!r){let{logger:u=e?.parentClientConfig?.logger,profile:l=e?.parentClientConfig?.profile,region:m,requestHandler:p=e?.parentClientConfig?.requestHandler,credentialProviderLogger:g,userAgentAppId:h=e?.parentClientConfig?.userAgentAppId}=e,_=await kO(m,e?.parentClientConfig?.region,g,{logger:u,profile:l}),T=!BO(p);r=new t({...e,userAgentAppId:h,profile:l,region:_,requestHandler:T?p:void 0,logger:u})}let{Credentials:o,AssumedRoleUser:s}=await r.send(new no(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let i=DO(s),a={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...i&&{accountId:i}};return i&&kr(a,"RESOLVED_ACCOUNT_ID","T"),kr(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},BO=e=>e?.metadata?.handlerProtocol==="h2"});var UO,FO,HO,xz,qO=b(()=>{c();LO();$i();UO=(e,t)=>t?class extends e{constructor(n){super(n);for(let o of t)this.middlewareStack.use(o)}}:e,FO=(e={},t)=>MO(e,UO(Yt,t)),HO=(e={},t)=>$O(e,UO(Yt,t)),xz=e=>t=>e({roleAssumer:FO(t),roleAssumerWithWebIdentity:HO(t),...t})});var sy={};rt(sy,{AssumeRole$:()=>ny,AssumeRoleCommand:()=>ro,AssumeRoleRequest$:()=>cO,AssumeRoleResponse$:()=>uO,AssumeRoleWithWebIdentity$:()=>oy,AssumeRoleWithWebIdentityCommand:()=>no,AssumeRoleWithWebIdentityRequest$:()=>lO,AssumeRoleWithWebIdentityResponse$:()=>dO,AssumedRoleUser$:()=>ty,Credentials$:()=>ry,ExpiredTokenException:()=>Bi,ExpiredTokenException$:()=>fO,IDPCommunicationErrorException:()=>ji,IDPCommunicationErrorException$:()=>pO,IDPRejectedClaimException:()=>Hi,IDPRejectedClaimException$:()=>mO,InvalidIdentityTokenException:()=>qi,InvalidIdentityTokenException$:()=>hO,MalformedPolicyDocumentException:()=>Li,MalformedPolicyDocumentException$:()=>gO,PackedPolicyTooLargeException:()=>Ui,PackedPolicyTooLargeException$:()=>yO,PolicyDescriptorType$:()=>SO,ProvidedContext$:()=>EO,RegionDisabledException:()=>Fi,RegionDisabledException$:()=>_O,STS:()=>ed,STSClient:()=>Yt,STSServiceException:()=>st,STSServiceException$:()=>bO,Tag$:()=>wO,__Client:()=>Xg.Client,decorateDefaultCredentialProvider:()=>xz,getDefaultRoleAssumer:()=>FO,getDefaultRoleAssumerWithWebIdentity:()=>HO});var iy=b(()=>{c();$i();IO();PO();Ql();Qg();OO();qO();Xl()});var uy=x(jO=>{"use strict";c();var cy=jt(),ay=Le(),Rz=z("child_process"),Iz=z("util"),Pz=(ht(),W(fr)),Oz=(e,t,r)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let s=new Date;if(new Date(t.Expiration)<s)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let n=t.AccountId;!n&&r?.[e]?.aws_account_id&&(n=r[e].aws_account_id);let o={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...n&&{accountId:n}};return Pz.setCredentialFeature(o,"CREDENTIALS_PROCESS","w"),o},Nz=async(e,t,r)=>{let n=t[e];if(t[e]){let o=n.credential_process;if(o!==void 0){let s=Iz.promisify(cy.externalDataInterceptor?.getTokenRecord?.().exec??Rz.exec);try{let{stdout:i}=await s(o),a;try{a=JSON.parse(i.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return Oz(e,a,t)}catch(i){throw new ay.CredentialsProviderError(i.message,{logger:r})}}else throw new ay.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:r})}else throw new ay.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:r})},Dz=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await cy.parseKnownFiles(e);return Nz(cy.getProfileName({profile:e.profile??t?.profile}),r,e.logger)};jO.fromProcess=Dz});var ly=x(Qt=>{"use strict";c();var kz=Qt&&Qt.__createBinding||(Object.create?(function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]})),Mz=Qt&&Qt.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),$z=Qt&&Qt.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n=e(t),o=0;o<n.length;o++)n[o]!=="default"&&kz(r,t,n[o]);return Mz(r,t),r}})();Object.defineProperty(Qt,"__esModule",{value:!0});Qt.fromWebToken=void 0;var Bz=e=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:n,webIdentityToken:o,providerId:s,policyArns:i,policy:a,durationSeconds:u}=e,{roleAssumerWithWebIdentity:l}=e;if(!l){let{getDefaultRoleAssumerWithWebIdentity:m}=await Promise.resolve().then(()=>$z((iy(),W(sy))));l=m({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return l({RoleArn:r,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:o,ProviderId:s,PolicyArns:i,Policy:a,DurationSeconds:u})};Qt.fromWebToken=Bz});var zO=x(td=>{"use strict";c();Object.defineProperty(td,"__esModule",{value:!0});td.fromTokenFile=void 0;var Lz=(ht(),W(fr)),Uz=Le(),Fz=jt(),Hz=z("fs"),qz=ly(),GO="AWS_WEB_IDENTITY_TOKEN_FILE",jz="AWS_ROLE_ARN",Gz="AWS_ROLE_SESSION_NAME",zz=(e={})=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=e?.webIdentityTokenFile??process.env[GO],n=e?.roleArn??process.env[jz],o=e?.roleSessionName??process.env[Gz];if(!r||!n)throw new Uz.CredentialsProviderError("Web identity configuration not specified",{logger:e.logger});let s=await(0,qz.fromWebToken)({...e,webIdentityToken:Fz.externalDataInterceptor?.getTokenRecord?.()[r]??(0,Hz.readFileSync)(r,{encoding:"ascii"}),roleArn:n,roleSessionName:o})(t);return r===process.env[GO]&&(0,Lz.setCredentialFeature)(s,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),s};td.fromTokenFile=zz});var dy=x(Gi=>{"use strict";c();var VO=zO(),WO=ly();Object.keys(VO).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Gi,e)&&Object.defineProperty(Gi,e,{enumerable:!0,get:function(){return VO[e]}})});Object.keys(WO).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Gi,e)&&Object.defineProperty(Gi,e,{enumerable:!0,get:function(){return WO[e]}})})});var ZO=x(JO=>{"use strict";c();var py=jt(),zi=Le(),br=(ht(),W(fr)),Vz=sP(),Wz=(e,t,r)=>{let n={EcsContainer:async o=>{let{fromHttp:s}=await Promise.resolve().then(()=>A(tg())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>A(ti()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>zi.chain(s(o??{}),i(o))().then(fy)},Ec2InstanceMetadata:async o=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:s}=await Promise.resolve().then(()=>A(ti()));return async()=>s(o)().then(fy)},Environment:async o=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:s}=await Promise.resolve().then(()=>A(Wh()));return async()=>s(o)().then(fy)}};if(e in n)return n[e];throw new zi.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},fy=e=>br.setCredentialFeature(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),Kz=(e,{profile:t="default",logger:r}={})=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(Yz(e,{profile:t,logger:r})||Xz(e,{profile:t,logger:r})),Yz=(e,{profile:t,logger:r})=>{let n=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return n&&r?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),n},Xz=(e,{profile:t,logger:r})=>{let n=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return n&&r?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),n},Qz=async(e,t,r,n,o={},s)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let i=t[e],{source_profile:a,region:u}=i;if(!r.roleAssumer){let{getDefaultRoleAssumer:m}=await Promise.resolve().then(()=>(iy(),sy));r.roleAssumer=m({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...n,...r?.parentClientConfig,region:u??r?.parentClientConfig?.region??n?.region}},r.clientPlugins)}if(a&&a in o)throw new zi.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${py.getProfileName(r)}. Profiles visited: `+Object.keys(o).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${a?`source_profile=[${a}]`:`profile=[${e}]`}`);let l=a?s(a,t,r,n,{...o,[a]:!0},KO(t[a]??{})):(await Wz(i.credential_source,e,r.logger)(r))();if(KO(i))return l.then(m=>br.setCredentialFeature(m,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let m={RoleArn:i.role_arn,RoleSessionName:i.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:i.external_id,DurationSeconds:parseInt(i.duration_seconds||"3600",10)},{mfa_serial:p}=i;if(p){if(!r.mfaCodeProvider)throw new zi.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});m.SerialNumber=p,m.TokenCode=await r.mfaCodeProvider(p)}let g=await l;return r.roleAssumer(g,m).then(h=>br.setCredentialFeature(h,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},KO=e=>!e.role_arn&&!!e.credential_source,Jz=e=>!!(e&&e.login_session),Zz=async(e,t,r)=>{let n=await Vz.fromLoginCredentials({...t,profile:e})({callerClientConfig:r});return br.setCredentialFeature(n,"CREDENTIALS_PROFILE_LOGIN","AC")},eV=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",tV=async(e,t)=>Promise.resolve().then(()=>A(uy())).then(({fromProcess:r})=>r({...e,profile:t})().then(n=>br.setCredentialFeature(n,"CREDENTIALS_PROFILE_PROCESS","v"))),rV=async(e,t,r={},n)=>{let{fromSSO:o}=await Promise.resolve().then(()=>A(xg()));return o({profile:e,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})({callerClientConfig:n}).then(s=>t.sso_session?br.setCredentialFeature(s,"CREDENTIALS_PROFILE_SSO","r"):br.setCredentialFeature(s,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},nV=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),YO=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,XO=async(e,t)=>{t?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return br.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},oV=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,sV=async(e,t,r)=>Promise.resolve().then(()=>A(dy())).then(({fromTokenFile:n})=>n({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})({callerClientConfig:r}).then(o=>br.setCredentialFeature(o,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),QO=async(e,t,r,n,o={},s=!1)=>{let i=t[e];if(Object.keys(o).length>0&&YO(i))return XO(i,r);if(s||Kz(i,{profile:e,logger:r.logger}))return Qz(e,t,r,n,o,QO);if(YO(i))return XO(i,r);if(oV(i))return sV(i,r,n);if(eV(i))return tV(r,e);if(nV(i))return await rV(e,i,r,n);if(Jz(i))return Zz(e,r,n);throw new zi.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})},iV=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let r=await py.parseKnownFiles(e);return QO(py.getProfileName({profile:e.profile??t?.profile}),r,e,t)};JO.fromIni=iV});var nN=x(rd=>{"use strict";c();var my=Wh(),Vi=Le(),aV=jt(),eN="AWS_EC2_METADATA_DISABLED",cV=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:n,fromInstanceMetadata:o}=await Promise.resolve().then(()=>A(ti()));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:s}=await Promise.resolve().then(()=>A(tg()));return Vi.chain(s(e),n(e))}return process.env[eN]&&process.env[eN]!=="false"?async()=>{throw new Vi.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),o(e))};function uV(e,t){let r=lV(e),n,o,s,i=async a=>{if(a?.forceRefresh)return await r(a);if(s?.expiration&&s?.expiration?.getTime()<Date.now()&&(s=void 0),n)await n;else if(!s||t?.(s))if(s)o||(o=r(a).then(u=>{s=u,o=void 0}));else return n=r(a).then(u=>{s=u,n=void 0}),i(a);return s};return i}var lV=e=>async t=>{let r;for(let n of e)try{return await n(t)}catch(o){if(r=o,o?.tryNextLink)continue;throw o}throw r},tN=!1,dV=(e={})=>uV([async()=>{if(e.profile??process.env[aV.ENV_PROFILE])throw process.env[my.ENV_KEY]&&process.env[my.ENV_SECRET]&&(tN||((e.logger?.warn&&e.logger?.constructor?.name!=="NoOpLogger"?e.logger.warn.bind(e.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),tN=!0)),new Vi.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),my.fromEnv(e)()},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:o,ssoRoleName:s,ssoSession:i}=e;if(!r&&!n&&!o&&!s&&!i)throw new Vi.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});let{fromSSO:a}=await Promise.resolve().then(()=>A(xg()));return a(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>A(ZO()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>A(uy()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>A(dy()));return r(e)(t)},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await cV(e))()),async()=>{throw new Vi.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}],rN),fV=e=>e?.expiration!==void 0,rN=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;rd.credentialsTreatedAsExpired=rN;rd.credentialsWillNeedRefresh=fV;rd.defaultProvider=dV});var sN=x(oN=>{"use strict";c();var pV=tu(),nd=z("stream"),hy=class extends nd.Transform{priorSignature;messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(t){super({autoDestroy:!0,readableObjectMode:!0,writableObjectMode:!0,...t}),this.priorSignature=t.priorSignature,this.eventStreamCodec=t.eventStreamCodec,this.messageSigner=t.messageSigner,this.systemClockOffsetProvider=t.systemClockOffsetProvider}async _transform(t,r,n){try{let o=new Date(Date.now()+await this.systemClockOffsetProvider()),s={":date":{type:"timestamp",value:o}},i=await this.messageSigner.sign({message:{body:t,headers:s},priorSignature:this.priorSignature},{signingDate:o});this.priorSignature=i.signature;let a=this.eventStreamCodec.encode({headers:{...s,":chunk-signature":{type:"binary",value:mV(i.signature)}},body:t});return this.push(a),n()}catch(o){n(o)}}};function mV(e){let t=Buffer.from(e,"hex");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)}var gy=class{messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(t){this.messageSigner=t.messageSigner,this.eventStreamCodec=new pV.EventStreamCodec(t.utf8Encoder,t.utf8Decoder),this.systemClockOffsetProvider=async()=>t.systemClockOffset??0}async handle(t,r,n={}){let o=r.request,{body:s,query:i}=o;if(!(s instanceof nd.Readable))throw new Error("Eventstream payload must be a Readable stream.");let a=s;o.body=new nd.PassThrough({objectMode:!0});let l=o.headers?.authorization?.match(/Signature=([\w]+)$/)?.[1]??i?.["X-Amz-Signature"]??"",m=new hy({priorSignature:l,eventStreamCodec:this.eventStreamCodec,messageSigner:await this.messageSigner(),systemClockOffsetProvider:this.systemClockOffsetProvider});nd.pipeline(a,m,o.body,g=>{if(g)throw g});let p;try{p=await t(r)}catch(g){throw o.body.end(),g}return p}},hV=e=>new gy(e);oN.eventStreamPayloadHandlerProvider=hV});var iN=x(yy=>{"use strict";c();var gV=vh(),yV=z("stream");async function*SV(e){let t=!1,r=!1,n=new Array;for(e.on("error",o=>{if(t||(t=!0),o)throw o}),e.on("data",o=>{n.push(o)}),e.on("end",()=>{t=!0});!r;){let o=await new Promise(s=>setTimeout(()=>s(n.shift()),0));o&&(yield o),r=t&&n.length===0}}var od=class{universalMarshaller;constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new gV.EventStreamMarshaller({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){let n=typeof t[Symbol.asyncIterator]=="function"?t:SV(t);return this.universalMarshaller.deserialize(n,r)}serialize(t,r){return yV.Readable.from(this.universalMarshaller.serialize(t,r))}},EV=e=>new od(e);yy.EventStreamMarshaller=od;yy.eventStreamSerdeProvider=EV});var aN=x(sd=>{"use strict";c();Object.defineProperty(sd,"__esModule",{value:!0});sd.fromBase64=void 0;var _V=Ae(),wV=/^[A-Za-z0-9+/]*={0,2}$/,bV=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!wV.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,_V.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};sd.fromBase64=bV});var cN=x(id=>{"use strict";c();Object.defineProperty(id,"__esModule",{value:!0});id.toBase64=void 0;var vV=Ae(),CV=me(),AV=e=>{let t;if(typeof e=="string"?t=(0,CV.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,vV.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};id.toBase64=AV});var dN=x(Wi=>{"use strict";c();var uN=aN(),lN=cN();Object.keys(uN).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Wi,e)&&Object.defineProperty(Wi,e,{enumerable:!0,get:function(){return uN[e]}})});Object.keys(lN).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Wi,e)&&Object.defineProperty(Wi,e,{enumerable:!0,get:function(){return lN[e]}})})});var AN=x(ad=>{"use strict";c();Object.defineProperty(ad,"__esModule",{value:!0});ad.ruleSet=void 0;var bN="required",Zt="fn",er="argv",us="ref",fN=!0,pN="isSet",Yi="booleanEquals",cs="error",Ki="endpoint",Ze="tree",Sy="PartitionResult",mN={[bN]:!1,type:"string"},hN={[bN]:!0,default:!1,type:"boolean"},gN={[us]:"Endpoint"},vN={[Zt]:Yi,[er]:[{[us]:"UseFIPS"},!0]},CN={[Zt]:Yi,[er]:[{[us]:"UseDualStack"},!0]},Jt={},yN={[Zt]:"getAttr",[er]:[{[us]:Sy},"supportsFIPS"]},SN={[Zt]:Yi,[er]:[!0,{[Zt]:"getAttr",[er]:[{[us]:Sy},"supportsDualStack"]}]},EN=[vN],_N=[CN],wN=[{[us]:"Region"}],TV={version:"1.0",parameters:{Region:mN,UseDualStack:hN,UseFIPS:hN,Endpoint:mN},rules:[{conditions:[{[Zt]:pN,[er]:[gN]}],rules:[{conditions:EN,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:cs},{rules:[{conditions:_N,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:cs},{endpoint:{url:gN,properties:Jt,headers:Jt},type:Ki}],type:Ze}],type:Ze},{rules:[{conditions:[{[Zt]:pN,[er]:wN}],rules:[{conditions:[{[Zt]:"aws.partition",[er]:wN,assign:Sy}],rules:[{conditions:[vN,CN],rules:[{conditions:[{[Zt]:Yi,[er]:[fN,yN]},SN],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Jt,headers:Jt},type:Ki}],type:Ze}],type:Ze},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:cs}],type:Ze},{conditions:EN,rules:[{conditions:[{[Zt]:Yi,[er]:[yN,fN]}],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Jt,headers:Jt},type:Ki}],type:Ze}],type:Ze},{error:"FIPS is enabled but this partition does not support FIPS",type:cs}],type:Ze},{conditions:_N,rules:[{conditions:[SN],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Jt,headers:Jt},type:Ki}],type:Ze}],type:Ze},{error:"DualStack is enabled but this partition does not support DualStack",type:cs}],type:Ze},{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dnsSuffix}",properties:Jt,headers:Jt},type:Ki}],type:Ze}],type:Ze}],type:Ze},{error:"Invalid Configuration: Missing Region",type:cs}],type:Ze}]};ad.ruleSet=TV});var TN=x(cd=>{"use strict";c();Object.defineProperty(cd,"__esModule",{value:!0});cd.defaultEndpointResolver=void 0;var xV=Mn(),Ey=Nr(),RV=AN(),IV=new Ey.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),PV=(e,t={})=>IV.get(e,()=>(0,Ey.resolveEndpoint)(RV.ruleSet,{endpointParams:e,logger:t.logger}));cd.defaultEndpointResolver=PV;Ey.customEndpointFunctions.aws=xV.awsEndpointFunctions});var IN=x(ud=>{"use strict";c();Object.defineProperty(ud,"__esModule",{value:!0});ud.getRuntimeConfig=void 0;var OV=(Pe(),W(Kr)),NV=(Un(),W(ah)),DV=(xe(),W(lr)),kV=X(),MV=dr(),xN=dN(),RN=me(),$V=Vh(),BV=TN(),LV=e=>({apiVersion:"2023-09-30",base64Decoder:e?.base64Decoder??xN.fromBase64,base64Encoder:e?.base64Encoder??xN.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??BV.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??$V.defaultBedrockRuntimeHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new OV.AwsSdkSigV4Signer},{schemeId:"smithy.api#httpBearerAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#httpBearerAuth"),signer:new DV.HttpBearerAuthSigner}],logger:e?.logger??new kV.NoOpLogger,protocol:e?.protocol??NV.AwsRestJsonProtocol,protocolSettings:e?.protocolSettings??{defaultNamespace:"com.amazonaws.bedrockruntime",version:"2023-09-30",serviceTarget:"AmazonBedrockFrontendService"},serviceId:e?.serviceId??"Bedrock Runtime",urlParser:e?.urlParser??MV.parseUrl,utf8Decoder:e?.utf8Decoder??RN.fromUtf8,utf8Encoder:e?.utf8Encoder??RN.toUtf8});ud.getRuntimeConfig=LV});var MN=x(dd=>{"use strict";c();Object.defineProperty(dd,"__esModule",{value:!0});dd.getRuntimeConfig=void 0;var UV=(Rn(),W(xn)),FV=UV.__importDefault(bA()),_y=(Pe(),W(Kr)),HV=nN(),qV=sN(),PN=_g(),ON=zo(),ld=ot(),jV=(xe(),W(lr)),GV=iN(),zV=Vo(),NN=xt(),oo=Gt(),DN=Ir(),kN=X(),VV=Wo(),WV=Ko(),KV=Gn(),YV=IN(),XV=e=>{(0,kN.emitWarningIfUnsupportedVersion)(process.version);let t=(0,WV.resolveDefaultsModeConfig)(e),r=()=>t().then(kN.loadConfigsForDefaultMode),n=(0,YV.getRuntimeConfig)(e);(0,_y.emitWarningIfUnsupportedVersion)(process.version);let o={profile:e?.profile,logger:n.logger,signingName:"bedrock"};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,oo.loadConfig)(_y.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,o),bodyLengthChecker:e?.bodyLengthChecker??VV.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??HV.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,ON.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:FV.default.version}),eventStreamPayloadHandlerProvider:e?.eventStreamPayloadHandlerProvider??qV.eventStreamPayloadHandlerProvider,eventStreamSerdeProvider:e?.eventStreamSerdeProvider??GV.eventStreamSerdeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4"),signer:new _y.AwsSdkSigV4Signer},{schemeId:"smithy.api#httpBearerAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#httpBearerAuth")||(async i=>{try{return await(0,PN.fromEnvSigningName)({signingName:"bedrock"})()}catch{return await(0,PN.nodeProvider)(i)(i)}}),signer:new jV.HttpBearerAuthSigner}],maxAttempts:e?.maxAttempts??(0,oo.loadConfig)(NN.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,oo.loadConfig)(ld.NODE_REGION_CONFIG_OPTIONS,{...ld.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:DN.NodeHttp2Handler.create(e?.requestHandler??(async()=>({...await r(),disableConcurrentStreams:!0}))),retryMode:e?.retryMode??(0,oo.loadConfig)({...NN.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||KV.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??zV.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??DN.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,oo.loadConfig)(ld.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,oo.loadConfig)(ld.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,oo.loadConfig)(ON.NODE_APP_ID_CONFIG_OPTIONS,o)}};dd.getRuntimeConfig=XV});var PM=x(y=>{"use strict";c();var YN=vS(),$N=lo(),QV=fo(),JV=po(),BN=Fn(),XN=yC(),ZV=ot(),fd=(xe(),W(lr)),it=(ne(),W(ja)),eW=IC(),tW=Fo(),kt=zt(),LN=xt(),ke=X(),UN=Vh(),rW=MN(),FN=Vn(),HN=oe(),nW=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"bedrock"}),tr={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},oW=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials,o=e.token;return{setHttpAuthScheme(s){let i=t.findIndex(a=>a.schemeId===s.schemeId);i===-1?t.push(s):t.splice(i,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n},setToken(s){o=s},token(){return o}}},sW=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials(),token:e.token()}),iW=(e,t)=>{let r=Object.assign(FN.getAwsRegionExtensionConfiguration(e),ke.getDefaultExtensionConfiguration(e),HN.getHttpHandlerExtensionConfiguration(e),oW(e));return t.forEach(n=>n.configure(r)),Object.assign(e,FN.resolveAwsRegionExtensionConfiguration(r),ke.resolveDefaultRuntimeConfig(r),HN.resolveHttpHandlerRuntimeConfig(r),sW(r))},Xi=class extends ke.Client{config;constructor(...[t]){let r=rW.getRuntimeConfig(t||{});super(r),this.initConfig=r;let n=nW(r),o=BN.resolveUserAgentConfig(n),s=LN.resolveRetryConfig(o),i=ZV.resolveRegionConfig(s),a=$N.resolveHostHeaderConfig(i),u=kt.resolveEndpointConfig(a),l=eW.resolveEventStreamSerdeConfig(u),m=UN.resolveHttpAuthSchemeConfig(l),p=YN.resolveEventStreamConfig(m),g=XN.resolveWebSocketConfig(p),h=iW(g,t?.extensions||[]);this.config=h,this.middlewareStack.use(it.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(BN.getUserAgentPlugin(this.config)),this.middlewareStack.use(LN.getRetryPlugin(this.config)),this.middlewareStack.use(tW.getContentLengthPlugin(this.config)),this.middlewareStack.use($N.getHostHeaderPlugin(this.config)),this.middlewareStack.use(QV.getLoggerPlugin(this.config)),this.middlewareStack.use(JV.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(fd.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:UN.defaultBedrockRuntimeHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async _=>new fd.DefaultIdentityProviderConfig({"aws.auth#sigv4":_.credentials,"smithy.api#httpBearerAuth":_.token})})),this.middlewareStack.use(fd.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Ge=class e extends ke.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},pd=class e extends Ge{name="AccessDeniedException";$fault="client";constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},md=class e extends Ge{name="InternalServerException";$fault="server";constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype)}},hd=class e extends Ge{name="ThrottlingException";$fault="client";constructor(t){super({name:"ThrottlingException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},gd=class e extends Ge{name="ValidationException";$fault="client";constructor(t){super({name:"ValidationException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},yd=class e extends Ge{name="ConflictException";$fault="client";constructor(t){super({name:"ConflictException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Sd=class e extends Ge{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ed=class e extends Ge{name="ServiceQuotaExceededException";$fault="client";constructor(t){super({name:"ServiceQuotaExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},_d=class e extends Ge{name="ServiceUnavailableException";$fault="server";constructor(t){super({name:"ServiceUnavailableException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype)}},wd=class e extends Ge{name="ModelErrorException";$fault="client";originalStatusCode;resourceName;constructor(t){super({name:"ModelErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.originalStatusCode=t.originalStatusCode,this.resourceName=t.resourceName}},bd=class e extends Ge{name="ModelNotReadyException";$fault="client";$retryable={};constructor(t){super({name:"ModelNotReadyException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},vd=class e extends Ge{name="ModelTimeoutException";$fault="client";constructor(t){super({name:"ModelTimeoutException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Cd=class e extends Ge{name="ModelStreamErrorException";$fault="client";originalStatusCode;originalMessage;constructor(t){super({name:"ModelStreamErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.originalStatusCode=t.originalStatusCode,this.originalMessage=t.originalMessage}},aW="Accept",cW="AudioBlock",uW="AccessDeniedException",lW="ApplyGuardrail",dW="AppliedGuardrailDetails",fW="ApplyGuardrailRequest",pW="ApplyGuardrailResponse",mW="AsyncInvokeMessage",hW="AsyncInvokeOutputDataConfig",gW="AsyncInvokeSummary",yW="AsyncInvokeS3OutputDataConfig",SW="AsyncInvokeSummaries",EW="AudioSource",_W="AnyToolChoice",wW="AutoToolChoice",bW="Body",vW="BidirectionalInputPayloadPart",CW="BidirectionalOutputPayloadPart",AW="Citation",TW="ContentBlocks",xW="ContentBlockDelta",RW="ContentBlockDeltaEvent",IW="ContentBlockStart",PW="ContentBlockStartEvent",OW="ContentBlockStopEvent",NW="ContentBlock",DW="CitationsConfig",kW="CitationsContentBlock",MW="CacheDetail",$W="CacheDetailsList",BW="CitationsDelta",LW="ConflictException",UW="CitationGeneratedContent",FW="CitationGeneratedContentList",HW="CitationLocation",qW="ConverseMetrics",jW="ConverseOutput",GW="CachePointBlock",zW="ConverseRequest",VW="ConverseResponse",WW="ConverseStream",KW="CitationSourceContent",YW="CitationSourceContentDelta",XW="CitationSourceContentList",QW="CitationSourceContentListDelta",JW="ConverseStreamMetrics",ZW="ConverseStreamMetadataEvent",e5="ConverseStreamOutput",t5="ConverseStreamRequest",r5="ConverseStreamResponse",n5="ConverseStreamTrace",o5="ConverseTrace",s5="CountTokensInput",i5="ConverseTokensRequest",a5="CountTokensRequest",c5="CountTokensResponse",by="Content-Type",u5="CountTokens",l5="Citations",d5="Converse",f5="DocumentBlock",p5="DocumentContentBlocks",m5="DocumentContentBlock",h5="DocumentCharLocation",g5="DocumentChunkLocation",y5="DocumentPageLocation",S5="DocumentSource",E5="ErrorBlock",_5="GuardrailAssessment",w5="GetAsyncInvoke",b5="GetAsyncInvokeRequest",v5="GetAsyncInvokeResponse",C5="GuardrailAssessmentList",A5="GuardrailAssessmentListMap",T5="GuardrailAssessmentMap",x5="GuardrailAutomatedReasoningDifferenceScenarioList",R5="GuardrailAutomatedReasoningFinding",I5="GuardrailAutomatedReasoningFindingList",P5="GuardrailAutomatedReasoningImpossibleFinding",O5="GuardrailAutomatedReasoningInvalidFinding",N5="GuardrailAutomatedReasoningInputTextReference",D5="GuardrailAutomatedReasoningInputTextReferenceList",k5="GuardrailAutomatedReasoningLogicWarning",M5="GuardrailAutomatedReasoningNoTranslationsFinding",$5="GuardrailAutomatedReasoningPolicyAssessment",B5="GuardrailAutomatedReasoningRule",L5="GuardrailAutomatedReasoningRuleList",U5="GuardrailAutomatedReasoningScenario",F5="GuardrailAutomatedReasoningSatisfiableFinding",H5="GuardrailAutomatedReasoningStatementList",q5="GuardrailAutomatedReasoningStatementLogicContent",j5="GuardrailAutomatedReasoningStatementNaturalLanguageContent",G5="GuardrailAutomatedReasoningStatement",z5="GuardrailAutomatedReasoningTranslation",V5="GuardrailAutomatedReasoningTranslationAmbiguousFinding",W5="GuardrailAutomatedReasoningTooComplexFinding",K5="GuardrailAutomatedReasoningTranslationList",Y5="GuardrailAutomatedReasoningTranslationOption",X5="GuardrailAutomatedReasoningTranslationOptionList",Q5="GuardrailAutomatedReasoningValidFinding",J5="GuardrailConfiguration",Z5="GuardrailContentBlock",eK="GuardrailContentBlockList",tK="GuardrailConverseContentBlock",rK="GuardrailContentFilter",nK="GuardrailContentFilterList",oK="GuardrailContextualGroundingFilter",sK="GuardrailContextualGroundingFilters",iK="GuardrailContextualGroundingPolicyAssessment",aK="GuardrailConverseImageBlock",cK="GuardrailConverseImageSource",uK="GuardrailContentPolicyAssessment",lK="GuardrailConverseTextBlock",dK="GuardrailCustomWord",fK="GuardrailCustomWordList",pK="GuardrailCoverage",mK="GuardrailImageBlock",hK="GuardrailImageCoverage",gK="GuardrailInvocationMetrics",yK="GuardrailImageSource",SK="GuardrailManagedWord",EK="GuardrailManagedWordList",_K="GuardrailOutputContent",wK="GuardrailOutputContentList",bK="GuardrailPiiEntityFilter",vK="GuardrailPiiEntityFilterList",CK="GuardrailRegexFilter",AK="GuardrailRegexFilterList",TK="GuardrailStreamConfiguration",xK="GuardrailSensitiveInformationPolicyAssessment",RK="GuardrailTopic",IK="GuardrailTraceAssessment",PK="GuardrailTextBlock",OK="GuardrailTextCharactersCoverage",NK="GuardrailTopicList",DK="GuardrailTopicPolicyAssessment",kK="GuardrailUsage",MK="GuardrailWordPolicyAssessment",$K="ImageBlock",BK="ImageBlockDelta",LK="ImageBlockStart",UK="InferenceConfiguration",FK="InvokeModel",HK="InvokeModelRequest",qK="InvokeModelResponse",jK="InvokeModelTokensRequest",GK="InvokeModelWithBidirectionalStream",zK="InvokeModelWithBidirectionalStreamInput",VK="InvokeModelWithBidirectionalStreamOutput",WK="InvokeModelWithBidirectionalStreamRequest",KK="InvokeModelWithBidirectionalStreamResponse",YK="InvokeModelWithResponseStream",XK="InvokeModelWithResponseStreamRequest",QK="InvokeModelWithResponseStreamResponse",JK="ImageSource",ZK="InternalServerException",e9="ListAsyncInvokes",t9="ListAsyncInvokesRequest",r9="ListAsyncInvokesResponse",n9="Message",o9="ModelErrorException",s9="ModelInputPayload",i9="ModelNotReadyException",a9="MessageStartEvent",c9="ModelStreamErrorException",u9="MessageStopEvent",l9="ModelTimeoutException",d9="Messages",f9="PartBody",p9="PerformanceConfiguration",m9="PayloadPart",h9="PromptRouterTrace",g9="PromptVariableMap",y9="PromptVariableValues",S9="ReasoningContentBlock",E9="ReasoningContentBlockDelta",_9="RequestMetadata",w9="ResourceNotFoundException",b9="ResponseStream",v9="ReasoningTextBlock",C9="StartAsyncInvoke",A9="StartAsyncInvokeRequest",T9="StartAsyncInvokeResponse",x9="SystemContentBlocks",R9="SystemContentBlock",I9="S3Location",P9="ServiceQuotaExceededException",O9="SearchResultBlock",N9="SearchResultContentBlock",D9="SearchResultContentBlocks",k9="SearchResultLocation",M9="ServiceTier",$9="SpecificToolChoice",B9="SystemTool",L9="ServiceUnavailableException",U9="Tag",F9="ToolConfiguration",H9="ToolChoice",q9="ThrottlingException",j9="ToolInputSchema",G9="TagList",z9="ToolResultBlock",V9="ToolResultBlocksDelta",W9="ToolResultBlockDelta",K9="ToolResultBlockStart",Y9="ToolResultContentBlocks",X9="ToolResultContentBlock",Q9="ToolSpecification",J9="TokenUsage",Z9="ToolUseBlock",e7="ToolUseBlockDelta",t7="ToolUseBlockStart",r7="Tools",n7="Tool",o7="VideoBlock",s7="ValidationException",i7="VideoSource",a7="WebLocation",c7="X-Amzn-Bedrock-Accept",u7="X-Amzn-Bedrock-Content-Type",QN="X-Amzn-Bedrock-GuardrailIdentifier",JN="X-Amzn-Bedrock-GuardrailVersion",Md="X-Amzn-Bedrock-PerformanceConfig-Latency",$d="X-Amzn-Bedrock-Service-Tier",ZN="X-Amzn-Bedrock-Trace",yn="action",l7="appliedGuardrailDetails",d7="asyncInvokeSummaries",vy="additionalModelRequestFields",eD="additionalModelResponseFieldPaths",tD="additionalModelResponseFields",rD="actionReason",f7="automatedReasoningPolicy",p7="automatedReasoningPolicyUnits",m7="automatedReasoningPolicies",nD="accept",h7="any",g7="assessments",y7="audio",S7="auto",vr="bytes",oD="bucketOwner",io="body",rr="client",E7="contentBlockDelta",Cy="contentBlockIndex",_7="contentBlockStart",w7="contentBlockStop",b7="citationsContent",v7="cacheDetails",C7="claimsFalseScenario",A7="contextualGroundingPolicy",T7="contextualGroundingPolicyUnits",x7="contentPolicy",R7="contentPolicyImageUnits",I7="contentPolicyUnits",Ay="cachePoint",sD="contradictingRules",P7="cacheReadInputTokens",Ty="clientRequestToken",Bd="contentType",iD="claimsTrueScenario",O7="customWords",N7="cacheWriteInputTokens",xy="chunk",Ry="citations",D7="citation",aD="claims",ls="content",k7="context",cD="confidence",M7="converse",$7="delta",B7="documentChar",L7="documentChunk",Iy="documentIndex",U7="documentPage",F7="differenceScenarios",ao="detected",H7="description",q7="domain",uD="document",et="error",lD="endTime",j7="enabled",Ld="end",co="format",dD="failureMessage",G7="filterStrength",z7="findings",fD="filters",pD="guardrail",V7="guardrailArn",mD="guardrailCoverage",hD="guardrailConfig",gD="guardContent",W7="guardrailId",ea="guardrailIdentifier",K7="guardrailOrigin",Y7="guardrailOwnership",X7="guardrailProcessingLatency",ds="guardrailVersion",yD="guarded",nr="http",bt="httpError",be="httpHeader",so="httpQuery",Py="input",Ud="invocationArn",Q7="inputAssessment",SD="inferenceConfig",J7="invocationMetrics",Z7="invokedModelId",eY="invokeModel",tY="inputSchema",Oy="internalServerException",Ny="inputTokens",rY="identifier",nY="images",fs="image",oY="impossible",sY="invalid",Dy="json",iY="key",aY="kmsKeyId",ED="location",_D="latencyMs",wD="lastModifiedTime",Fd="logicWarning",cY="latency",uY="logic",at="message",bD="modelArn",uo="modelId",lY="modelInput",dY="modelOutput",qN="maxResults",fY="messageStart",ky="modelStreamErrorException",pY="messageStop",mY="maxTokens",vD="modelTimeoutException",hY="managedWordLists",Hd="match",My="messages",CD="metrics",gY="metadata",Sn="name",yY="naturalLanguage",wy="nextToken",SY="noTranslations",EY="outputs",_Y="outputAssessments",$y="outputDataConfig",wY="originalMessage",bY="outputScope",AD="originalStatusCode",vY="outputTokens",CY="options",AY="output",TD="premises",qd="performanceConfig",jd="performanceConfigLatency",TY="piiEntities",xD="promptRouter",RD="promptVariables",xY="policyVersionArn",ID="qualifiers",RY="regex",PD="reasoningContent",OD="redactedContent",ND="requestMetadata",IY="resourceName",PY="reasoningText",OY="regexes",DD="role",Mt="source",jN="sortBy",kD="sourceContent",GN="statusEquals",NY="sensitiveInformationPolicy",DY="sensitiveInformationPolicyFreeUnits",kY="sensitiveInformationPolicyUnits",Gd="s3Location",zN="sortOrder",MY="s3OutputDataConfig",$Y="streamProcessingMode",MD="stopReason",BY="searchResultIndex",LY="searchResultLocation",$D="searchResult",UY="supportingRules",FY="stopSequences",BD="submitTime",VN="submitTimeAfter",WN="submitTimeBefore",En="serviceTier",HY="systemTool",qY="s3Uri",By="serviceUnavailableException",jY="satisfiable",GY="score",LD="server",UD="signature",FD="smithy.ts.sdk.synthetic.com.amazonaws.bedrockruntime",zd="status",ta="start",zY="statements",VY="stream",Vd="streaming",Ly="system",HD="ttl",WY="translationAmbiguous",Uy="toolConfig",KY="textCharacters",YY="toolChoice",XY="tooComplex",Fy="throttlingException",QY="topicPolicy",JY="topicPolicyUnits",ZY="topP",Hy="toolResult",eX="toolSpec",tX="totalTokens",qy="toolUse",Wd="toolUseId",rX="tags",ve="text",nX="temperature",oX="threshold",jy="title",qD="total",sX="tools",iX="tool",aX="topics",ps="trace",Kd="translation",cX="translations",vt="type",Yd="usage",uX="untranslatedClaims",lX="untranslatedPremises",dX="uri",fX="url",pX="value",Gy="validationException",mX="valid",jD="video",hX="web",gX="wordPolicy",yX="wordPolicyUnits",S="com.amazonaws.bedrockruntime",GD=[0,S,mW,8,0],Xd=[0,S,bW,8,21],SX=[0,S,q5,8,0],zD=[0,S,j5,8,0],EX=[0,S,s9,8,15],zy=[0,S,f9,8,21],VD=[-3,S,uW,{[et]:rr,[bt]:403},[at],[0]];it.TypeRegistry.for(S).registerError(VD,pd);var WD=[3,S,_W,0,[],[]],KD=[3,S,dW,0,[W7,ds,V7,K7,Y7],[0,0,0,64,0]],YD=[3,S,fW,0,[ea,ds,Mt,ls,bY],[[0,1],[0,1],0,[()=>NX,0],0],4],XD=[3,S,pW,0,[Yd,yn,EY,g7,rD,mD],[()=>Qy,0,()=>BX,[()=>j1,0],0,()=>Yy],4],QD=[3,S,yW,0,[qY,aY,oD],[0,0,0],1],JD=[3,S,gW,0,[Ud,bD,BD,$y,Ty,zd,dD,wD,lD],[0,0,5,()=>tf,0,0,[()=>GD,0],5,5],4],ZD=[3,S,cW,0,[co,Mt,et],[0,[()=>V1,0],[()=>Jd,0]],2],ek=[3,S,wW,0,[],[]],tk=[3,S,vW,8,[vr],[[()=>zy,0]]],rk=[3,S,CW,8,[vr],[[()=>zy,0]]],nk=[3,S,MW,0,[HD,Ny],[0,1],2],Qd=[3,S,GW,0,[vt,HD],[0,0],1],ok=[3,S,AW,0,[jy,Mt,kD,ED],[0,0,()=>CX,()=>cS]],Vy=[3,S,DW,0,[j7],[2],1],sk=[3,S,kW,0,[ls,Ry],[()=>bX,()=>vX]],ik=[3,S,BW,0,[jy,Mt,kD,ED],[0,0,()=>AX,()=>cS]],ak=[3,S,YW,0,[ve],[0]],ck=[-3,S,LW,{[et]:rr,[bt]:400},[at],[0]];it.TypeRegistry.for(S).registerError(ck,yd);var uk=[3,S,RW,0,[$7,Cy],[[()=>X1,0],1],2],lk=[3,S,PW,0,[ta,Cy],[()=>Q1,1],2],dk=[3,S,OW,0,[Cy],[1],1],fk=[3,S,qW,0,[_D],[1],1],pk=[3,S,zW,0,[uo,My,Ly,SD,Uy,hD,vy,RD,eD,ND,qd,En],[[0,1],[()=>iS,0],[()=>aS,0],()=>Zy,()=>ef,()=>Hk,15,[()=>G1,0],64,[()=>z1,0],()=>sa,()=>aa],1],mk=[3,S,VW,0,[AY,MD,Yd,CD,tD,ps,qd,En],[[()=>J1,0],0,()=>nS,()=>fk,15,[()=>wk,0],()=>sa,()=>aa],4],hk=[3,S,ZW,0,[Yd,CD,ps,qd,En],[()=>nS,()=>gk,[()=>Ek,0],()=>sa,()=>aa],2],gk=[3,S,JW,0,[_D],[1],1],yk=[3,S,t5,0,[uo,My,Ly,SD,Uy,hD,vy,RD,eD,ND,qd,En],[[0,1],[()=>iS,0],[()=>aS,0],()=>Zy,()=>ef,()=>n1,15,[()=>G1,0],64,[()=>z1,0],()=>sa,()=>aa],1],Sk=[3,S,r5,0,[VY],[[()=>Z1,16]]],Ek=[3,S,n5,0,[pD,xD],[[()=>Xy,0],()=>tS]],_k=[3,S,i5,0,[My,Ly,Uy,vy],[[()=>iS,0],[()=>aS,0],()=>ef,15]],wk=[3,S,o5,0,[pD,xD],[[()=>Xy,0],()=>tS]],bk=[3,S,a5,0,[uo,Py],[[0,1],[()=>eM,0]],2],vk=[3,S,c5,0,[Ny],[1],1],Wy=[3,S,f5,0,[Sn,Mt,co,k7,Ry],[0,()=>rM,0,0,()=>Vy],2],Ck=[3,S,h5,0,[Iy,ta,Ld],[1,1,1]],Ak=[3,S,g5,0,[Iy,ta,Ld],[1,1,1]],Tk=[3,S,y5,0,[Iy,ta,Ld],[1,1,1]],Jd=[3,S,E5,8,[at],[0]],xk=[3,S,b5,0,[Ud],[[0,1]],1],Rk=[3,S,v5,0,[Ud,bD,zd,BD,$y,Ty,dD,wD,lD],[0,0,0,5,()=>tf,0,[()=>GD,0],5,5],5],Ky=[3,S,_5,0,[QY,x7,gX,NY,A7,f7,J7,l7],[()=>a1,()=>jk,()=>c1,()=>r1,()=>zk,[()=>Dk,0],()=>Qk,()=>KD]],Ik=[3,S,P5,0,[Kd,sD,Fd],[[()=>ms,0],()=>sS,[()=>ra,0]]],Pk=[3,S,N5,0,[ve],[[()=>zD,0]]],Ok=[3,S,O5,0,[Kd,sD,Fd],[[()=>ms,0],()=>sS,[()=>ra,0]]],ra=[3,S,k5,0,[vt,TD,aD],[0,[()=>Ji,0],[()=>Ji,0]]],Nk=[3,S,M5,0,[],[]],Dk=[3,S,$5,0,[z7],[[()=>IX,0]]],kk=[3,S,B5,0,[rY,xY],[0,0]],Mk=[3,S,F5,0,[Kd,iD,C7,Fd],[[()=>ms,0],[()=>Qi,0],[()=>Qi,0],[()=>ra,0]]],Qi=[3,S,U5,0,[zY],[[()=>Ji,0]]],$k=[3,S,G5,0,[uY,yY],[[()=>SX,0],[()=>zD,0]]],Bk=[3,S,W5,0,[],[]],ms=[3,S,z5,0,[TD,aD,lX,uX,cD],[[()=>Ji,0],[()=>Ji,0],[()=>KN,0],[()=>KN,0],1]],Lk=[3,S,V5,0,[CY,F7],[[()=>OX,0],[()=>RX,0]]],Uk=[3,S,Y5,0,[cX],[[()=>PX,0]]],Fk=[3,S,Q5,0,[Kd,iD,UY,Fd],[[()=>ms,0],[()=>Qi,0],()=>sS,[()=>ra,0]]],Hk=[3,S,J5,0,[ea,ds,ps],[0,0,0]],qk=[3,S,rK,0,[vt,cD,yn,G7,ao],[0,0,0,0,2],3],jk=[3,S,uK,0,[fD],[()=>DX],1],Gk=[3,S,oK,0,[vt,oX,GY,yn,ao],[0,1,1,0,2],4],zk=[3,S,iK,0,[fD],[()=>kX]],Vk=[3,S,aK,8,[co,Mt],[0,[()=>sM,0]],2],Wk=[3,S,lK,0,[ve,ID],[0,64],1],Yy=[3,S,pK,0,[KY,nY],[()=>s1,()=>Xk]],Kk=[3,S,dK,0,[Hd,yn,ao],[0,0,2],2],Yk=[3,S,mK,8,[co,Mt],[0,[()=>iM,0]],2],Xk=[3,S,hK,0,[yD,qD],[1,1]],Qk=[3,S,gK,0,[X7,Yd,mD],[1,()=>Qy,()=>Yy]],Jk=[3,S,SK,0,[Hd,vt,yn,ao],[0,0,0,2],3],Zk=[3,S,_K,0,[ve],[0]],e1=[3,S,bK,0,[Hd,vt,yn,ao],[0,0,0,2],3],t1=[3,S,CK,0,[yn,Sn,Hd,RY,ao],[0,0,0,0,2],1],r1=[3,S,xK,0,[TY,OY],[()=>LX,()=>UX],2],n1=[3,S,TK,0,[ea,ds,ps,$Y],[0,0,0,0]],o1=[3,S,PK,0,[ve,ID],[0,64],1],s1=[3,S,OK,0,[yD,qD],[1,1]],i1=[3,S,RK,0,[Sn,vt,yn,ao],[0,0,0,2],3],a1=[3,S,DK,0,[aX],[()=>FX],1],Xy=[3,S,IK,0,[dY,Q7,_Y,rD],[64,[()=>WX,0],[()=>VX,0],0]],Qy=[3,S,kK,0,[JY,I7,yX,kY,DY,T7,R7,p7,m7],[1,1,1,1,1,1,1,1,1],6],c1=[3,S,MK,0,[O7,hY],[()=>MX,()=>$X],2],Jy=[3,S,$K,0,[co,Mt,et],[0,[()=>lS,0],[()=>Jd,0]],2],u1=[3,S,BK,0,[Mt,et],[[()=>lS,0],[()=>Jd,0]]],l1=[3,S,LK,0,[co],[0],1],Zy=[3,S,UK,0,[mY,nX,ZY,FY],[1,1,1,64]],na=[-3,S,ZK,{[et]:LD,[bt]:500},[at],[0]];it.TypeRegistry.for(S).registerError(na,md);var d1=[3,S,HK,0,[uo,io,Bd,nD,ps,ea,ds,jd,En],[[0,1],[()=>Xd,16],[0,{[be]:by}],[0,{[be]:aW}],[0,{[be]:ZN}],[0,{[be]:QN}],[0,{[be]:JN}],[0,{[be]:Md}],[0,{[be]:$d}]],1],f1=[3,S,qK,0,[io,Bd,jd,En],[[()=>Xd,16],[0,{[be]:by}],[0,{[be]:Md}],[0,{[be]:$d}]],2],p1=[3,S,jK,0,[io],[[()=>Xd,0]],1],m1=[3,S,WK,0,[uo,io],[[0,1],[()=>aM,16]],2],h1=[3,S,KK,0,[io],[[()=>cM,16]],1],g1=[3,S,XK,0,[uo,io,Bd,nD,ps,ea,ds,jd,En],[[0,1],[()=>Xd,16],[0,{[be]:by}],[0,{[be]:c7}],[0,{[be]:ZN}],[0,{[be]:QN}],[0,{[be]:JN}],[0,{[be]:Md}],[0,{[be]:$d}]],1],y1=[3,S,QK,0,[io,Bd,jd,En],[[()=>fM,16],[0,{[be]:u7}],[0,{[be]:Md}],[0,{[be]:$d}]],2],S1=[3,S,t9,0,[VN,WN,GN,qN,wy,jN,zN],[[5,{[so]:VN}],[5,{[so]:WN}],[0,{[so]:GN}],[1,{[so]:qN}],[0,{[so]:wy}],[0,{[so]:jN}],[0,{[so]:zN}]]],E1=[3,S,r9,0,[wy,d7],[0,[()=>_X,0]]],eS=[3,S,n9,0,[DD,ls],[0,[()=>TX,0]],2],_1=[3,S,a9,0,[DD],[0],1],w1=[3,S,u9,0,[MD,tD],[0,15],1],b1=[-3,S,o9,{[et]:rr,[bt]:424},[at,AD,IY],[0,1,0]];it.TypeRegistry.for(S).registerError(b1,wd);var v1=[-3,S,i9,{[et]:rr,[bt]:429},[at],[0]];it.TypeRegistry.for(S).registerError(v1,bd);var oa=[-3,S,c9,{[et]:rr,[bt]:424},[at,AD,wY],[0,1,0]];it.TypeRegistry.for(S).registerError(oa,Cd);var Zd=[-3,S,l9,{[et]:rr,[bt]:408},[at],[0]];it.TypeRegistry.for(S).registerError(Zd,vd);var C1=[3,S,m9,8,[vr],[[()=>zy,0]]],sa=[3,S,p9,0,[cY],[0]],tS=[3,S,h9,0,[Z7],[0]],A1=[3,S,v9,8,[ve,UD],[0,0],1],T1=[-3,S,w9,{[et]:rr,[bt]:404},[at],[0]];it.TypeRegistry.for(S).registerError(T1,Sd);var ia=[3,S,I9,0,[dX,oD],[0,0],1],rS=[3,S,O9,0,[Mt,jy,ls,Ry],[0,0,()=>HX,()=>Vy],3],x1=[3,S,N9,0,[ve],[0],1],R1=[3,S,k9,0,[BY,ta,Ld],[1,1,1]],I1=[-3,S,P9,{[et]:rr,[bt]:400},[at],[0]];it.TypeRegistry.for(S).registerError(I1,Ed);var aa=[3,S,M9,0,[vt],[0],1],ca=[-3,S,L9,{[et]:LD,[bt]:503},[at],[0]];it.TypeRegistry.for(S).registerError(ca,_d);var P1=[3,S,$9,0,[Sn],[0],1],O1=[3,S,A9,0,[uo,lY,$y,Ty,rX],[0,[()=>EX,0],()=>tf,[0,4],()=>qX],3],N1=[3,S,T9,0,[Ud],[0],1],D1=[3,S,B9,0,[Sn],[0],1],k1=[3,S,U9,0,[iY,pX],[0,0],2],ua=[-3,S,q9,{[et]:rr,[bt]:429},[at],[0]];it.TypeRegistry.for(S).registerError(ua,hd);var nS=[3,S,J9,0,[Ny,vY,tX,P7,N7,v7],[1,1,1,1,1,()=>wX],3],ef=[3,S,F9,0,[sX,YY],[()=>zX,()=>hM],1],M1=[3,S,z9,0,[Wd,ls,zd,vt],[0,[()=>GX,0],0,0],2],$1=[3,S,K9,0,[Wd,vt,zd],[0,0,0],1],B1=[3,S,Q9,0,[Sn,tY,H7],[0,()=>gM,0],2],L1=[3,S,Z9,0,[Wd,Sn,Py,vt],[0,0,15,0],3],U1=[3,S,e7,0,[Py],[0],1],F1=[3,S,t7,0,[Wd,Sn,vt],[0,0,0],2],la=[-3,S,s7,{[et]:rr,[bt]:400},[at],[0]];it.TypeRegistry.for(S).registerError(la,gd);var oS=[3,S,o7,0,[co,Mt],[0,()=>EM],2],H1=[3,S,a7,0,[fX,q7],[0,0]],q1=[-3,FD,"BedrockRuntimeServiceException",0,[],[]];it.TypeRegistry.for(FD).registerError(q1,Ge);var _X=[1,S,SW,0,[()=>JD,0]],wX=[1,S,$W,0,()=>nk],bX=[1,S,FW,0,()=>W1],vX=[1,S,l5,0,()=>ok],CX=[1,S,XW,0,()=>K1],AX=[1,S,QW,0,()=>ak],TX=[1,S,TW,0,[()=>Y1,0]],xX=[1,S,p5,0,()=>tM],j1=[1,S,C5,0,[()=>Ky,0]],RX=[1,S,x5,0,[()=>Qi,0]],IX=[1,S,I5,0,[()=>nM,0]],KN=[1,S,D5,0,[()=>Pk,0]],sS=[1,S,L5,0,()=>kk],Ji=[1,S,H5,0,[()=>$k,0]],PX=[1,S,K5,0,[()=>ms,0]],OX=[1,S,X5,0,[()=>Uk,0]],NX=[1,S,eK,0,[()=>oM,0]],DX=[1,S,nK,0,()=>qk],kX=[1,S,sK,0,()=>Gk],MX=[1,S,fK,0,()=>Kk],$X=[1,S,EK,0,()=>Jk],BX=[1,S,wK,0,()=>Zk],LX=[1,S,vK,0,()=>e1],UX=[1,S,AK,0,()=>t1],FX=[1,S,NK,0,()=>i1],iS=[1,S,d9,0,[()=>eS,0]],HX=[1,S,D9,0,()=>x1],aS=[1,S,x9,0,[()=>pM,0]],qX=[1,S,G9,0,()=>k1],jX=[1,S,V9,0,()=>yM],GX=[1,S,Y9,0,[()=>SM,0]],zX=[1,S,r7,0,()=>mM],VX=[2,S,A5,0,[0,0],[()=>j1,0]],WX=[2,S,T5,0,[0,0],[()=>Ky,0]],G1=[2,S,g9,8,0,()=>uM],z1=[2,S,_9,8,0,0],tf=[4,S,hW,0,[MY],[()=>QD]],V1=[4,S,EW,8,[vr,Gd],[21,()=>ia]],W1=[4,S,UW,0,[ve],[0]],cS=[4,S,HW,0,[hX,B7,U7,L7,LY],[()=>H1,()=>Ck,()=>Tk,()=>Ak,()=>R1]],K1=[4,S,KW,0,[ve],[0]],Y1=[4,S,NW,0,[ve,fs,uD,jD,y7,qy,Hy,gD,Ay,PD,b7,$D],[0,[()=>Jy,0],()=>Wy,()=>oS,[()=>ZD,0],()=>L1,[()=>M1,0],[()=>uS,0],()=>Qd,[()=>lM,0],()=>sk,()=>rS]],X1=[4,S,xW,0,[ve,qy,Hy,PD,D7,fs],[0,()=>U1,()=>jX,[()=>dM,0],()=>ik,[()=>u1,0]]],Q1=[4,S,IW,0,[qy,Hy,fs],[()=>F1,()=>$1,()=>l1]],J1=[4,S,jW,0,[at],[[()=>eS,0]]],Z1=[4,S,e5,{[Vd]:1},[fY,_7,E7,w7,pY,gY,Oy,ky,Gy,Fy,By],[()=>_1,()=>lk,[()=>uk,0],()=>dk,()=>w1,[()=>hk,0],[()=>na,0],[()=>oa,0],[()=>la,0],[()=>ua,0],[()=>ca,0]]],eM=[4,S,s5,0,[eY,M7],[[()=>p1,0],[()=>_k,0]]],tM=[4,S,m5,0,[ve],[0]],rM=[4,S,S5,0,[vr,Gd,ve,ls],[21,()=>ia,0,()=>xX]],nM=[4,S,R5,0,[mX,sY,jY,oY,WY,XY,SY],[[()=>Fk,0],[()=>Ok,0],[()=>Mk,0],[()=>Ik,0],[()=>Lk,0],()=>Bk,()=>Nk]],oM=[4,S,Z5,0,[ve,fs],[()=>o1,[()=>Yk,0]]],uS=[4,S,tK,0,[ve,fs],[()=>Wk,[()=>Vk,0]]],sM=[4,S,cK,8,[vr],[21]],iM=[4,S,yK,8,[vr],[21]],lS=[4,S,JK,8,[vr,Gd],[21,()=>ia]],aM=[4,S,zK,{[Vd]:1},[xy],[[()=>tk,0]]],cM=[4,S,VK,{[Vd]:1},[xy,Oy,ky,Gy,Fy,vD,By],[[()=>rk,0],[()=>na,0],[()=>oa,0],[()=>la,0],[()=>ua,0],[()=>Zd,0],[()=>ca,0]]],uM=[4,S,y9,0,[ve],[0]],lM=[4,S,S9,8,[PY,OD],[[()=>A1,0],21]],dM=[4,S,E9,8,[ve,OD,UD],[0,21,0]],fM=[4,S,b9,{[Vd]:1},[xy,Oy,ky,Gy,Fy,vD,By],[[()=>C1,0],[()=>na,0],[()=>oa,0],[()=>la,0],[()=>ua,0],[()=>Zd,0],[()=>ca,0]]],pM=[4,S,R9,0,[ve,gD,Ay],[0,[()=>uS,0],()=>Qd]],mM=[4,S,n7,0,[eX,HY,Ay],[()=>B1,()=>D1,()=>Qd]],hM=[4,S,H9,0,[S7,h7,iX],[()=>ek,()=>WD,()=>P1]],gM=[4,S,j9,0,[Dy],[15]],yM=[4,S,W9,0,[ve,Dy],[0,15]],SM=[4,S,X9,0,[Dy,ve,fs,uD,jD,$D],[15,0,[()=>Jy,0],()=>Wy,()=>oS,()=>rS]],EM=[4,S,i7,0,[vr,Gd],[21,()=>ia]],_M=[9,S,lW,{[nr]:["POST","/guardrail/{guardrailIdentifier}/version/{guardrailVersion}/apply",200]},()=>YD,()=>XD],wM=[9,S,d5,{[nr]:["POST","/model/{modelId}/converse",200]},()=>pk,()=>mk],bM=[9,S,WW,{[nr]:["POST","/model/{modelId}/converse-stream",200]},()=>yk,()=>Sk],vM=[9,S,u5,{[nr]:["POST","/model/{modelId}/count-tokens",200]},()=>bk,()=>vk],CM=[9,S,w5,{[nr]:["GET","/async-invoke/{invocationArn}",200]},()=>xk,()=>Rk],AM=[9,S,FK,{[nr]:["POST","/model/{modelId}/invoke",200]},()=>d1,()=>f1],TM=[9,S,GK,{[nr]:["POST","/model/{modelId}/invoke-with-bidirectional-stream",200]},()=>m1,()=>h1],xM=[9,S,YK,{[nr]:["POST","/model/{modelId}/invoke-with-response-stream",200]},()=>g1,()=>y1],RM=[9,S,e9,{[nr]:["GET","/async-invoke",200]},()=>S1,()=>E1],IM=[9,S,C9,{[nr]:["POST","/async-invoke",200]},()=>O1,()=>N1],Ad=class extends ke.Command.classBuilder().ep(tr).m(function(t,r,n,o){return[kt.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ApplyGuardrail",{}).n("BedrockRuntimeClient","ApplyGuardrailCommand").sc(_M).build(){},Td=class extends ke.Command.classBuilder().ep(tr).m(function(t,r,n,o){return[kt.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","Converse",{}).n("BedrockRuntimeClient","ConverseCommand").sc(wM).build(){},xd=class extends ke.Command.classBuilder().ep(tr).m(function(t,r,n,o){return[kt.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ConverseStream",{eventStream:{output:!0}}).n("BedrockRuntimeClient","ConverseStreamCommand").sc(bM).build(){},Rd=class extends ke.Command.classBuilder().ep(tr).m(function(t,r,n,o){return[kt.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","CountTokens",{}).n("BedrockRuntimeClient","CountTokensCommand").sc(vM).build(){},Id=class extends ke.Command.classBuilder().ep(tr).m(function(t,r,n,o){return[kt.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","GetAsyncInvoke",{}).n("BedrockRuntimeClient","GetAsyncInvokeCommand").sc(CM).build(){},Pd=class extends ke.Command.classBuilder().ep(tr).m(function(t,r,n,o){return[kt.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","InvokeModel",{}).n("BedrockRuntimeClient","InvokeModelCommand").sc(AM).build(){},Od=class extends ke.Command.classBuilder().ep(tr).m(function(t,r,n,o){return[kt.getEndpointPlugin(n,t.getEndpointParameterInstructions()),YN.getEventStreamPlugin(n),XN.getWebSocketPlugin(n,{headerPrefix:"x-amz-bedrock-"})]}).s("AmazonBedrockFrontendService","InvokeModelWithBidirectionalStream",{eventStream:{input:!0,output:!0}}).n("BedrockRuntimeClient","InvokeModelWithBidirectionalStreamCommand").sc(TM).build(){},Nd=class extends ke.Command.classBuilder().ep(tr).m(function(t,r,n,o){return[kt.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","InvokeModelWithResponseStream",{eventStream:{output:!0}}).n("BedrockRuntimeClient","InvokeModelWithResponseStreamCommand").sc(xM).build(){},Zi=class extends ke.Command.classBuilder().ep(tr).m(function(t,r,n,o){return[kt.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ListAsyncInvokes",{}).n("BedrockRuntimeClient","ListAsyncInvokesCommand").sc(RM).build(){},Dd=class extends ke.Command.classBuilder().ep(tr).m(function(t,r,n,o){return[kt.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","StartAsyncInvoke",{}).n("BedrockRuntimeClient","StartAsyncInvokeCommand").sc(IM).build(){},KX={ApplyGuardrailCommand:Ad,ConverseCommand:Td,ConverseStreamCommand:xd,CountTokensCommand:Rd,GetAsyncInvokeCommand:Id,InvokeModelCommand:Pd,InvokeModelWithBidirectionalStreamCommand:Od,InvokeModelWithResponseStreamCommand:Nd,ListAsyncInvokesCommand:Zi,StartAsyncInvokeCommand:Dd},kd=class extends Xi{};ke.createAggregatedClient(KX,kd);var YX=fd.createPaginator(Xi,Zi,"nextToken","nextToken","maxResults"),XX={COMPLETED:"Completed",FAILED:"Failed",IN_PROGRESS:"InProgress"},QX={SUBMISSION_TIME:"SubmissionTime"},JX={ASCENDING:"Ascending",DESCENDING:"Descending"},ZX={JPEG:"jpeg",PNG:"png"},eQ={GROUNDING_SOURCE:"grounding_source",GUARD_CONTENT:"guard_content",QUERY:"query"},tQ={FULL:"FULL",INTERVENTIONS:"INTERVENTIONS"},rQ={INPUT:"INPUT",OUTPUT:"OUTPUT"},nQ={GUARDRAIL_INTERVENED:"GUARDRAIL_INTERVENED",NONE:"NONE"},oQ={ACCOUNT_ENFORCED:"ACCOUNT_ENFORCED",ORGANIZATION_ENFORCED:"ORGANIZATION_ENFORCED",REQUEST:"REQUEST"},sQ={CROSS_ACCOUNT:"CROSS_ACCOUNT",SELF:"SELF"},iQ={ALWAYS_FALSE:"ALWAYS_FALSE",ALWAYS_TRUE:"ALWAYS_TRUE"},aQ={BLOCKED:"BLOCKED",NONE:"NONE"},cQ={HIGH:"HIGH",LOW:"LOW",MEDIUM:"MEDIUM",NONE:"NONE"},uQ={HIGH:"HIGH",LOW:"LOW",MEDIUM:"MEDIUM",NONE:"NONE"},lQ={HATE:"HATE",INSULTS:"INSULTS",MISCONDUCT:"MISCONDUCT",PROMPT_ATTACK:"PROMPT_ATTACK",SEXUAL:"SEXUAL",VIOLENCE:"VIOLENCE"},dQ={BLOCKED:"BLOCKED",NONE:"NONE"},fQ={GROUNDING:"GROUNDING",RELEVANCE:"RELEVANCE"},pQ={ANONYMIZED:"ANONYMIZED",BLOCKED:"BLOCKED",NONE:"NONE"},mQ={ADDRESS:"ADDRESS",AGE:"AGE",AWS_ACCESS_KEY:"AWS_ACCESS_KEY",AWS_SECRET_KEY:"AWS_SECRET_KEY",CA_HEALTH_NUMBER:"CA_HEALTH_NUMBER",CA_SOCIAL_INSURANCE_NUMBER:"CA_SOCIAL_INSURANCE_NUMBER",CREDIT_DEBIT_CARD_CVV:"CREDIT_DEBIT_CARD_CVV",CREDIT_DEBIT_CARD_EXPIRY:"CREDIT_DEBIT_CARD_EXPIRY",CREDIT_DEBIT_CARD_NUMBER:"CREDIT_DEBIT_CARD_NUMBER",DRIVER_ID:"DRIVER_ID",EMAIL:"EMAIL",INTERNATIONAL_BANK_ACCOUNT_NUMBER:"INTERNATIONAL_BANK_ACCOUNT_NUMBER",IP_ADDRESS:"IP_ADDRESS",LICENSE_PLATE:"LICENSE_PLATE",MAC_ADDRESS:"MAC_ADDRESS",NAME:"NAME",PASSWORD:"PASSWORD",PHONE:"PHONE",PIN:"PIN",SWIFT_CODE:"SWIFT_CODE",UK_NATIONAL_HEALTH_SERVICE_NUMBER:"UK_NATIONAL_HEALTH_SERVICE_NUMBER",UK_NATIONAL_INSURANCE_NUMBER:"UK_NATIONAL_INSURANCE_NUMBER",UK_UNIQUE_TAXPAYER_REFERENCE_NUMBER:"UK_UNIQUE_TAXPAYER_REFERENCE_NUMBER",URL:"URL",USERNAME:"USERNAME",US_BANK_ACCOUNT_NUMBER:"US_BANK_ACCOUNT_NUMBER",US_BANK_ROUTING_NUMBER:"US_BANK_ROUTING_NUMBER",US_INDIVIDUAL_TAX_IDENTIFICATION_NUMBER:"US_INDIVIDUAL_TAX_IDENTIFICATION_NUMBER",US_PASSPORT_NUMBER:"US_PASSPORT_NUMBER",US_SOCIAL_SECURITY_NUMBER:"US_SOCIAL_SECURITY_NUMBER",VEHICLE_IDENTIFICATION_NUMBER:"VEHICLE_IDENTIFICATION_NUMBER"},hQ={BLOCKED:"BLOCKED",NONE:"NONE"},gQ={DENY:"DENY"},yQ={BLOCKED:"BLOCKED",NONE:"NONE"},SQ={PROFANITY:"PROFANITY"},EQ={DISABLED:"disabled",ENABLED:"enabled",ENABLED_FULL:"enabled_full"},_Q={AAC:"aac",FLAC:"flac",M4A:"m4a",MKA:"mka",MKV:"mkv",MP3:"mp3",MP4:"mp4",MPEG:"mpeg",MPGA:"mpga",OGG:"ogg",OPUS:"opus",PCM:"pcm",WAV:"wav",WEBM:"webm",X_AAC:"x-aac"},wQ={FIVE_MINUTES:"5m",ONE_HOUR:"1h"},bQ={DEFAULT:"default"},vQ={CSV:"csv",DOC:"doc",DOCX:"docx",HTML:"html",MD:"md",PDF:"pdf",TXT:"txt",XLS:"xls",XLSX:"xlsx"},CQ={JPEG:"jpeg",PNG:"png"},AQ={GROUNDING_SOURCE:"grounding_source",GUARD_CONTENT:"guard_content",QUERY:"query"},TQ={GIF:"gif",JPEG:"jpeg",PNG:"png",WEBP:"webp"},xQ={FLV:"flv",MKV:"mkv",MOV:"mov",MP4:"mp4",MPEG:"mpeg",MPG:"mpg",THREE_GP:"three_gp",WEBM:"webm",WMV:"wmv"},RQ={ERROR:"error",SUCCESS:"success"},IQ={SERVER_TOOL_USE:"server_tool_use"},PQ={ASSISTANT:"assistant",USER:"user"},OQ={OPTIMIZED:"optimized",STANDARD:"standard"},NQ={DEFAULT:"default",FLEX:"flex",PRIORITY:"priority",RESERVED:"reserved"},DQ={CONTENT_FILTERED:"content_filtered",END_TURN:"end_turn",GUARDRAIL_INTERVENED:"guardrail_intervened",MALFORMED_MODEL_OUTPUT:"malformed_model_output",MALFORMED_TOOL_USE:"malformed_tool_use",MAX_TOKENS:"max_tokens",MODEL_CONTEXT_WINDOW_EXCEEDED:"model_context_window_exceeded",STOP_SEQUENCE:"stop_sequence",TOOL_USE:"tool_use"},kQ={ASYNC:"async",SYNC:"sync"},MQ={DISABLED:"DISABLED",ENABLED:"ENABLED",ENABLED_FULL:"ENABLED_FULL"};Object.defineProperty(y,"$Command",{enumerable:!0,get:function(){return ke.Command}});Object.defineProperty(y,"__Client",{enumerable:!0,get:function(){return ke.Client}});y.AccessDeniedException=pd;y.AccessDeniedException$=VD;y.AnyToolChoice$=WD;y.AppliedGuardrailDetails$=KD;y.ApplyGuardrail$=_M;y.ApplyGuardrailCommand=Ad;y.ApplyGuardrailRequest$=YD;y.ApplyGuardrailResponse$=XD;y.AsyncInvokeOutputDataConfig$=tf;y.AsyncInvokeS3OutputDataConfig$=QD;y.AsyncInvokeStatus=XX;y.AsyncInvokeSummary$=JD;y.AudioBlock$=ZD;y.AudioFormat=_Q;y.AudioSource$=V1;y.AutoToolChoice$=ek;y.BedrockRuntime=kd;y.BedrockRuntimeClient=Xi;y.BedrockRuntimeServiceException=Ge;y.BedrockRuntimeServiceException$=q1;y.BidirectionalInputPayloadPart$=tk;y.BidirectionalOutputPayloadPart$=rk;y.CacheDetail$=nk;y.CachePointBlock$=Qd;y.CachePointType=bQ;y.CacheTTL=wQ;y.Citation$=ok;y.CitationGeneratedContent$=W1;y.CitationLocation$=cS;y.CitationSourceContent$=K1;y.CitationSourceContentDelta$=ak;y.CitationsConfig$=Vy;y.CitationsContentBlock$=sk;y.CitationsDelta$=ik;y.ConflictException=yd;y.ConflictException$=ck;y.ContentBlock$=Y1;y.ContentBlockDelta$=X1;y.ContentBlockDeltaEvent$=uk;y.ContentBlockStart$=Q1;y.ContentBlockStartEvent$=lk;y.ContentBlockStopEvent$=dk;y.ConversationRole=PQ;y.Converse$=wM;y.ConverseCommand=Td;y.ConverseMetrics$=fk;y.ConverseOutput$=J1;y.ConverseRequest$=pk;y.ConverseResponse$=mk;y.ConverseStream$=bM;y.ConverseStreamCommand=xd;y.ConverseStreamMetadataEvent$=hk;y.ConverseStreamMetrics$=gk;y.ConverseStreamOutput$=Z1;y.ConverseStreamRequest$=yk;y.ConverseStreamResponse$=Sk;y.ConverseStreamTrace$=Ek;y.ConverseTokensRequest$=_k;y.ConverseTrace$=wk;y.CountTokens$=vM;y.CountTokensCommand=Rd;y.CountTokensInput$=eM;y.CountTokensRequest$=bk;y.CountTokensResponse$=vk;y.DocumentBlock$=Wy;y.DocumentCharLocation$=Ck;y.DocumentChunkLocation$=Ak;y.DocumentContentBlock$=tM;y.DocumentFormat=vQ;y.DocumentPageLocation$=Tk;y.DocumentSource$=rM;y.ErrorBlock$=Jd;y.GetAsyncInvoke$=CM;y.GetAsyncInvokeCommand=Id;y.GetAsyncInvokeRequest$=xk;y.GetAsyncInvokeResponse$=Rk;y.GuardrailAction=nQ;y.GuardrailAssessment$=Ky;y.GuardrailAutomatedReasoningFinding$=nM;y.GuardrailAutomatedReasoningImpossibleFinding$=Ik;y.GuardrailAutomatedReasoningInputTextReference$=Pk;y.GuardrailAutomatedReasoningInvalidFinding$=Ok;y.GuardrailAutomatedReasoningLogicWarning$=ra;y.GuardrailAutomatedReasoningLogicWarningType=iQ;y.GuardrailAutomatedReasoningNoTranslationsFinding$=Nk;y.GuardrailAutomatedReasoningPolicyAssessment$=Dk;y.GuardrailAutomatedReasoningRule$=kk;y.GuardrailAutomatedReasoningSatisfiableFinding$=Mk;y.GuardrailAutomatedReasoningScenario$=Qi;y.GuardrailAutomatedReasoningStatement$=$k;y.GuardrailAutomatedReasoningTooComplexFinding$=Bk;y.GuardrailAutomatedReasoningTranslation$=ms;y.GuardrailAutomatedReasoningTranslationAmbiguousFinding$=Lk;y.GuardrailAutomatedReasoningTranslationOption$=Uk;y.GuardrailAutomatedReasoningValidFinding$=Fk;y.GuardrailConfiguration$=Hk;y.GuardrailContentBlock$=oM;y.GuardrailContentFilter$=qk;y.GuardrailContentFilterConfidence=cQ;y.GuardrailContentFilterStrength=uQ;y.GuardrailContentFilterType=lQ;y.GuardrailContentPolicyAction=aQ;y.GuardrailContentPolicyAssessment$=jk;y.GuardrailContentQualifier=eQ;y.GuardrailContentSource=rQ;y.GuardrailContextualGroundingFilter$=Gk;y.GuardrailContextualGroundingFilterType=fQ;y.GuardrailContextualGroundingPolicyAction=dQ;y.GuardrailContextualGroundingPolicyAssessment$=zk;y.GuardrailConverseContentBlock$=uS;y.GuardrailConverseContentQualifier=AQ;y.GuardrailConverseImageBlock$=Vk;y.GuardrailConverseImageFormat=CQ;y.GuardrailConverseImageSource$=sM;y.GuardrailConverseTextBlock$=Wk;y.GuardrailCoverage$=Yy;y.GuardrailCustomWord$=Kk;y.GuardrailImageBlock$=Yk;y.GuardrailImageCoverage$=Xk;y.GuardrailImageFormat=ZX;y.GuardrailImageSource$=iM;y.GuardrailInvocationMetrics$=Qk;y.GuardrailManagedWord$=Jk;y.GuardrailManagedWordType=SQ;y.GuardrailOrigin=oQ;y.GuardrailOutputContent$=Zk;y.GuardrailOutputScope=tQ;y.GuardrailOwnership=sQ;y.GuardrailPiiEntityFilter$=e1;y.GuardrailPiiEntityType=mQ;y.GuardrailRegexFilter$=t1;y.GuardrailSensitiveInformationPolicyAction=pQ;y.GuardrailSensitiveInformationPolicyAssessment$=r1;y.GuardrailStreamConfiguration$=n1;y.GuardrailStreamProcessingMode=kQ;y.GuardrailTextBlock$=o1;y.GuardrailTextCharactersCoverage$=s1;y.GuardrailTopic$=i1;y.GuardrailTopicPolicyAction=hQ;y.GuardrailTopicPolicyAssessment$=a1;y.GuardrailTopicType=gQ;y.GuardrailTrace=EQ;y.GuardrailTraceAssessment$=Xy;y.GuardrailUsage$=Qy;y.GuardrailWordPolicyAction=yQ;y.GuardrailWordPolicyAssessment$=c1;y.ImageBlock$=Jy;y.ImageBlockDelta$=u1;y.ImageBlockStart$=l1;y.ImageFormat=TQ;y.ImageSource$=lS;y.InferenceConfiguration$=Zy;y.InternalServerException=md;y.InternalServerException$=na;y.InvokeModel$=AM;y.InvokeModelCommand=Pd;y.InvokeModelRequest$=d1;y.InvokeModelResponse$=f1;y.InvokeModelTokensRequest$=p1;y.InvokeModelWithBidirectionalStream$=TM;y.InvokeModelWithBidirectionalStreamCommand=Od;y.InvokeModelWithBidirectionalStreamInput$=aM;y.InvokeModelWithBidirectionalStreamOutput$=cM;y.InvokeModelWithBidirectionalStreamRequest$=m1;y.InvokeModelWithBidirectionalStreamResponse$=h1;y.InvokeModelWithResponseStream$=xM;y.InvokeModelWithResponseStreamCommand=Nd;y.InvokeModelWithResponseStreamRequest$=g1;y.InvokeModelWithResponseStreamResponse$=y1;y.ListAsyncInvokes$=RM;y.ListAsyncInvokesCommand=Zi;y.ListAsyncInvokesRequest$=S1;y.ListAsyncInvokesResponse$=E1;y.Message$=eS;y.MessageStartEvent$=_1;y.MessageStopEvent$=w1;y.ModelErrorException=wd;y.ModelErrorException$=b1;y.ModelNotReadyException=bd;y.ModelNotReadyException$=v1;y.ModelStreamErrorException=Cd;y.ModelStreamErrorException$=oa;y.ModelTimeoutException=vd;y.ModelTimeoutException$=Zd;y.PayloadPart$=C1;y.PerformanceConfigLatency=OQ;y.PerformanceConfiguration$=sa;y.PromptRouterTrace$=tS;y.PromptVariableValues$=uM;y.ReasoningContentBlock$=lM;y.ReasoningContentBlockDelta$=dM;y.ReasoningTextBlock$=A1;y.ResourceNotFoundException=Sd;y.ResourceNotFoundException$=T1;y.ResponseStream$=fM;y.S3Location$=ia;y.SearchResultBlock$=rS;y.SearchResultContentBlock$=x1;y.SearchResultLocation$=R1;y.ServiceQuotaExceededException=Ed;y.ServiceQuotaExceededException$=I1;y.ServiceTier$=aa;y.ServiceTierType=NQ;y.ServiceUnavailableException=_d;y.ServiceUnavailableException$=ca;y.SortAsyncInvocationBy=QX;y.SortOrder=JX;y.SpecificToolChoice$=P1;y.StartAsyncInvoke$=IM;y.StartAsyncInvokeCommand=Dd;y.StartAsyncInvokeRequest$=O1;y.StartAsyncInvokeResponse$=N1;y.StopReason=DQ;y.SystemContentBlock$=pM;y.SystemTool$=D1;y.Tag$=k1;y.ThrottlingException=hd;y.ThrottlingException$=ua;y.TokenUsage$=nS;y.Tool$=mM;y.ToolChoice$=hM;y.ToolConfiguration$=ef;y.ToolInputSchema$=gM;y.ToolResultBlock$=M1;y.ToolResultBlockDelta$=yM;y.ToolResultBlockStart$=$1;y.ToolResultContentBlock$=SM;y.ToolResultStatus=RQ;y.ToolSpecification$=B1;y.ToolUseBlock$=L1;y.ToolUseBlockDelta$=U1;y.ToolUseBlockStart$=F1;y.ToolUseType=IQ;y.Trace=MQ;y.ValidationException=gd;y.ValidationException$=la;y.VideoBlock$=oS;y.VideoFormat=xQ;y.VideoSource$=EM;y.WebLocation$=H1;y.paginateListAsyncInvokes=YX});c();var rf=A(PM(),1),$Q=new rf.BedrockRuntimeClient({region:"us-east-1"}),Ghe=async e=>{let t=e.arguments,r=`
Eres un experto en auditor\xEDa m\xE9dica y defensa de glosas para IPS en Colombia.

CONTEXTO DEL CASO:
- Paciente: ${t.patientHistory.name}, ${t.patientHistory.age||"edad no especificada"} a\xF1os
- Diagn\xF3stico: ${t.patientHistory.diagnosis}
- EPS: ${t.billingRecord.eps}
- Fecha del servicio: ${t.billingRecord.date}
- Procedimientos facturados (CUPS): ${t.billingRecord.procedures.join(", ")}
- Diagn\xF3stico facturado (CIE-10): ${t.billingRecord.diagnosis}
- Valor facturado: $${t.billingRecord.totalAmount.toLocaleString("es-CO")} COP

MOTIVO DE RECHAZO (GLOSA):
${t.billingRecord.rejectionReason}

HISTORIA CL\xCDNICA RECIENTE:
${t.patientHistory.vitalSigns.map(n=>`- ${n.date}: PA ${n.sys}/${n.dia}, SpO2 ${n.spo2}%, FC ${n.hr} lpm${n.note?` - ${n.note}`:""}`).join(`
`)}

NOTAS CL\xCDNICAS DEL SERVICIO:
${t.clinicalNotes.map((n,o)=>`${o+1}. ${n}`).join(`
`)}

TAREA:
Genera una carta de defensa profesional y t\xE9cnica para responder a esta glosa. La carta debe:

1. Estar dirigida al \xE1rea de auditor\xEDa de la EPS
2. Citar normatividad colombiana relevante (Resoluci\xF3n 3100, Ley 100, etc.)
3. Justificar cl\xEDnicamente la necesidad de los procedimientos realizados
4. Referenciar los signos vitales y evoluci\xF3n del paciente
5. Argumentar por qu\xE9 el rechazo es improcedente
6. Solicitar formalmente la aceptaci\xF3n de la factura
7. Estar escrita en espa\xF1ol formal y profesional
8. Tener estructura de carta oficial (fecha, destinatario, asunto, cuerpo, despedida)

FORMATO DE SALIDA:
Devuelve \xDANICAMENTE el texto de la carta, sin comentarios adicionales.
`;try{let n=new rf.InvokeModelCommand({modelId:process.env.MODEL_ID,contentType:"application/json",accept:"application/json",body:JSON.stringify({anthropic_version:"bedrock-2023-05-31",max_tokens:2e3,temperature:.7,messages:[{role:"user",content:[{type:"text",text:r}]}]})}),o=await $Q.send(n);return{success:!0,defenseLetter:JSON.parse(new TextDecoder().decode(o.body)).content[0].text,generatedAt:new Date().toISOString(),model:process.env.MODEL_ID}}catch(n){return console.error("Glosa defense generation failed:",n),{success:!1,defenseLetter:`
[CARTA GENERADA AUTOM\xC1TICAMENTE - ERROR EN IA]

Fecha: ${new Date().toLocaleDateString("es-CO")}

Se\xF1ores
${t.billingRecord.eps}
\xC1rea de Auditor\xEDa M\xE9dica

Asunto: Respuesta a Glosa - Factura ${t.billingRecord.id}

Cordial saludo,

Por medio de la presente, nos permitimos responder a la glosa presentada sobre la factura del servicio prestado el ${t.billingRecord.date} al paciente ${t.patientHistory.name}.

Motivo de rechazo: ${t.billingRecord.rejectionReason}

Justificaci\xF3n cl\xEDnica:
El paciente presenta diagn\xF3stico de ${t.billingRecord.diagnosis}, requiriendo los procedimientos facturados (CUPS: ${t.billingRecord.procedures.join(", ")}) seg\xFAn protocolo de atenci\xF3n domiciliaria.

Solicitamos comedidamente la revisi\xF3n y aceptaci\xF3n de esta factura.

Atentamente,
[Coordinaci\xF3n M\xE9dica - IPS]
`,error:n instanceof Error?n.message:"Unknown error",generatedAt:new Date().toISOString()}}};export{Ghe as handler};
//# sourceMappingURL=index.mjs.map
